!function(){"use strict";window.addEventListener("load",(function(){let e=document.createElement("div");e.className="lds-grid";for(let t=0;t<9;t++)e.appendChild(document.createElement("div"));e.style.left=window.innerWidth/2-32+"px";let t=document.querySelector("#loading-screen");t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.appendChild(e)}),!1);var e,t=(e=new THREE.Matrix4,function(t,n){n.matrix.copy(t.matrixWorld),n.applyMatrix(e.getInverse(n.parent.matrixWorld))});AFRAME.registerSystem("grabbable",{schema:{},init:function(){CS1.grabbables={},CS1.__updateGrabbables=e=>{0!==Object.keys(CS1.grabbables).length&&CS1.grabbables[e[0].name]&&CS1.game.hasBegun&&e.forEach((e,t)=>{let n=CS1.grabbables[e.name];n&&(CS1.debug&&(console.log("Individual body data from server:"),console.log(e)),e.position&&n.object3D.position.copy(e.position),e.scale&&n.object3D.scale.copy(e.scale),e.rotation&&n.object3D.quaternion.copy(e.rotation))})},CS1.socket.on("add-grabbable-primitive",e=>{if(e.origin==CS1.socket.id||!CS1.game.hasBegun)return;const t=document.createElement(e.type);if(t.setAttribute("grabbable","remote:true"),t.object3D.position.set(e.position.x,e.position.y,e.position.z),t.object3D.scale.set(e.scale.x,e.scale.y,e.scale.z),t.object3D.setRotationFromQuaternion(new THREE.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),t.soundState=e.soundState,console.log("adding remote late grabbable"),e.custom)for(let[n,i]of Object.entries(e.custom))i&&t.setAttribute(n,i),"collectible"==n&&console.log("detected collectible on remote late grabbable"),"launchable"==n&&(t.setAttribute("launchable",""),console.log("detected launchable on remote late grabbable")),"postRelease"==n&&(t.setAttribute("grabbable",`remote:true;postRelease:${i}`),console.log("detected postRelease on remote late grabbable"));CS1.scene.appendChild(t)}),CS1.socket.on("post-release",e=>{CS1.grabbables[e]&&"function"==typeof CS1.callbacks[CS1.grabbables[e].components.grabbable.data.postRelease]&&CS1.callbacks[CS1.grabbables[e].components.grabbable.data.postRelease](e)})}}),AFRAME.registerComponent("grabbable",{schema:{origin:{type:"selector"},remote:{default:!1},postRelease:{default:""}},init:function(){var e=this;if(e.cursor=!1,e.isDragging=!1,e.originEl=this.data.origin||this.el,e.proxyObject=null,e.el.classList.add("interactive"),e.el.components.log&&(e.el.setAttribute("log",`channel:${String(e.name)}`),CS1.socket._callbacks["$vr-log"]||CS1.socket.on("vr-log",e=>{CS1.log(e.msg,String(e.channel))})),this.name=Object.keys(CS1.grabbables).length,CS1.grabbables[this.name]=e.el,CS1&&CS1.game&&CS1.game.hasBegun&&!this.data.remote){console.log("Adding a local late grabbable.");const t={};t.color=e.el.getAttribute("color");const i=e.el.getAttribute("src");i&&(t.src=i);const o=e.el.components.collectible;o&&(t.collectible=o.data,console.log("detected collectible on local late grabbable")),e.el.components.launchable&&(t.launchable=!0,console.log("detected launchable on local late grabbable")),this.data.postRelease&&(t.postRelease=this.data.postRelease),n(),CS1.socket.emit("add-grabbable-primitive",{name:e.name,position:e.el.object3D.position,scale:e.el.object3D.scale,rotation:{x:e.el.object3D.quaternion.x,y:e.el.object3D.quaternion.y,z:e.el.object3D.quaternion.z,w:e.el.object3D.quaternion.w},soundState:e.el.soundState,type:e.el.nodeName,custom:t,origin:CS1.socket.id})}function n(){"Mobile"==CS1.device?(e.el.addEventListener("click",(function(e){i(e),setTimeout((function(e){document.querySelector("#cam-cursor").setAttribute("material","color: yellow"),o(e),setTimeout((function(e){document.querySelector("#cam-cursor").setAttribute("material","color: crimson")}),500)}),5e3)})),e.el.addEventListener("mouseenter",e=>{document.querySelector("#cam-cursor").setAttribute("material",{color:"green"})}),e.el.addEventListener("mouseleave",e=>{document.querySelector("#cam-cursor").setAttribute("material",{color:"crimson"})})):"Standard"==CS1.device&&(e.el.addEventListener("mouseenter",e=>{document.querySelector("#cam-cursor").setAttribute("material",{color:"green"})}),e.el.addEventListener("mouseleave",e=>{document.querySelector("#cam-cursor").setAttribute("material",{color:"crimson"})})),document.removeEventListener("gameStart",n)}function i(n){var i;n.cancelBubble=!0,e.isDragging||(e.isDragging=!0,e.cursor=n.detail.cursorEl,e.cursor==e.el.sceneEl&&(e.cursor=document.querySelector("[camera]")),e.el.setAttribute("visible",!1),setTimeout((function(){e.el.setAttribute("visible",!0)}),20),i=e.cursor.object3D,e.proxyObject=new THREE.Object3D,e.originEl.visible=!1,setTimeout((function(){e.originEl.visible=!0}),1e3),i.add(e.proxyObject),t(e.originEl.object3D,e.proxyObject),e.originEl.emit("grabStart",n),e.originEl.addState("moving"))}function o(t){e.isDragging&&(e.isDragging=!1,e.proxyObject&&(e.proxyObject.parent.remove(e.proxyObject),e.proxyObject=null),e.originEl.setAttribute("position",e.originEl.getAttribute("position")),e.originEl.setAttribute("rotation",e.originEl.getAttribute("rotation")),e.data.postRelease&&(CS1.socket.emit("post-release",e.name),CS1.callbacks[e.data.postRelease](e.name)),e.originEl.emit("grabEnd",t),setTimeout(t=>{e.originEl.removeState("moving")},500))}e.el.addEventListener("mousedown",i),e.el.addEventListener("mouseup",o),document.addEventListener("gameStart",n),AFRAME.utils.device.checkHeadsetConnected(),e.el.addEventListener("mouseup",o)},tick:function(){this.proxyObject&&(t(this.proxyObject,this.originEl.object3D),this.originEl.setAttribute("position",this.originEl.getAttribute("position")),this.originEl.setAttribute("rotation",this.originEl.getAttribute("rotation")))}}),AFRAME.registerComponent("nav-pointer",{init:function(){const e=this.el;e.addEventListener("click",t=>{const n=e.sceneEl.querySelector("[nav-agent]");n&&n.setAttribute("nav-agent",{active:!0,destination:t.detail.intersection.point})}),e.addEventListener("mouseenter",t=>{e.setAttribute("material",{color:"green"})}),e.addEventListener("mouseleave",t=>{e.setAttribute("material",{color:"crimson"})}),e.addEventListener("mousedown",e=>{}),e.sceneEl.addEventListener("object3dset",e=>{this.el.components.raycaster.refreshObjects()})}}),AFRAME.registerComponent("weather-viz",{schema:{side:{type:"string",default:"double"},url:{type:"string",default:"https://api.openweathermap.org/data/2.5/forecast/?appid=56df5e300fabead0a56fc2d706e6aa7d&id=4959473"}},dependencies:["geometry","material"],init:function(){this.el.setAttribute("width",6),this.el.setAttribute("height",4),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left=-2e3,this.canvas.id=CS1.utils.uid(),this.canvas.setAttribute("crossOrigin","anonymous"),document.querySelector("a-scene").appendChild(this.canvas),this.el.setAttribute("material",`shader:flat;src:#${this.canvas.id};side:${this.data.side}`),this.cursor=document.querySelector("#cam-cursor");var e=this.ctx=this.canvas.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,this.canvas.width,this.canvas.height),this.dataProcessed=!1,fetch(this.data.url).then(e=>e.json()).then(e=>{this.processData(e)}).catch(e=>{console.log(e)})},processData:function(e){this.data=[],e.list.forEach(e=>{this.data.push({dt:e.dt_txt,temp_max:this.k2f(e.main.temp_max)})}),this.dataProcessed=!0},k2f:function(e){return Math.round(9*(e-273.15)/5+32)},tick:function(e,t){this.dataProcessed&&(this.visualizeData(e),this.updateCanvas())},visualizeData:function(e){let t=this.canvas,n=t.width/this.data.length,i=this.ctx;"green"==this.cursor.getAttribute("material").color&&(e=1e3),this.data.forEach((o,r)=>{let a=e*(o.temp_max/900);i.fillStyle="hsl("+a+", 50%, 30%)",i.fillRect(r*n,0,n,t.height)})},drawRectangles:function(e){var t,n,i=this.canvas,o=this.ctx,r=e/10;o.fillStyle="hsl("+r+", 50%, 80%)",o.fillRect(0,0,i.width,i.height),r=e/15,o.fillStyle="hsl("+r+", 50%, 60%)",t=i.width/10,n=i.height/10,o.fillRect(t,n,i.width-2*t,i.height-2*n),r=e/20,o.fillStyle="hsl("+r+", 50%, 40%)",t=i.width/5,n=i.height/5,o.fillRect(t,n,i.width-2*t,i.height-2*n)},updateCanvas:function(){var e;(e=this.el.getObject3D("mesh").material).map&&(e.map.needsUpdate=!0)}});var n={id:139,name:"Polkadot Shader",fragment:"// Gives us dFdx\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\n\nuniform vec3 cameraPosition;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float frequency;\nuniform float radius;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n// Anti-alias step function\nfloat aastep(float threshold, float value) {\n    float afwidth = 0.7 * length(vec2(dFdx(value), dFdy(value)));\n    return smoothstep(threshold - afwidth, threshold + afwidth, value);\n}\n \nvoid main() {\n    // Rotate the UV coord by 45 degrees. See \n    // https://en.wikipedia.org/wiki/Rotation_matrix#Common_rotations\n    vec2 st2 = mat2( 0.5, -0.5, 0.5, 0.5 ) * vUv;\n    vec2 nearest = 2.0 * fract( frequency * st2 ) - 1.0;\n    float dist = length( nearest );\n    \n    vec3 fragcolor = mix( color1, color2, aastep( radius, dist ) );\n    gl_FragColor = vec4( fragcolor, 1.0 );\n}",vertex:"/**\n* Example Vertex Shader\n* Sets the position of the vertex by setting gl_Position\n*/\n\n// Set the precision for data types used in this shader\nprecision highp float;\nprecision highp int;\n\n// Default THREE.js uniforms available to both fragment and vertex shader\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\n\n// Default uniforms provided by ShaderFrog.\nuniform vec3 cameraPosition;\nuniform float time;\n\n// Default attributes provided by THREE.js. Attributes are only available in the\n// vertex shader. You can pass them to the fragment shader using varyings\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n\n// Examples of variables passed from vertex to fragment shader\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\n\nvoid main() {\n\n    // To pass variables to the fragment shader, you assign them here in the\n    // main function. Traditionally you name the varying with vAttributeName\n    vNormal = normal;\n    vUv = uv;\n    vUv2 = uv2;\n    vPosition = position;\n\n    // This sets the position of the vertex in 3d space. The correct math is\n    // provided below to take into account camera and object data.\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}",uniforms:{cameraPosition:{name:"cameraPosition",type:"v3",glslType:"vec3",description:""},time:{name:"time",type:"f",glslType:"float",description:""},color1:{name:null,type:"c",glslType:"vec3",value:{r:1,g:.5411764705882353,b:.7294117647058823},description:""},color2:{name:null,type:"c",glslType:"vec3",value:{r:0,g:0,b:0},description:""},frequency:{name:null,type:"f",glslType:"float",value:"10",description:""},radius:{name:null,type:"f",glslType:"float",value:"0.5",description:""}},url:"http://shaderfrog.com/app/view/139",user:{username:"andrewray",url:"http://shaderfrog.com/app/profile/andrewray"}},i={id:1068,name:"Sun Shader",fragment:"#define OCTAVES 2\n\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform float time;\nuniform float brightness;\nuniform float sunSpots;\nuniform vec3 color;\nuniform vec2 speed;\nuniform vec2 resolution;\nvarying vec2 vUv;\nfloat rand(vec2 n) \n{\n    return fract(sin(dot(n, vec2(13, 5))) * 43758.5453);\n}\nfloat noise(vec2 n) \n{\n    const vec2 d = vec2(0.0, 1.0);\n    vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n    return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\nfloat fbm(vec2 n) \n{\n    float total = 0.0;\n    float amplitude = 2.0;\n    for (int i = 0;\n i < OCTAVES; i++) \n    {\n        total += noise(n) * amplitude;\n        n += n;\n        amplitude *= 0.3;\n    }\n    return total;\n}\nvec3 tex(vec2 pos) \n{\n    vec3 c1 = (1.0 - sunSpots) * vec3(3.1, 0.0, 0.0);\n    vec3 c2 = vec3(c1);\n    vec3 c3 = vec3(c1);\n    vec3 c4 = vec3(3.0, 0.9, 0.0) * color;\n    vec3 c5 = vec3(c3);\n    vec3 c6 = vec3(c1);\n    vec2 p = pos;\n    float q = fbm(p + time * speed);\n    vec2 r = vec2(fbm(p + q + (time * speed.x) - p.x - p.y), fbm(p + p + (time * speed.y)));\n    vec3 c = color * (mix(c1, c2, fbm(p + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y));\n    return c;\n}\nvec4 Surface_of_The_Sun1478777938883_101_main() \n{\n    vec4 Surface_of_The_Sun1478777938883_101_gl_FragColor = vec4(0.0);\n    vec2 p = (vUv - 0.5) * resolution;\n    vec3 col = tex(p);\n    Surface_of_The_Sun1478777938883_101_gl_FragColor = vec4(col * brightness, 1.0);\n    return Surface_of_The_Sun1478777938883_101_gl_FragColor *= 1.0;\n}\nvoid main() \n{\n    gl_FragColor = (Surface_of_The_Sun1478777938883_101_main());}\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvec4 Surface_of_The_Sun1478777938883_101_main() \n{\n    vec4 Surface_of_The_Sun1478777938883_101_gl_Position = vec4(0.0);\n    vNormal = normal;\n    vUv = uv;\n    vUv2 = uv2;\n    vPosition = position;\n    Surface_of_The_Sun1478777938883_101_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    return Surface_of_The_Sun1478777938883_101_gl_Position *= 1.0;\n}\nvoid main() \n{\n    gl_Position = Surface_of_The_Sun1478777938883_101_main();}\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},resolution:{value:{x:"100",y:"100"},type:"v2",glslType:"vec2"},brightness:{value:"0.52098325",type:"f",glslType:"float"},speed:{value:{x:.9230769230769231,y:.9230769230769231},type:"v2",glslType:"vec2"},color:{value:{r:"1",g:"1",b:"1"},type:"c",glslType:"vec3"},sunSpots:{value:"1",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/1068",user:{username:"entropy",url:"http://shaderfrog.com/app/profile/andrewray"}},o={id:2901,name:"Jelly Shader",fragment:"#define TAU 6.28318530718\n#define MAX_ITER 5\n#define tau 6.2831853\n\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform vec2 Tiling_Caustic1477531952046_152_resolution;\nuniform vec3 backgroundColor;\nuniform vec3 Tiling_Caustic1477531952046_152_color;\nuniform float Tiling_Caustic1477531952046_152_speed;\nuniform float Tiling_Caustic1477531952046_152_brightness;\nuniform float time;\nuniform float contrast;\nuniform float distortion;\nuniform float Noise_Ripples1477531959288_166_speed;\nuniform vec3 Noise_Ripples1477531959288_166_color;\nuniform float Noise_Ripples1477531959288_166_brightness;\nuniform sampler2D noiseImage;\nuniform vec2 Noise_Ripples1477531959288_166_resolution;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\nuniform float highlightIntensity;\nuniform vec3 highlightColor;\nuniform vec3 Wiggly_Improved1477532051339_181_color;\nuniform vec3 Transparent_Glow1477532059126_201_color;\nuniform float Transparent_Glow1477532059126_201_start;\nuniform float Transparent_Glow1477532059126_201_end;\nuniform float Transparent_Glow1477532059126_201_alpha;\nuniform vec3 Glow_Effect1477532183055_216_color;\nuniform float Glow_Effect1477532183055_216_start;\nuniform float Glow_Effect1477532183055_216_end;\nuniform float Glow_Effect1477532183055_216_alpha;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nmat2 makem2(in float theta) \n    {\n        float c = cos(theta);\n        float s = sin(theta);\n        return mat2(c, -s, s, c);\n    }\nfloat noise(in vec2 x) \n    {\n        return texture2D(noiseImage, x * .01).x;\n    }\nfloat fbm(in vec2 p) \n    {\n        float z = 2.;\n        float rz = 0.;\n        vec2 bp = p;\n        for (float i = 1.;\n i < 6.0; i++) \n        {\n            rz += abs((noise(p) - 0.5) * 2.0) / z;\n            z = z * 2.;\n            p = p * 2.;\n        }\n        return rz;\n    }\nfloat dualfbm(in vec2 p) \n    {\n        vec2 p2 = p * distortion;\n        vec2 basis = vec2(fbm(p2 - time * Noise_Ripples1477531959288_166_speed * 1.6), fbm(p2 + time * Noise_Ripples1477531959288_166_speed * 1.7));\n        basis = (basis - .5) * .2;\n        p += basis;\n        return fbm(p * makem2(time * Noise_Ripples1477531959288_166_speed * 0.2));\n    }\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_FragColor = vec4(0.0);\n        vec2 uv = Tiling_Caustic1477531952046_152_vUv * Tiling_Caustic1477531952046_152_resolution;\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 1.0;\n        float inten = 0.005;\n        for (int n = 0;\n n < MAX_ITER; n++) \n        {\n            float t = time * Tiling_Caustic1477531952046_152_speed * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, Tiling_Caustic1477531952046_152_brightness);\n        vec3 rgb = vec3(pow(abs(c), 8.0));\n        Tiling_Caustic1477531952046_152_gl_FragColor = vec4(rgb * Tiling_Caustic1477531952046_152_color + backgroundColor, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_FragColor *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_FragColor = vec4(0.0);\n        vec2 p = (Noise_Ripples1477531959288_166_vUv.xy - 0.5) * Noise_Ripples1477531959288_166_resolution;\n        float rz = dualfbm(p);\n        vec3 col = (Noise_Ripples1477531959288_166_color / rz) * Noise_Ripples1477531959288_166_brightness;\n        col = ((col - 0.5) * max(contrast, 0.0)) + 0.5;\n        Noise_Ripples1477531959288_166_gl_FragColor = vec4(col, 1.0);\n        return Noise_Ripples1477531959288_166_gl_FragColor *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_FragColor = vec4(0.0);\n        Wiggly_Improved1477532051339_181_gl_FragColor = vec4(clamp(highlightColor * highlightIntensity * light, 0.0, 1.0), 1.0);\n        return Wiggly_Improved1477532051339_181_gl_FragColor *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Transparent_Glow1477532059126_201_fNormal);\n        vec3 eye = normalize(-Transparent_Glow1477532059126_201_fPosition.xyz);\n        float rim = smoothstep(Transparent_Glow1477532059126_201_start, Transparent_Glow1477532059126_201_end, 1.0 - dot(normal, eye));\n        float value = clamp(rim * Transparent_Glow1477532059126_201_alpha, 0.0, 1.0);\n        Transparent_Glow1477532059126_201_gl_FragColor = vec4(Transparent_Glow1477532059126_201_color * value, value);\n        return Transparent_Glow1477532059126_201_gl_FragColor *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Glow_Effect1477532183055_216_fNormal);\n        vec3 eye = normalize(-Glow_Effect1477532183055_216_fPosition.xyz);\n        float rim = smoothstep(Glow_Effect1477532183055_216_start, Glow_Effect1477532183055_216_end, 1.0 - dot(normal, eye));\n        Glow_Effect1477532183055_216_gl_FragColor = vec4(clamp(rim, 0.0, 1.0) * Glow_Effect1477532183055_216_alpha * Glow_Effect1477532183055_216_color, 1.0);\n        return Glow_Effect1477532183055_216_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = (Tiling_Caustic1477531952046_152_main() + Noise_Ripples1477531959288_166_main() + Wiggly_Improved1477532051339_181_main() + Transparent_Glow1477532059126_201_main() + Glow_Effect1477532183055_216_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform float Wiggly_Improved1477532051339_181_speed;\nuniform float frequency;\nuniform float amplitude;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 Tiling_Caustic1477531952046_152_vPosition;\nvarying vec3 Tiling_Caustic1477531952046_152_vNormal;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv2;\nvarying vec3 Noise_Ripples1477531959288_166_vPosition;\nvarying vec3 Noise_Ripples1477531959288_166_vNormal;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv2;\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Wiggly_Improved1477532051339_181_vPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_Position = vec4(0.0);\n        Tiling_Caustic1477531952046_152_vNormal = normal;\n        Tiling_Caustic1477531952046_152_vUv = uv;\n        Tiling_Caustic1477531952046_152_vUv2 = uv2;\n        Tiling_Caustic1477531952046_152_vPosition = position;\n        Tiling_Caustic1477531952046_152_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_Position *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_Position = vec4(0.0);\n        Noise_Ripples1477531959288_166_vNormal = normal;\n        Noise_Ripples1477531959288_166_vUv = uv;\n        Noise_Ripples1477531959288_166_vUv2 = uv2;\n        Noise_Ripples1477531959288_166_vPosition = position;\n        Noise_Ripples1477531959288_166_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Noise_Ripples1477531959288_166_gl_Position *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_Position = vec4(0.0);\n        vec3 offset = normalize(vec3(0.0) - position) * (amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + position.y * frequency));\n        vec3 newPosition = position + vec3(offset.x, 0.0, offset.z);\n        light = amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + 1.0 + position.y * frequency);\n        Wiggly_Improved1477532051339_181_vPosition = newPosition;\n        Wiggly_Improved1477532051339_181_gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n        return Wiggly_Improved1477532051339_181_gl_Position *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_Position = vec4(0.0);\n        Transparent_Glow1477532059126_201_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Transparent_Glow1477532059126_201_fPosition = pos.xyz;\n        Transparent_Glow1477532059126_201_gl_Position = projectionMatrix * pos;\n        return Transparent_Glow1477532059126_201_gl_Position *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_Position = vec4(0.0);\n        Glow_Effect1477532183055_216_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Glow_Effect1477532183055_216_fPosition = pos.xyz;\n        Glow_Effect1477532183055_216_gl_Position = projectionMatrix * pos;\n        return Glow_Effect1477532183055_216_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Tiling_Caustic1477531952046_152_main() + Noise_Ripples1477531959288_166_main() + Wiggly_Improved1477532051339_181_main() + Transparent_Glow1477532059126_201_main() + Glow_Effect1477532183055_216_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},backgroundColor:{value:{r:"0",g:"0",b:"0"},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_resolution:{value:{x:1,y:1},type:"v2",glslType:"vec2"},Tiling_Caustic1477531952046_152_color:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_speed:{value:"0.5",type:"f",glslType:"float"},Tiling_Caustic1477531952046_152_brightness:{value:"1.5",type:"f",glslType:"float"},noiseImage:{value:null,type:"t",glslType:"sampler2D"},distortion:{value:"2",type:"f",glslType:"float"},contrast:{value:"1.5",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_speed:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_color:{value:{r:1,g:.2823529411764706,b:.4823529411764706},type:"c",glslType:"vec3"},Noise_Ripples1477531959288_166_brightness:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_resolution:{value:{x:"2",y:"2"},type:"v2",glslType:"vec2"},amplitude:{value:"2",type:"f",glslType:"float"},frequency:{value:"2",type:"f",glslType:"float"},highlightIntensity:{value:"0.4",type:"f",glslType:"float"},highlightColor:{value:{r:1,g:.5450980392156862,b:.23529411764705882},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_color:{value:{r:0,g:0,b:0},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_speed:{value:"1",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_color:{value:{r:1,g:.5294117647058824,b:.8156862745098039},type:"c",glslType:"vec3"},Transparent_Glow1477532059126_201_start:{value:"0.54674743",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_end:{value:"0.44399246",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_alpha:{value:"0.5",type:"f",glslType:"float"},Glow_Effect1477532183055_216_color:{value:{r:"1",g:"1",b:"1"},type:"c",glslType:"vec3"},Glow_Effect1477532183055_216_start:{value:"0",type:"f",glslType:"float"},Glow_Effect1477532183055_216_end:{value:"1.9",type:"f",glslType:"float"},Glow_Effect1477532183055_216_alpha:{value:"1",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/2901",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},r={id:2894,name:"Green Dance",fragment:"#define PI 3.1415926535897932384626433832795\n\nprecision highp float;\nprecision highp int;\nuniform float time;\nuniform float Flowing_Image_Combination1547651045656_420_speed;\nuniform float Flowing_Image_Combination1547651045656_420_resolution;\nuniform sampler2D image1;\nuniform sampler2D image2;\nuniform vec3 Flowing_Image_Combination1547651045656_420_color;\nuniform vec3 Horizontal_Stripes1547651045669_423_color1;\nuniform vec3 Horizontal_Stripes1547651045669_423_color2;\nuniform float Horizontal_Stripes1547651045669_423_speed;\nuniform float Horizontal_Stripes1547651045669_423_multiplicationFactor;\nuniform vec3 Vertical_2_Color_Graident1547651045681_426_color1;\nuniform vec3 Vertical_2_Color_Graident1547651045681_426_color2;\nuniform float Checkerboard1547651045687_429_multiplicationFactor;\nuniform float Borg_Hull1547651045698_432_speed;\nuniform float Borg_Hull1547651045698_432_resolution;\nuniform vec3 Borg_Hull1547651045698_432_color;\nuniform float brightness;\nuniform float Disco_Dots1547651045724_435_speed;\nuniform vec2 Disco_Dots1547651045724_435_resolution;\nuniform vec3 Disco_Dots1547651045724_435_color;\nvarying vec2 Flowing_Image_Combination1547651045656_420_vUv;\nvarying vec2 Horizontal_Stripes1547651045669_423_vUv;\nvarying vec2 Vertical_2_Color_Graident1547651045681_426_vUv;\nvarying vec2 Checkerboard1547651045687_429_vUv;\nvarying vec3 vPosition;\nvarying vec2 Borg_Hull1547651045698_432_vUv;\nvec2 circuit(vec2 p) \n    {\n        p = fract(p);\n        float r = 5.123;\n        float v = 0.0, g = 0.0;\n        r = fract(r * 9184.928);\n        float cp, d;\n        d = p.x;\n        g += pow(clamp(1.0 - abs(d), 0.0, 1.0), 1000.0);\n        d = p.y;\n        g += pow(clamp(1.0 - abs(d), 0.0, 1.0), 1000.0);\n        d = p.x - 1.0;\n        g += pow(clamp(3.0 - abs(d), 0.0, 1.0), 1000.0);\n        d = p.y - 1.0;\n        g += pow(clamp(1.0 - abs(d), 0.0, 1.0), 10000.0);\n        const int iter = 20;\n        for (int i = 0;\n i < iter; i++) \n        {\n            cp = 0.5 + (r - 0.5) * 0.9;\n            d = p.x - cp;\n            g += pow(clamp(1. - abs(d), 0.0, 1.0), 200.0);\n            if (d > 0.0) \n            {\n                r = fract(r * 4829.013);\n                p.x = (p.x - cp) / (1.0 - cp);\n                v += 1.0;\n            }\n else \n            {\n                r = fract(r * 1239.528);\n                p.x = p.x / cp;\n            }\n            p = p.yx;\n        }\n        v /= float(iter);\n        return vec2(g, v);\n    }\nvarying vec2 Disco_Dots1547651045724_435_vUv;\nfloat rand(vec2 co) \n    {\n        return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n    }\nvec4 Flowing_Image_Combination1547651045656_420_main() \n    {\n        vec4 Flowing_Image_Combination1547651045656_420_gl_FragColor = vec4(0.0);\n        vec2 uv = Flowing_Image_Combination1547651045656_420_vUv.xy * Flowing_Image_Combination1547651045656_420_resolution;\n        vec4 texCol = vec4(texture2D(image1, uv));\n        mat3 tfm;\n        tfm[0] = vec3(texCol.z, 0.0, 0);\n        tfm[1] = vec3(0.0, texCol.y, 0);\n        tfm[2] = vec3(0, 0, 1.0);\n        vec2 muv = (vec3(uv, 1.0) * tfm).xy + time * Flowing_Image_Combination1547651045656_420_speed;\n        texCol = vec4(vec3(texture2D(image2, muv)) * Flowing_Image_Combination1547651045656_420_color, 1.0);\n        Flowing_Image_Combination1547651045656_420_gl_FragColor = texCol;\n        return Flowing_Image_Combination1547651045656_420_gl_FragColor *= 1.0;\n    }\nvec4 Horizontal_Stripes1547651045669_423_main() \n    {\n        vec4 Horizontal_Stripes1547651045669_423_gl_FragColor = vec4(0.0);\n        float x = fract((Horizontal_Stripes1547651045669_423_vUv.y + (time * Horizontal_Stripes1547651045669_423_speed)) * Horizontal_Stripes1547651045669_423_multiplicationFactor);\n        float f = smoothstep(0.40, 0.5, x) - smoothstep(0.90, 1.0, x);\n        Horizontal_Stripes1547651045669_423_gl_FragColor = vec4(mix(Horizontal_Stripes1547651045669_423_color2, Horizontal_Stripes1547651045669_423_color1, f), 1.0);\n        return Horizontal_Stripes1547651045669_423_gl_FragColor *= 0.3;\n    }\nvec4 Vertical_2_Color_Graident1547651045681_426_main(void) \n    {\n        vec4 Vertical_2_Color_Graident1547651045681_426_gl_FragColor = vec4(0.0);\n        vec3 mixCol = mix(Vertical_2_Color_Graident1547651045681_426_color2, Vertical_2_Color_Graident1547651045681_426_color1, Vertical_2_Color_Graident1547651045681_426_vUv.y);\n        Vertical_2_Color_Graident1547651045681_426_gl_FragColor = vec4(mixCol, 1.);\n        return Vertical_2_Color_Graident1547651045681_426_gl_FragColor *= 1.0;\n    }\nvec4 Checkerboard1547651045687_429_main() \n    {\n        vec4 Checkerboard1547651045687_429_gl_FragColor = vec4(0.0);\n        vec2 t = Checkerboard1547651045687_429_vUv * Checkerboard1547651045687_429_multiplicationFactor;\n        vec3 p = vPosition * Checkerboard1547651045687_429_multiplicationFactor;\n        vec3 color;\n        if (mod(floor(t.x) + floor(t.y), 2.0) == 1.0) color = vec3(1.0, 1.0, 1.0);\n else color = vec3(0.0, 0.0, 0.0);\n        Checkerboard1547651045687_429_gl_FragColor = vec4(color, 1.0);\n        return Checkerboard1547651045687_429_gl_FragColor *= -0.5;\n    }\nvec4 Borg_Hull1547651045698_432_main() \n    {\n        vec4 Borg_Hull1547651045698_432_gl_FragColor = vec4(0.0);\n        float scale = 2.0;\n        vec2 uv = (Borg_Hull1547651045698_432_vUv.yx - 0.5) * Borg_Hull1547651045698_432_resolution;\n        uv = uv * scale + vec2(0.0, time * Borg_Hull1547651045698_432_speed);\n        vec2 cid2 = floor(uv);\n        float cid = (cid2.y * 10.0 + cid2.x) * 0.1;\n        vec2 dg = circuit(uv);\n        float d = dg.x;\n        vec3 col1 = (brightness - vec3(max(min(d, 2.0) - 1.0, 0.0) * 2.0 * 0.25)) * Borg_Hull1547651045698_432_color;\n        Borg_Hull1547651045698_432_gl_FragColor = vec4(col1, 1.0);\n        return Borg_Hull1547651045698_432_gl_FragColor *= -0.7;\n    }\nvec4 Disco_Dots1547651045724_435_main(void) \n    {\n        vec4 Disco_Dots1547651045724_435_gl_FragColor = vec4(0.0);\n        vec2 v = Disco_Dots1547651045724_435_vUv.xy * Disco_Dots1547651045724_435_resolution;\n        float brightness = fract(rand(floor(v)) + time * Disco_Dots1547651045724_435_speed);\n        brightness *= 0.5 - length(fract(v) - vec2(0.5, 0.5));\n        Disco_Dots1547651045724_435_gl_FragColor = vec4(2.0 * brightness * Disco_Dots1547651045724_435_color, 1.0);\n        return Disco_Dots1547651045724_435_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = (Flowing_Image_Combination1547651045656_420_main() + Horizontal_Stripes1547651045669_423_main() + Vertical_2_Color_Graident1547651045681_426_main() + Checkerboard1547651045687_429_main() + Borg_Hull1547651045698_432_main() + Disco_Dots1547651045724_435_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec2 Flowing_Image_Combination1547651045656_420_vUv;\nvarying vec2 Horizontal_Stripes1547651045669_423_vUv;\nvarying vec2 Vertical_2_Color_Graident1547651045681_426_vUv;\nvarying vec2 Checkerboard1547651045687_429_vUv;\nvarying vec3 vPosition;\nvarying vec2 Borg_Hull1547651045698_432_vUv;\nvarying vec2 Disco_Dots1547651045724_435_vUv;\nvec4 Flowing_Image_Combination1547651045656_420_main() \n    {\n        vec4 Flowing_Image_Combination1547651045656_420_gl_Position = vec4(0.0);\n        Flowing_Image_Combination1547651045656_420_vUv = uv;\n        Flowing_Image_Combination1547651045656_420_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Flowing_Image_Combination1547651045656_420_gl_Position *= 1.0;\n    }\nvec4 Horizontal_Stripes1547651045669_423_main() \n    {\n        vec4 Horizontal_Stripes1547651045669_423_gl_Position = vec4(0.0);\n        Horizontal_Stripes1547651045669_423_vUv = uv;\n        Horizontal_Stripes1547651045669_423_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Horizontal_Stripes1547651045669_423_gl_Position *= 0.3;\n    }\nvec4 Vertical_2_Color_Graident1547651045681_426_main() \n    {\n        vec4 Vertical_2_Color_Graident1547651045681_426_gl_Position = vec4(0.0);\n        Vertical_2_Color_Graident1547651045681_426_vUv = uv;\n        Vertical_2_Color_Graident1547651045681_426_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Vertical_2_Color_Graident1547651045681_426_gl_Position *= 1.0;\n    }\nvec4 Checkerboard1547651045687_429_main() \n    {\n        vec4 Checkerboard1547651045687_429_gl_Position = vec4(0.0);\n        Checkerboard1547651045687_429_vUv = uv;\n        vPosition = position;\n        Checkerboard1547651045687_429_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Checkerboard1547651045687_429_gl_Position *= -0.5;\n    }\nvec4 Borg_Hull1547651045698_432_main() \n    {\n        vec4 Borg_Hull1547651045698_432_gl_Position = vec4(0.0);\n        Borg_Hull1547651045698_432_vUv = uv;\n        Borg_Hull1547651045698_432_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Borg_Hull1547651045698_432_gl_Position *= -0.7;\n    }\nvec4 Disco_Dots1547651045724_435_main() \n    {\n        vec4 Disco_Dots1547651045724_435_gl_Position = vec4(0.0);\n        Disco_Dots1547651045724_435_vUv = uv;\n        Disco_Dots1547651045724_435_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Disco_Dots1547651045724_435_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Flowing_Image_Combination1547651045656_420_main() + Horizontal_Stripes1547651045669_423_main() + Vertical_2_Color_Graident1547651045681_426_main() + Checkerboard1547651045687_429_main() + Borg_Hull1547651045698_432_main() + Disco_Dots1547651045724_435_main();    }\n",uniforms:{time:{type:"f",glslType:"float"},image1:{value:null,type:"t",glslType:"sampler2D"},image2:{value:null,type:"t",glslType:"sampler2D"},Flowing_Image_Combination1547651045656_420_speed:{value:"0.1",type:"f",glslType:"float"},Flowing_Image_Combination1547651045656_420_resolution:{value:"2",type:"f",glslType:"float"},Flowing_Image_Combination1547651045656_420_color:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},Horizontal_Stripes1547651045669_423_color1:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},Horizontal_Stripes1547651045669_423_color2:{value:{r:0,g:0,b:0},type:"c",glslType:"vec3"},Horizontal_Stripes1547651045669_423_speed:{value:"0",type:"f",glslType:"float"},Horizontal_Stripes1547651045669_423_multiplicationFactor:{value:"6",type:"f",glslType:"float"},Vertical_2_Color_Graident1547651045681_426_color1:{value:{r:0,g:0,b:0},type:"c",glslType:"vec3"},Vertical_2_Color_Graident1547651045681_426_color2:{value:{r:0,g:.9764705882352941,b:0},type:"c",glslType:"vec3"},Checkerboard1547651045687_429_multiplicationFactor:{value:"12",type:"f",glslType:"float"},brightness:{value:"0.25",type:"f",glslType:"float"},Borg_Hull1547651045698_432_speed:{value:"0.001",type:"f",glslType:"float"},Borg_Hull1547651045698_432_resolution:{value:"1",type:"f",glslType:"float"},Borg_Hull1547651045698_432_color:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},Disco_Dots1547651045724_435_speed:{value:"0.01",type:"f",glslType:"float"},Disco_Dots1547651045724_435_resolution:{value:{x:"12",y:"12",z:0},type:"v2",glslType:"vec2"},Disco_Dots1547651045724_435_color:{value:{r:.5254901960784314,g:.9725490196078431,b:.6352941176470588},type:"c",glslType:"vec3"}},url:"http://shaderfrog.com/app/view/2894",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/sirfizx"}},a={id:2987,name:"Cosmic Shader",fragment:"#define TAU 6.28318530718\n#define MAX_ITER 5\n#define tau 6.2831853\n\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform vec2 Tiling_Caustic1477531952046_152_resolution;\nuniform vec3 backgroundColor;\nuniform vec3 Tiling_Caustic1477531952046_152_color;\nuniform float Tiling_Caustic1477531952046_152_speed;\nuniform float Tiling_Caustic1477531952046_152_brightness;\nuniform float time;\nuniform float contrast;\nuniform float distortion;\nuniform float Noise_Ripples1477531959288_166_speed;\nuniform vec3 Noise_Ripples1477531959288_166_color;\nuniform float Noise_Ripples1477531959288_166_brightness;\nuniform sampler2D noiseImage;\nuniform vec2 Noise_Ripples1477531959288_166_resolution;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\nuniform float highlightIntensity;\nuniform vec3 highlightColor;\nuniform vec3 Wiggly_Improved1477532051339_181_color;\nuniform vec3 Transparent_Glow1477532059126_201_color;\nuniform float Transparent_Glow1477532059126_201_start;\nuniform float Transparent_Glow1477532059126_201_end;\nuniform float Transparent_Glow1477532059126_201_alpha;\nuniform vec3 Glow_Effect1477532183055_216_color;\nuniform float Glow_Effect1477532183055_216_start;\nuniform float Glow_Effect1477532183055_216_end;\nuniform float Glow_Effect1477532183055_216_alpha;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nmat2 makem2(in float theta) \n    {\n        float c = cos(theta);\n        float s = sin(theta);\n        return mat2(c, -s, s, c);\n    }\nfloat noise(in vec2 x) \n    {\n        return texture2D(noiseImage, x * .01).x;\n    }\nfloat fbm(in vec2 p) \n    {\n        float z = 2.;\n        float rz = 0.;\n        vec2 bp = p;\n        for (float i = 1.;\n i < 6.0; i++) \n        {\n            rz += abs((noise(p) - 0.5) * 2.0) / z;\n            z = z * 2.;\n            p = p * 2.;\n        }\n        return rz;\n    }\nfloat dualfbm(in vec2 p) \n    {\n        vec2 p2 = p * distortion;\n        vec2 basis = vec2(fbm(p2 - time * Noise_Ripples1477531959288_166_speed * 1.6), fbm(p2 + time * Noise_Ripples1477531959288_166_speed * 1.7));\n        basis = (basis - .5) * .2;\n        p += basis;\n        return fbm(p * makem2(time * Noise_Ripples1477531959288_166_speed * 0.2));\n    }\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_FragColor = vec4(0.0);\n        vec2 uv = Tiling_Caustic1477531952046_152_vUv * Tiling_Caustic1477531952046_152_resolution;\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 1.0;\n        float inten = 0.005;\n        for (int n = 0;\n n < MAX_ITER; n++) \n        {\n            float t = time * Tiling_Caustic1477531952046_152_speed * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, Tiling_Caustic1477531952046_152_brightness);\n        vec3 rgb = vec3(pow(abs(c), 8.0));\n        Tiling_Caustic1477531952046_152_gl_FragColor = vec4(rgb * Tiling_Caustic1477531952046_152_color + backgroundColor, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_FragColor *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_FragColor = vec4(0.0);\n        vec2 p = (Noise_Ripples1477531959288_166_vUv.xy - 0.5) * Noise_Ripples1477531959288_166_resolution;\n        float rz = dualfbm(p);\n        vec3 col = (Noise_Ripples1477531959288_166_color / rz) * Noise_Ripples1477531959288_166_brightness;\n        col = ((col - 0.5) * max(contrast, 0.0)) + 0.5;\n        Noise_Ripples1477531959288_166_gl_FragColor = vec4(col, 1.0);\n        return Noise_Ripples1477531959288_166_gl_FragColor *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_FragColor = vec4(0.0);\n        Wiggly_Improved1477532051339_181_gl_FragColor = vec4(clamp(highlightColor * highlightIntensity * light, 0.0, 1.0), 1.0);\n        return Wiggly_Improved1477532051339_181_gl_FragColor *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Transparent_Glow1477532059126_201_fNormal);\n        vec3 eye = normalize(-Transparent_Glow1477532059126_201_fPosition.xyz);\n        float rim = smoothstep(Transparent_Glow1477532059126_201_start, Transparent_Glow1477532059126_201_end, 1.0 - dot(normal, eye));\n        float value = clamp(rim * Transparent_Glow1477532059126_201_alpha, 0.0, 1.0);\n        Transparent_Glow1477532059126_201_gl_FragColor = vec4(Transparent_Glow1477532059126_201_color * value, value);\n        return Transparent_Glow1477532059126_201_gl_FragColor *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Glow_Effect1477532183055_216_fNormal);\n        vec3 eye = normalize(-Glow_Effect1477532183055_216_fPosition.xyz);\n        float rim = smoothstep(Glow_Effect1477532183055_216_start, Glow_Effect1477532183055_216_end, 1.0 - dot(normal, eye));\n        Glow_Effect1477532183055_216_gl_FragColor = vec4(clamp(rim, 0.0, 1.0) * Glow_Effect1477532183055_216_alpha * Glow_Effect1477532183055_216_color, 1.0);\n        return Glow_Effect1477532183055_216_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = (Glow_Effect1477532183055_216_main() + Noise_Ripples1477531959288_166_main() + Tiling_Caustic1477531952046_152_main() + Wiggly_Improved1477532051339_181_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform float Wiggly_Improved1477532051339_181_speed;\nuniform float frequency;\nuniform float amplitude;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 Tiling_Caustic1477531952046_152_vPosition;\nvarying vec3 Tiling_Caustic1477531952046_152_vNormal;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv2;\nvarying vec3 Noise_Ripples1477531959288_166_vPosition;\nvarying vec3 Noise_Ripples1477531959288_166_vNormal;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv2;\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Wiggly_Improved1477532051339_181_vPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_Position = vec4(0.0);\n        Tiling_Caustic1477531952046_152_vNormal = normal;\n        Tiling_Caustic1477531952046_152_vUv = uv;\n        Tiling_Caustic1477531952046_152_vUv2 = uv2;\n        Tiling_Caustic1477531952046_152_vPosition = position;\n        Tiling_Caustic1477531952046_152_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_Position *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_Position = vec4(0.0);\n        Noise_Ripples1477531959288_166_vNormal = normal;\n        Noise_Ripples1477531959288_166_vUv = uv;\n        Noise_Ripples1477531959288_166_vUv2 = uv2;\n        Noise_Ripples1477531959288_166_vPosition = position;\n        Noise_Ripples1477531959288_166_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Noise_Ripples1477531959288_166_gl_Position *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_Position = vec4(0.0);\n        vec3 offset = normalize(vec3(0.0) - position) * (amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + position.y * frequency));\n        vec3 newPosition = position + vec3(offset.x, 0.0, offset.z);\n        light = amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + 1.0 + position.y * frequency);\n        Wiggly_Improved1477532051339_181_vPosition = newPosition;\n        Wiggly_Improved1477532051339_181_gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n        return Wiggly_Improved1477532051339_181_gl_Position *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_Position = vec4(0.0);\n        Transparent_Glow1477532059126_201_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Transparent_Glow1477532059126_201_fPosition = pos.xyz;\n        Transparent_Glow1477532059126_201_gl_Position = projectionMatrix * pos;\n        return Transparent_Glow1477532059126_201_gl_Position *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_Position = vec4(0.0);\n        Glow_Effect1477532183055_216_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Glow_Effect1477532183055_216_fPosition = pos.xyz;\n        Glow_Effect1477532183055_216_gl_Position = projectionMatrix * pos;\n        return Glow_Effect1477532183055_216_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Tiling_Caustic1477531952046_152_main() + Noise_Ripples1477531959288_166_main() + Wiggly_Improved1477532051339_181_main() + Transparent_Glow1477532059126_201_main() + Glow_Effect1477532183055_216_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},backgroundColor:{value:{r:.08235294117647059,g:.06274509803921569,b:.19607843137254902},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_resolution:{value:{x:1,y:1},type:"v2",glslType:"vec2"},Tiling_Caustic1477531952046_152_color:{value:{r:.4666666666666667,g:.9294117647058824,b:.9529411764705882},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_speed:{value:"0.5",type:"f",glslType:"float"},Tiling_Caustic1477531952046_152_brightness:{value:"1.5",type:"f",glslType:"float"},noiseImage:{value:null,type:"t",glslType:"sampler2D"},distortion:{value:"1",type:"f",glslType:"float"},contrast:{value:"1.4",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_speed:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_color:{value:{r:.6823529411764706,g:.7725490196078432,b:.6666666666666666},type:"c",glslType:"vec3"},Noise_Ripples1477531959288_166_brightness:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_resolution:{value:{x:"2",y:"2"},type:"v2",glslType:"vec2"},amplitude:{value:"0.2",type:"f",glslType:"float"},frequency:{value:"2",type:"f",glslType:"float"},highlightIntensity:{value:".5",type:"f",glslType:"float"},highlightColor:{value:{r:.8274509803921568,g:.5882352941176471,b:.2627450980392157},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_color:{value:{r:0,g:0,b:0},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_speed:{value:"1",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_color:{value:{r:.9803921568627451,g:.9215686274509803,b:.596078431372549},type:"c",glslType:"vec3"},Transparent_Glow1477532059126_201_start:{value:"0.54674743",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_end:{value:"0.44399246",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_alpha:{value:"0.5",type:"f",glslType:"float"},Glow_Effect1477532183055_216_color:{value:{r:.9921568627450981,g:.7254901960784313,b:.3411764705882353},type:"c",glslType:"vec3"},Glow_Effect1477532183055_216_start:{value:"0",type:"f",glslType:"float"},Glow_Effect1477532183055_216_end:{value:"1.9",type:"f",glslType:"float"},Glow_Effect1477532183055_216_alpha:{value:"2",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/2987",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},s={id:138,name:"Cool Tiles Shader",fragment:"precision highp float;\nprecision highp int;\nuniform float time;\nuniform float Flowing_Image_Combination1532324436254_38_speed;\nuniform float resolution;\nuniform sampler2D image1;\nuniform sampler2D image2;\nuniform vec3 Flowing_Image_Combination1532324436254_38_color;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform vec3 lightPosition;\nuniform sampler2D map;\nuniform vec3 diffuseColor;\nuniform vec3 specularColor;\nuniform float shininess;\nuniform vec2 scaleBias;\nuniform float scale;\nuniform float Disco_Ball1532324436329_44_speed;\nuniform vec3 Vignette1532324436351_47_color;\nuniform float intensity;\nuniform float spread;\nuniform float mirrorReflection;\nuniform samplerCube reflectionSampler;\nvarying vec2 Flowing_Image_Combination1532324436254_38_vUv;\nvarying vec3 vPosition;\nvarying vec3 Parallax_Mapping1532324436298_41_vNormal;\nvarying vec2 Parallax_Mapping1532324436298_41_vUv;\nvarying vec2 vUv2;\nvarying vec3 tsPosition;\nvarying vec3 tsCameraPosition;\nvarying vec3 tsLightSource;\nvarying vec3 Disco_Ball1532324436329_44_vNormal;\nvarying vec2 Disco_Ball1532324436329_44_vUv;\nfloat rand(in vec2 p) \n    {\n        return abs(fract(sin(p.x * 95325.328 + p.y * -48674.077) + cos(p.x * -46738.322 + p.y * 76485.077) + time * Disco_Ball1532324436329_44_speed) - .5) + .5;\n    }\nvarying vec2 Vignette1532324436351_47_vUv;\nvarying vec3 vReflect;\nvec4 Flowing_Image_Combination1532324436254_38_main() \n    {\n        vec4 Flowing_Image_Combination1532324436254_38_gl_FragColor = vec4(0.0);\n        vec2 uv = Flowing_Image_Combination1532324436254_38_vUv.xy * resolution;\n        vec4 texCol = vec4(texture2D(image1, uv));\n        mat3 tfm;\n        tfm[0] = vec3(texCol.z, 0.0, 0);\n        tfm[1] = vec3(0.0, texCol.y, 0);\n        tfm[2] = vec3(0, 0, 1.0);\n        vec2 muv = (vec3(uv, 1.0) * tfm).xy + time * Flowing_Image_Combination1532324436254_38_speed;\n        texCol = vec4(vec3(texture2D(image2, muv)) * Flowing_Image_Combination1532324436254_38_color, 1.0);\n        Flowing_Image_Combination1532324436254_38_gl_FragColor = texCol;\n        return Flowing_Image_Combination1532324436254_38_gl_FragColor *= 0.6;\n    }\nvec4 Parallax_Mapping1532324436298_41_main() \n    {\n        vec4 Parallax_Mapping1532324436298_41_gl_FragColor = vec4(0.0);\n        float height = texture2D(map, Parallax_Mapping1532324436298_41_vUv).a;\n        float v = height * scaleBias.r - scaleBias.g;\n        vec3 eye = normalize(tsCameraPosition);\n        vec2 newCoords = Parallax_Mapping1532324436298_41_vUv + (eye.xy * v);\n        vec3 color = vec3(0.0);\n        vec3 normal = texture2D(map, newCoords).rgb * 2.0 - 1.0;\n        vec3 viewVector = normalize(tsCameraPosition - tsPosition);\n        vec3 lightVector = normalize(tsLightSource - tsPosition);\n        float nxDir = max(0.0, dot(normal, lightVector));\n        float specularPower = 0.0;\n        if (nxDir != 0.0) \n        {\n            vec3 halfVector = normalize(lightVector + viewVector);\n            float nxHalf = max(0.0, dot(normal, halfVector));\n            specularPower = pow(nxHalf, shininess);\n        }\n         vec3 specular = specularColor * specularPower;\n        Parallax_Mapping1532324436298_41_gl_FragColor = vec4((diffuseColor * nxDir) + specular, 1.0);\n        return Parallax_Mapping1532324436298_41_gl_FragColor *= 0.9;\n    }\nvec4 Disco_Ball1532324436329_44_main(void) \n    {\n        vec4 Disco_Ball1532324436329_44_gl_FragColor = vec4(0.0);\n        vec2 position = (Disco_Ball1532324436329_44_vUv.xy) * scale;\n        vec3 color = vec3(rand(vec2(floor(position.x), floor(position.y))), rand(vec2(floor(position.x), floor(position.x))), rand(vec2(floor(position.x * .5), floor(position.y * .5))));\n        float scale = 1. - pow(pow((mod(position.x, 1.) - .5), 2.) + pow((mod(position.y, 1.) - .5), 2.), .7);\n        Disco_Ball1532324436329_44_gl_FragColor = vec4(color * scale, 1.);\n        return Disco_Ball1532324436329_44_gl_FragColor *= 0.1;\n    }\nvec4 Vignette1532324436351_47_main() \n    {\n        vec4 Vignette1532324436351_47_gl_FragColor = vec4(0.0);\n        float vignette = Vignette1532324436351_47_vUv.y * Vignette1532324436351_47_vUv.x * (1. - Vignette1532324436351_47_vUv.x) * (1. - Vignette1532324436351_47_vUv.y) * spread;\n        vec3 multiplier = 1.0 - (vignette * Vignette1532324436351_47_color * intensity);\n        Vignette1532324436351_47_gl_FragColor = vec4(clamp(Vignette1532324436351_47_color * multiplier, 0.0, 1.0), multiplier);\n        return Vignette1532324436351_47_gl_FragColor *= 0.2;\n    }\nvec4 Reflection_Cube_Map1532324436362_50_main() \n    {\n        vec4 Reflection_Cube_Map1532324436362_50_gl_FragColor = vec4(0.0);\n        vec4 cubeColor = textureCube(reflectionSampler, vec3(mirrorReflection * vReflect.x, vReflect.yz));\n        cubeColor.w = 1.0;\n        Reflection_Cube_Map1532324436362_50_gl_FragColor = cubeColor;\n        return Reflection_Cube_Map1532324436362_50_gl_FragColor *= 0.3;\n    }\nvoid main() \n    {\n        gl_FragColor = (Flowing_Image_Combination1532324436254_38_main() + Parallax_Mapping1532324436298_41_main() + Disco_Ball1532324436329_44_main() + Vignette1532324436351_47_main() + Reflection_Cube_Map1532324436362_50_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 lightPosition;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec2 Flowing_Image_Combination1532324436254_38_vUv;\nattribute vec4 tangent;\nvarying vec3 vPosition;\nvarying vec3 Parallax_Mapping1532324436298_41_vNormal;\nvarying vec2 Parallax_Mapping1532324436298_41_vUv;\nvarying vec2 vUv2;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 tsPosition;\nvarying vec3 tsCameraPosition;\nvarying vec3 tsLightSource;\nvarying vec2 Disco_Ball1532324436329_44_vUv;\nvarying vec3 Disco_Ball1532324436329_44_vNormal;\nvarying vec2 Vignette1532324436351_47_vUv;\nvarying vec3 vReflect;\nvec4 Flowing_Image_Combination1532324436254_38_main() \n    {\n        vec4 Flowing_Image_Combination1532324436254_38_gl_Position = vec4(0.0);\n        Flowing_Image_Combination1532324436254_38_vUv = uv;\n        Flowing_Image_Combination1532324436254_38_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Flowing_Image_Combination1532324436254_38_gl_Position *= 0.6;\n    }\nvec4 Parallax_Mapping1532324436298_41_main(void) \n    {\n        vec4 Parallax_Mapping1532324436298_41_gl_Position = vec4(0.0);\n        Parallax_Mapping1532324436298_41_vUv = uv;\n        vPosition = position;\n        Parallax_Mapping1532324436298_41_vNormal = normalize(normal);\n        vTangent = normalize(tangent.xyz);\n        vBinormal = normalize(cross(Parallax_Mapping1532324436298_41_vNormal, vTangent) * tangent.w);\n        mat3 TBNMatrix = mat3(vTangent, vBinormal, Parallax_Mapping1532324436298_41_vNormal);\n        tsPosition = position * TBNMatrix;\n        tsCameraPosition = cameraPosition * TBNMatrix;\n        tsLightSource = lightPosition * TBNMatrix;\n        Parallax_Mapping1532324436298_41_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Parallax_Mapping1532324436298_41_gl_Position *= 0.9;\n    }\nvec4 Disco_Ball1532324436329_44_main() \n    {\n        vec4 Disco_Ball1532324436329_44_gl_Position = vec4(0.0);\n        Disco_Ball1532324436329_44_vNormal = normal;\n        Disco_Ball1532324436329_44_vUv = uv;\n        Disco_Ball1532324436329_44_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Disco_Ball1532324436329_44_gl_Position *= 0.1;\n    }\nvec4 Vignette1532324436351_47_main() \n    {\n        vec4 Vignette1532324436351_47_gl_Position = vec4(0.0);\n        Vignette1532324436351_47_vUv = uv;\n        Vignette1532324436351_47_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Vignette1532324436351_47_gl_Position *= 0.2;\n    }\nvec4 Reflection_Cube_Map1532324436362_50_main() \n    {\n        vec4 Reflection_Cube_Map1532324436362_50_gl_Position = vec4(0.0);\n        vec3 worldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n        vec3 cameraToVertex = normalize(worldPosition - cameraPosition);\n        vec3 worldNormal = normalize(mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz) * normal);\n        vReflect = reflect(cameraToVertex, worldNormal);\n        Reflection_Cube_Map1532324436362_50_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Reflection_Cube_Map1532324436362_50_gl_Position *= 0.3;\n    }\nvoid main() \n    {\n        gl_Position = Flowing_Image_Combination1532324436254_38_main() + Parallax_Mapping1532324436298_41_main() + Disco_Ball1532324436329_44_main() + Vignette1532324436351_47_main() + Reflection_Cube_Map1532324436362_50_main();    }\n",uniforms:{resolution:{value:"1",type:"f",glslType:"float"},image1:{value:null,type:"t",glslType:"sampler2D"},image2:{value:null,type:"t",glslType:"sampler2D"},time:{type:"f",glslType:"float"},Flowing_Image_Combination1532324436254_38_speed:{value:"0.05",type:"f",glslType:"float"},Flowing_Image_Combination1532324436254_38_color:{value:{r:1,g:"1",b:"1"},type:"c",glslType:"vec3"},map:{value:null,type:"t",glslType:"sampler2D"},diffuseColor:{value:{r:.2235294117647059,g:.2235294117647059,b:.2235294117647059},type:"c",glslType:"vec3"},specularColor:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},shininess:{value:"10",type:"f",glslType:"float"},scaleBias:{value:{x:"0.04",y:"0.001",z:0},type:"v2",glslType:"vec2"},Parallax_Mapping1532324436298_41_lightPosition:{value:{x:-.04058137118438604,y:.3281411389717793,z:2.4780388506290807},type:"v3",glslType:"vec3"},scale:{value:"4",type:"f",glslType:"float"},Disco_Ball1532324436329_44_speed:{value:"1",type:"f",glslType:"float"},intensity:{value:"0.5",type:"f",glslType:"float"},spread:{value:"100",type:"f",glslType:"float"},Vignette1532324436351_47_color:{value:{r:.8980392156862745,g:.9607843137254902,b:.9921568627450981},type:"c",glslType:"vec3"},mirrorReflection:{value:"1",type:"f",glslType:"float"},reflectionSampler:{value:null,type:"t",glslType:"samplerCube"}},url:"http://shaderfrog.com/app/view/138",user:{username:"andrewray",url:"http://shaderfrog.com/app/profile/andrewray"}},l={id:3033,name:"Disco Shader",fragment:"precision highp float;\nprecision highp int;\nuniform float time;\nuniform float scale;\nuniform float speed;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nfloat rand(in vec2 p) \n    {\n        return abs(fract(sin(p.x * 95325.328 + p.y * -48674.077) + cos(p.x * -46738.322 + p.y * 76485.077) + time * speed) - .5) + .5;\n    }\nvec4 Disco_Ball1551665981578_213_main(void) \n    {\n        vec4 Disco_Ball1551665981578_213_gl_FragColor = vec4(0.0);\n        vec2 position = (vUv.xy) * scale;\n        vec3 color = vec3(rand(vec2(floor(position.x), floor(position.y))), rand(vec2(floor(position.x), floor(position.x))), rand(vec2(floor(position.x * .5), floor(position.y * .5))));\n        float scale = 1. - pow(pow((mod(position.x, 1.) - .5), 2.) + pow((mod(position.y, 1.) - .5), 2.), .7);\n        Disco_Ball1551665981578_213_gl_FragColor = vec4(color * scale, 1.);\n        return Disco_Ball1551665981578_213_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Disco_Ball1551665981578_213_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvec4 Disco_Ball1551665981578_213_main() \n    {\n        vec4 Disco_Ball1551665981578_213_gl_Position = vec4(0.0);\n        vNormal = normal;\n        vUv = uv;\n        Disco_Ball1551665981578_213_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Disco_Ball1551665981578_213_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Disco_Ball1551665981578_213_main();    }\n",uniforms:{time:{type:"f",glslType:"float"},scale:{value:"30",type:"f",glslType:"float"},speed:{value:"1",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3033",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},c={id:3053,name:"Marching Ants Shader",fragment:"precision highp float;\nprecision highp int;\nuniform float edgeWidth;\nuniform float sharpness;\nuniform float antSize;\nuniform float antSpeed;\nuniform float time;\nuniform vec3 color;\nvarying vec2 vUv;\nvec4 Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_main() \n    {\n        vec4 Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_FragColor = vec4(0.0);\n        vec2 borderUv = abs((vUv - 0.5) * 2.0);\n        float leftRight = clamp((borderUv.x - (1.0 - edgeWidth)) * sharpness, 0.0, 1.0);\n        float upDown = clamp((borderUv.y - (1.0 - edgeWidth)) * sharpness, 0.0, 1.0);\n        vec2 antUv = vUv * antSize;\n        float antOffset = time * antSpeed;\n        if (mod(floor(antUv.x + antOffset), 2.0) != 1.0) \n        {\n            upDown = 0.0;\n        }\n         if (mod(floor(antUv.y + antOffset), 2.0) != 1.0) \n        {\n            leftRight = 0.0;\n        }\n         float alpha = clamp(leftRight + upDown, 0.0, 1.0);\n        Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_FragColor = vec4(color * alpha, alpha);\n        return Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec2 vUv;\nvec4 Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_main() \n    {\n        vec4 Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_Position = vec4(0.0);\n        vUv = uv;\n        Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Marching_Ants_UV_Based_Border_Edge_Outline1551694606526_1465_main();    }\n",uniforms:{color:{value:{r:"1",g:"1",b:"1"},type:"c",glslType:"vec3"},edgeWidth:{value:"0.1",type:"f",glslType:"float"},sharpness:{value:"100",type:"f",glslType:"float"},antSize:{value:"10",type:"f",glslType:"float"},antSpeed:{value:"1",type:"f",glslType:"float"},time:{type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3053",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},u={id:3060,name:"Goo Shader",fragment:"precision highp float;\nprecision highp int;\nuniform vec3 color;\nuniform float time;\nuniform float Configurable_Oil_Spill1525321525720_28_speed;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\nuniform vec3 color4;\nvarying float vNoise;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nfloat rand(vec2 n) \n    {\n        return fract(cos(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n    }\nfloat noise(vec2 n) \n    {\n        const vec2 d = vec2(0.0, 1.0);\n        vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n        return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n    }\nfloat fbm(vec2 n) \n    {\n        float total = 0.0, amplitude = 1.0;\n        for (int i = 0;\n i < 7; i++) \n        {\n            total += noise(n) * amplitude;\n            n += n;\n            amplitude *= 0.5;\n        }\n        return total;\n    }\nvec4 Big_Wiggles1525321525655_25_main() \n    {\n        vec4 Big_Wiggles1525321525655_25_gl_FragColor = vec4(0.0);\n        Big_Wiggles1525321525655_25_gl_FragColor = vec4(color * vNoise, 1.0);\n        return Big_Wiggles1525321525655_25_gl_FragColor *= 1.0;\n    }\nvec4 Configurable_Oil_Spill1525321525720_28_main() \n    {\n        vec4 Configurable_Oil_Spill1525321525720_28_gl_FragColor = vec4(0.0);\n        const vec3 c5 = vec3(0.1);\n        const vec3 c6 = vec3(0.9);\n        vec2 p = vUv.xy * 8.0;\n        float timed = time * Configurable_Oil_Spill1525321525720_28_speed;\n        float q = fbm(p - timed * 0.1);\n        vec2 r = vec2(fbm(p + q + timed * 0.7 - p.x - p.y), fbm(p + q - timed * 0.4));\n        vec3 c = mix(color1, color2, fbm(p + r)) + mix(color3, color4, r.x) - mix(c5, c6, r.y);\n        Configurable_Oil_Spill1525321525720_28_gl_FragColor = vec4(c * cos(1.57 * vUv.y), 1.0);\n        return Configurable_Oil_Spill1525321525720_28_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = (Big_Wiggles1525321525655_25_main() + Configurable_Oil_Spill1525321525720_28_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform float scale;\nuniform float displacement;\nuniform float time;\nuniform float Big_Wiggles1525321525655_25_speed;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying float vNoise;\nvec3 mod289(vec3 x) \n    {\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\nvec4 mod289(vec4 x) \n    {\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\nvec4 permute(vec4 x) \n    {\n        return mod289(((x * 34.0) + 1.0) * x);\n    }\nvec4 taylorInvSqrt(vec4 r) \n    {\n        return 1.79284291400159 - 0.85373472095314 * r;\n    }\nvec3 fade(vec3 t) \n    {\n        return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n    }\nfloat cnoise(vec3 P) \n    {\n        vec3 Pi0 = floor(P);\n        vec3 Pi1 = Pi0 + vec3(1.0);\n        Pi0 = mod289(Pi0);\n        Pi1 = mod289(Pi1);\n        vec3 Pf0 = fract(P);\n        vec3 Pf1 = Pf0 - vec3(1.0);\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n        vec4 gx0 = ixy0 * (1.0 / 7.0);\n        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n        vec4 gx1 = ixy1 * (1.0 / 7.0);\n        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n        vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n        vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n        vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n        vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n        vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n        vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n        vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n        vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n    }\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvec4 Big_Wiggles1525321525655_25_main() \n    {\n        vec4 Big_Wiggles1525321525655_25_gl_Position = vec4(0.0);\n        vNoise = cnoise(normalize(position) * scale + (time * Big_Wiggles1525321525655_25_speed));\n        vec3 pos = position + normal * vNoise * vec3(displacement);\n        Big_Wiggles1525321525655_25_gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n        return Big_Wiggles1525321525655_25_gl_Position *= 1.0;\n    }\nvec4 Configurable_Oil_Spill1525321525720_28_main() \n    {\n        vec4 Configurable_Oil_Spill1525321525720_28_gl_Position = vec4(0.0);\n        vUv = uv;\n        vPosition = position;\n        vNormal = normal;\n        Configurable_Oil_Spill1525321525720_28_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Configurable_Oil_Spill1525321525720_28_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Big_Wiggles1525321525655_25_main() + Configurable_Oil_Spill1525321525720_28_main();    }\n",uniforms:{scale:{value:".8",type:"f",glslType:"float"},displacement:{value:".5",type:"f",glslType:"float"},time:{type:"f",glslType:"float"},Big_Wiggles1525321525655_25_speed:{value:".3",type:"f",glslType:"float"},color:{value:{r:".3",g:0,b:0},type:"c",glslType:"vec3"},color1:{value:{r:".4",g:".1",b:".2"},type:"c",glslType:"vec3"},color2:{value:{r:".5",g:"1",b:".5"},type:"c",glslType:"vec3"},color3:{value:{r:".2",g:".9",b:0},type:"c",glslType:"vec3"},color4:{value:{r:"1.1",g:"1.1",b:"2"},type:"c",glslType:"vec3"},Configurable_Oil_Spill1525321525720_28_speed:{value:".4",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3060",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},d={id:3055,name:"Psycho Shader",fragment:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform vec2 Randomise_Fractal;\nuniform float NUM_SIDES;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nconst float PI = 3.14159265359;\nfloat KA = PI / NUM_SIDES;\nvoid koleidoscope(inout vec2 uv) \n    {\n        float angle = atan(uv.y, uv.x);\n        angle = mod(angle, 2.0 * KA);\n        angle = abs(angle - KA);\n        angle += 0.1 * time;\n        float d = length(uv);\n        uv = d * vec2(cos(angle), sin(angle));\n    }\nvoid smallKoleidoscope(inout vec2 uv) \n    {\n        float angle = abs(mod(atan(uv.y, uv.x), 2.0 * KA) - KA) + 0.1 * time;\n        uv = length(uv) * vec2(cos(angle), sin(angle));\n    }\nvec4 Kaleidoscope_Fractal_Shader1551694817060_1634_main() \n    {\n        vec4 Kaleidoscope_Fractal_Shader1551694817060_1634_gl_FragColor = vec4(0.0);\n        vec2 uv = 12.0 * (2.0 * vUv.xy - 1.0);\n        smallKoleidoscope(uv);\n        vec3 p = vec3(uv, Randomise_Fractal.x);\n        for (int i = 0;\n i < 44; i++) p.xzy = vec3(1.3, 0.999, 0.678) * abs((abs(p) / dot(p, p) - vec3(1.0, 1.02, Randomise_Fractal.y * 0.4)));\n        Kaleidoscope_Fractal_Shader1551694817060_1634_gl_FragColor = vec4(p, 1.0);\n        return Kaleidoscope_Fractal_Shader1551694817060_1634_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Kaleidoscope_Fractal_Shader1551694817060_1634_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvec4 Kaleidoscope_Fractal_Shader1551694817060_1634_main() \n    {\n        vec4 Kaleidoscope_Fractal_Shader1551694817060_1634_gl_Position = vec4(0.0);\n        vNormal = normal;\n        vUv = uv;\n        vUv2 = uv2;\n        vPosition = position;\n        Kaleidoscope_Fractal_Shader1551694817060_1634_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Kaleidoscope_Fractal_Shader1551694817060_1634_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Kaleidoscope_Fractal_Shader1551694817060_1634_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},Randomise_Fractal:{value:{x:.5076923076923077,y:.7076923076923077},type:"v2",glslType:"vec2"},NUM_SIDES:{value:"12",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3055",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},p={id:3301,name:"Ova Shader",fragment:"precision highp float;\nprecision highp int;\nuniform float time;\nuniform vec3 color1;\nuniform vec3 color2;\nvarying vec3 vPosition;\nvarying float vJitter;\nvec3 permute(vec3 x) \n    {\n        return mod((34.0 * x + 1.0) * x, 289.0);\n    }\nvec3 dist(vec3 x, vec3 y, vec3 z) \n    {\n        return x * x + y * y + z * z;\n    }\nvec2 worley(vec3 P, float jitter) \n    {\n        float K = 0.142857142857;\n        float Ko = 0.428571428571;\n        float K2 = 0.020408163265306;\n        float Kz = 0.166666666667;\n        float Kzo = 0.416666666667;\n        vec3 Pi = mod(floor(P), 289.0);\n        vec3 Pf = fract(P) - 0.5;\n        vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);\n        vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);\n        vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);\n        vec3 p = permute(Pi.x + vec3(-1.0, 0.0, 1.0));\n        vec3 p1 = permute(p + Pi.y - 1.0);\n        vec3 p2 = permute(p + Pi.y);\n        vec3 p3 = permute(p + Pi.y + 1.0);\n        vec3 p11 = permute(p1 + Pi.z - 1.0);\n        vec3 p12 = permute(p1 + Pi.z);\n        vec3 p13 = permute(p1 + Pi.z + 1.0);\n        vec3 p21 = permute(p2 + Pi.z - 1.0);\n        vec3 p22 = permute(p2 + Pi.z);\n        vec3 p23 = permute(p2 + Pi.z + 1.0);\n        vec3 p31 = permute(p3 + Pi.z - 1.0);\n        vec3 p32 = permute(p3 + Pi.z);\n        vec3 p33 = permute(p3 + Pi.z + 1.0);\n        vec3 ox11 = fract(p11 * K) - Ko;\n        vec3 oy11 = mod(floor(p11 * K), 7.0) * K - Ko;\n        vec3 oz11 = floor(p11 * K2) * Kz - Kzo;\n        vec3 ox12 = fract(p12 * K) - Ko;\n        vec3 oy12 = mod(floor(p12 * K), 7.0) * K - Ko;\n        vec3 oz12 = floor(p12 * K2) * Kz - Kzo;\n        vec3 ox13 = fract(p13 * K) - Ko;\n        vec3 oy13 = mod(floor(p13 * K), 7.0) * K - Ko;\n        vec3 oz13 = floor(p13 * K2) * Kz - Kzo;\n        vec3 ox21 = fract(p21 * K) - Ko;\n        vec3 oy21 = mod(floor(p21 * K), 7.0) * K - Ko;\n        vec3 oz21 = floor(p21 * K2) * Kz - Kzo;\n        vec3 ox22 = fract(p22 * K) - Ko;\n        vec3 oy22 = mod(floor(p22 * K), 7.0) * K - Ko;\n        vec3 oz22 = floor(p22 * K2) * Kz - Kzo;\n        vec3 ox23 = fract(p23 * K) - Ko;\n        vec3 oy23 = mod(floor(p23 * K), 7.0) * K - Ko;\n        vec3 oz23 = floor(p23 * K2) * Kz - Kzo;\n        vec3 ox31 = fract(p31 * K) - Ko;\n        vec3 oy31 = mod(floor(p31 * K), 7.0) * K - Ko;\n        vec3 oz31 = floor(p31 * K2) * Kz - Kzo;\n        vec3 ox32 = fract(p32 * K) - Ko;\n        vec3 oy32 = mod(floor(p32 * K), 7.0) * K - Ko;\n        vec3 oz32 = floor(p32 * K2) * Kz - Kzo;\n        vec3 ox33 = fract(p33 * K) - Ko;\n        vec3 oy33 = mod(floor(p33 * K), 7.0) * K - Ko;\n        vec3 oz33 = floor(p33 * K2) * Kz - Kzo;\n        vec3 dx11 = Pfx + jitter * ox11;\n        vec3 dy11 = Pfy.x + jitter * oy11;\n        vec3 dz11 = Pfz.x + jitter * oz11;\n        vec3 dx12 = Pfx + jitter * ox12;\n        vec3 dy12 = Pfy.x + jitter * oy12;\n        vec3 dz12 = Pfz.y + jitter * oz12;\n        vec3 dx13 = Pfx + jitter * ox13;\n        vec3 dy13 = Pfy.x + jitter * oy13;\n        vec3 dz13 = Pfz.z + jitter * oz13;\n        vec3 dx21 = Pfx + jitter * ox21;\n        vec3 dy21 = Pfy.y + jitter * oy21;\n        vec3 dz21 = Pfz.x + jitter * oz21;\n        vec3 dx22 = Pfx + jitter * ox22;\n        vec3 dy22 = Pfy.y + jitter * oy22;\n        vec3 dz22 = Pfz.y + jitter * oz22;\n        vec3 dx23 = Pfx + jitter * ox23;\n        vec3 dy23 = Pfy.y + jitter * oy23;\n        vec3 dz23 = Pfz.z + jitter * oz23;\n        vec3 dx31 = Pfx + jitter * ox31;\n        vec3 dy31 = Pfy.z + jitter * oy31;\n        vec3 dz31 = Pfz.x + jitter * oz31;\n        vec3 dx32 = Pfx + jitter * ox32;\n        vec3 dy32 = Pfy.z + jitter * oy32;\n        vec3 dz32 = Pfz.y + jitter * oz32;\n        vec3 dx33 = Pfx + jitter * ox33;\n        vec3 dy33 = Pfy.z + jitter * oy33;\n        vec3 dz33 = Pfz.z + jitter * oz33;\n        vec3 d11 = dist(dx11, dy11, dz11);\n        vec3 d12 = dist(dx12, dy12, dz12);\n        vec3 d13 = dist(dx13, dy13, dz13);\n        vec3 d21 = dist(dx21, dy21, dz21);\n        vec3 d22 = dist(dx22, dy22, dz22);\n        vec3 d23 = dist(dx23, dy23, dz23);\n        vec3 d31 = dist(dx31, dy31, dz31);\n        vec3 d32 = dist(dx32, dy32, dz32);\n        vec3 d33 = dist(dx33, dy33, dz33);\n        vec3 d1a = min(d11, d12);\n        d12 = max(d11, d12);\n        d11 = min(d1a, d13);\n        d13 = max(d1a, d13);\n        d12 = min(d12, d13);\n        vec3 d2a = min(d21, d22);\n        d22 = max(d21, d22);\n        d21 = min(d2a, d23);\n        d23 = max(d2a, d23);\n        d22 = min(d22, d23);\n        vec3 d3a = min(d31, d32);\n        d32 = max(d31, d32);\n        d31 = min(d3a, d33);\n        d33 = max(d3a, d33);\n        d32 = min(d32, d33);\n        vec3 da = min(d11, d21);\n        d21 = max(d11, d21);\n        d11 = min(da, d31);\n        d31 = max(da, d31);\n        d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;\n        d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx;\n        d12 = min(d12, d21);\n        d12 = min(d12, d22);\n        d12 = min(d12, d31);\n        d12 = min(d12, d32);\n        d11.yz = min(d11.yz, d12.xy);\n        d11.y = min(d11.y, d12.z);\n        d11.y = min(d11.y, d11.z);\n        return sqrt(d11.xy);\n    }\nvec4 Ruby_Mine1553790481262_158_main() \n    {\n        vec4 Ruby_Mine1553790481262_158_gl_FragColor = vec4(0.0);\n        vec2 worl = worley(vPosition, vJitter);\n        float world = worl.y - worl.x;\n        vec3 color = mix(color1, color2, clamp(world * 2.0, 0.0, 1.0));\n        Ruby_Mine1553790481262_158_gl_FragColor = vec4((color * 0.1) + (color * world), 1.0);\n        return Ruby_Mine1553790481262_158_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Ruby_Mine1553790481262_158_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform float time;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nvarying vec3 vPosition;\nvarying float vJitter;\nvec3 permute(vec3 x) \n    {\n        return mod((34.0 * x + 1.0) * x, 289.0);\n    }\nvec3 dist(vec3 x, vec3 y, vec3 z) \n    {\n        return x * x + y * y + z * z;\n    }\nvec2 worley(vec3 P, float jitter) \n    {\n        float K = 0.142857142857;\n        float Ko = 0.428571428571;\n        float K2 = 0.020408163265306;\n        float Kz = 0.166666666667;\n        float Kzo = 0.416666666667;\n        vec3 Pi = mod(floor(P), 289.0);\n        vec3 Pf = fract(P) - 0.5;\n        vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);\n        vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);\n        vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);\n        vec3 p = permute(Pi.x + vec3(-1.0, 0.0, 1.0));\n        vec3 p1 = permute(p + Pi.y - 1.0);\n        vec3 p2 = permute(p + Pi.y);\n        vec3 p3 = permute(p + Pi.y + 1.0);\n        vec3 p11 = permute(p1 + Pi.z - 1.0);\n        vec3 p12 = permute(p1 + Pi.z);\n        vec3 p13 = permute(p1 + Pi.z + 1.0);\n        vec3 p21 = permute(p2 + Pi.z - 1.0);\n        vec3 p22 = permute(p2 + Pi.z);\n        vec3 p23 = permute(p2 + Pi.z + 1.0);\n        vec3 p31 = permute(p3 + Pi.z - 1.0);\n        vec3 p32 = permute(p3 + Pi.z);\n        vec3 p33 = permute(p3 + Pi.z + 1.0);\n        vec3 ox11 = fract(p11 * K) - Ko;\n        vec3 oy11 = mod(floor(p11 * K), 7.0) * K - Ko;\n        vec3 oz11 = floor(p11 * K2) * Kz - Kzo;\n        vec3 ox12 = fract(p12 * K) - Ko;\n        vec3 oy12 = mod(floor(p12 * K), 7.0) * K - Ko;\n        vec3 oz12 = floor(p12 * K2) * Kz - Kzo;\n        vec3 ox13 = fract(p13 * K) - Ko;\n        vec3 oy13 = mod(floor(p13 * K), 7.0) * K - Ko;\n        vec3 oz13 = floor(p13 * K2) * Kz - Kzo;\n        vec3 ox21 = fract(p21 * K) - Ko;\n        vec3 oy21 = mod(floor(p21 * K), 7.0) * K - Ko;\n        vec3 oz21 = floor(p21 * K2) * Kz - Kzo;\n        vec3 ox22 = fract(p22 * K) - Ko;\n        vec3 oy22 = mod(floor(p22 * K), 7.0) * K - Ko;\n        vec3 oz22 = floor(p22 * K2) * Kz - Kzo;\n        vec3 ox23 = fract(p23 * K) - Ko;\n        vec3 oy23 = mod(floor(p23 * K), 7.0) * K - Ko;\n        vec3 oz23 = floor(p23 * K2) * Kz - Kzo;\n        vec3 ox31 = fract(p31 * K) - Ko;\n        vec3 oy31 = mod(floor(p31 * K), 7.0) * K - Ko;\n        vec3 oz31 = floor(p31 * K2) * Kz - Kzo;\n        vec3 ox32 = fract(p32 * K) - Ko;\n        vec3 oy32 = mod(floor(p32 * K), 7.0) * K - Ko;\n        vec3 oz32 = floor(p32 * K2) * Kz - Kzo;\n        vec3 ox33 = fract(p33 * K) - Ko;\n        vec3 oy33 = mod(floor(p33 * K), 7.0) * K - Ko;\n        vec3 oz33 = floor(p33 * K2) * Kz - Kzo;\n        vec3 dx11 = Pfx + jitter * ox11;\n        vec3 dy11 = Pfy.x + jitter * oy11;\n        vec3 dz11 = Pfz.x + jitter * oz11;\n        vec3 dx12 = Pfx + jitter * ox12;\n        vec3 dy12 = Pfy.x + jitter * oy12;\n        vec3 dz12 = Pfz.y + jitter * oz12;\n        vec3 dx13 = Pfx + jitter * ox13;\n        vec3 dy13 = Pfy.x + jitter * oy13;\n        vec3 dz13 = Pfz.z + jitter * oz13;\n        vec3 dx21 = Pfx + jitter * ox21;\n        vec3 dy21 = Pfy.y + jitter * oy21;\n        vec3 dz21 = Pfz.x + jitter * oz21;\n        vec3 dx22 = Pfx + jitter * ox22;\n        vec3 dy22 = Pfy.y + jitter * oy22;\n        vec3 dz22 = Pfz.y + jitter * oz22;\n        vec3 dx23 = Pfx + jitter * ox23;\n        vec3 dy23 = Pfy.y + jitter * oy23;\n        vec3 dz23 = Pfz.z + jitter * oz23;\n        vec3 dx31 = Pfx + jitter * ox31;\n        vec3 dy31 = Pfy.z + jitter * oy31;\n        vec3 dz31 = Pfz.x + jitter * oz31;\n        vec3 dx32 = Pfx + jitter * ox32;\n        vec3 dy32 = Pfy.z + jitter * oy32;\n        vec3 dz32 = Pfz.y + jitter * oz32;\n        vec3 dx33 = Pfx + jitter * ox33;\n        vec3 dy33 = Pfy.z + jitter * oy33;\n        vec3 dz33 = Pfz.z + jitter * oz33;\n        vec3 d11 = dist(dx11, dy11, dz11);\n        vec3 d12 = dist(dx12, dy12, dz12);\n        vec3 d13 = dist(dx13, dy13, dz13);\n        vec3 d21 = dist(dx21, dy21, dz21);\n        vec3 d22 = dist(dx22, dy22, dz22);\n        vec3 d23 = dist(dx23, dy23, dz23);\n        vec3 d31 = dist(dx31, dy31, dz31);\n        vec3 d32 = dist(dx32, dy32, dz32);\n        vec3 d33 = dist(dx33, dy33, dz33);\n        vec3 d1a = min(d11, d12);\n        d12 = max(d11, d12);\n        d11 = min(d1a, d13);\n        d13 = max(d1a, d13);\n        d12 = min(d12, d13);\n        vec3 d2a = min(d21, d22);\n        d22 = max(d21, d22);\n        d21 = min(d2a, d23);\n        d23 = max(d2a, d23);\n        d22 = min(d22, d23);\n        vec3 d3a = min(d31, d32);\n        d32 = max(d31, d32);\n        d31 = min(d3a, d33);\n        d33 = max(d3a, d33);\n        d32 = min(d32, d33);\n        vec3 da = min(d11, d21);\n        d21 = max(d11, d21);\n        d11 = min(da, d31);\n        d31 = max(da, d31);\n        d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;\n        d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx;\n        d12 = min(d12, d21);\n        d12 = min(d12, d22);\n        d12 = min(d12, d31);\n        d12 = min(d12, d32);\n        d11.yz = min(d11.yz, d12.xy);\n        d11.y = min(d11.y, d12.z);\n        d11.y = min(d11.y, d11.z);\n        return sqrt(d11.xy);\n    }\nvec4 Ruby_Mine1553790481262_158_main() \n    {\n        vec4 Ruby_Mine1553790481262_158_gl_Position = vec4(0.0);\n        vJitter = 1.0;\n        vPosition = (position * 2.0) + vec3(sin(time), cos(time), cos(time + 3.14));\n        vec2 worl = worley(vPosition, vJitter);\n        vec3 pos = position - (length(worl) * normal * 0.2);\n        Ruby_Mine1553790481262_158_gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n        return Ruby_Mine1553790481262_158_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Ruby_Mine1553790481262_158_main();    }\n",uniforms:{time:{type:"f",glslType:"float"},color1:{value:{r:.95,g:.1,b:.8},type:"c",glslType:"vec3"},color2:{value:{r:.7,g:.07,b:.6},type:"c",glslType:"vec3"}},url:"http://shaderfrog.com/app/view/3301",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},f={id:3345,name:"Thruster Shader",fragment:"#define TAU 6.28318530718\n#define MAX_ITER 5\n#define tau 6.2831853\n\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform vec2 Tiling_Caustic1477531952046_152_resolution;\nuniform vec3 backgroundColor;\nuniform vec3 Tiling_Caustic1477531952046_152_color;\nuniform float Tiling_Caustic1477531952046_152_speed;\nuniform float Tiling_Caustic1477531952046_152_brightness;\nuniform float time;\nuniform float contrast;\nuniform float distortion;\nuniform float Noise_Ripples1477531959288_166_speed;\nuniform vec3 Noise_Ripples1477531959288_166_color;\nuniform float Noise_Ripples1477531959288_166_brightness;\nuniform sampler2D noiseImage;\nuniform vec2 Noise_Ripples1477531959288_166_resolution;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\nuniform float highlightIntensity;\nuniform vec3 highlightColor;\nuniform vec3 Wiggly_Improved1477532051339_181_color;\nuniform vec3 Transparent_Glow1477532059126_201_color;\nuniform float Transparent_Glow1477532059126_201_start;\nuniform float Transparent_Glow1477532059126_201_end;\nuniform float Transparent_Glow1477532059126_201_alpha;\nuniform vec3 Glow_Effect1477532183055_216_color;\nuniform float Glow_Effect1477532183055_216_start;\nuniform float Glow_Effect1477532183055_216_end;\nuniform float Glow_Effect1477532183055_216_alpha;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nmat2 makem2(in float theta) \n    {\n        float c = cos(theta);\n        float s = sin(theta);\n        return mat2(c, -s, s, c);\n    }\nfloat noise(in vec2 x) \n    {\n        return texture2D(noiseImage, x * .01).x;\n    }\nfloat fbm(in vec2 p) \n    {\n        float z = 2.;\n        float rz = 0.;\n        vec2 bp = p;\n        for (float i = 1.;\n i < 6.0; i++) \n        {\n            rz += abs((noise(p) - 0.5) * 2.0) / z;\n            z = z * 2.;\n            p = p * 2.;\n        }\n        return rz;\n    }\nfloat dualfbm(in vec2 p) \n    {\n        vec2 p2 = p * distortion;\n        vec2 basis = vec2(fbm(p2 - time * Noise_Ripples1477531959288_166_speed * 1.6), fbm(p2 + time * Noise_Ripples1477531959288_166_speed * 1.7));\n        basis = (basis - .5) * .2;\n        p += basis;\n        return fbm(p * makem2(time * Noise_Ripples1477531959288_166_speed * 0.2));\n    }\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_FragColor = vec4(0.0);\n        vec2 uv = Tiling_Caustic1477531952046_152_vUv * Tiling_Caustic1477531952046_152_resolution;\n        vec2 p = mod(uv * TAU, TAU) - 250.0;\n        vec2 i = vec2(p);\n        float c = 1.0;\n        float inten = 0.005;\n        for (int n = 0;\n n < MAX_ITER; n++) \n        {\n            float t = time * Tiling_Caustic1477531952046_152_speed * (1.0 - (3.5 / float(n + 1)));\n            i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(t + i.x));\n            c += 1.0 / length(vec2(p.x / (sin(i.x + t) / inten), p.y / (cos(i.y + t) / inten)));\n        }\n        c /= float(MAX_ITER);\n        c = 1.17 - pow(c, Tiling_Caustic1477531952046_152_brightness);\n        vec3 rgb = vec3(pow(abs(c), 8.0));\n        Tiling_Caustic1477531952046_152_gl_FragColor = vec4(rgb * Tiling_Caustic1477531952046_152_color + backgroundColor, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_FragColor *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_FragColor = vec4(0.0);\n        vec2 p = (Noise_Ripples1477531959288_166_vUv.xy - 0.5) * Noise_Ripples1477531959288_166_resolution;\n        float rz = dualfbm(p);\n        vec3 col = (Noise_Ripples1477531959288_166_color / rz) * Noise_Ripples1477531959288_166_brightness;\n        col = ((col - 0.5) * max(contrast, 0.0)) + 0.5;\n        Noise_Ripples1477531959288_166_gl_FragColor = vec4(col, 1.0);\n        return Noise_Ripples1477531959288_166_gl_FragColor *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_FragColor = vec4(0.0);\n        Wiggly_Improved1477532051339_181_gl_FragColor = vec4(clamp(highlightColor * highlightIntensity * light, 0.0, 1.0), 1.0);\n        return Wiggly_Improved1477532051339_181_gl_FragColor *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Transparent_Glow1477532059126_201_fNormal);\n        vec3 eye = normalize(-Transparent_Glow1477532059126_201_fPosition.xyz);\n        float rim = smoothstep(Transparent_Glow1477532059126_201_start, Transparent_Glow1477532059126_201_end, 1.0 - dot(normal, eye));\n        float value = clamp(rim * Transparent_Glow1477532059126_201_alpha, 0.0, 1.0);\n        Transparent_Glow1477532059126_201_gl_FragColor = vec4(Transparent_Glow1477532059126_201_color * value, value);\n        return Transparent_Glow1477532059126_201_gl_FragColor *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_FragColor = vec4(0.0);\n        vec3 normal = normalize(Glow_Effect1477532183055_216_fNormal);\n        vec3 eye = normalize(-Glow_Effect1477532183055_216_fPosition.xyz);\n        float rim = smoothstep(Glow_Effect1477532183055_216_start, Glow_Effect1477532183055_216_end, 1.0 - dot(normal, eye));\n        Glow_Effect1477532183055_216_gl_FragColor = vec4(clamp(rim, 0.0, 1.0) * Glow_Effect1477532183055_216_alpha * Glow_Effect1477532183055_216_color, 1.0);\n        return Glow_Effect1477532183055_216_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = (Tiling_Caustic1477531952046_152_main() + Noise_Ripples1477531959288_166_main() + Wiggly_Improved1477532051339_181_main() + Transparent_Glow1477532059126_201_main() + Glow_Effect1477532183055_216_main());    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform float Wiggly_Improved1477532051339_181_speed;\nuniform float frequency;\nuniform float amplitude;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 Tiling_Caustic1477531952046_152_vPosition;\nvarying vec3 Tiling_Caustic1477531952046_152_vNormal;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv;\nvarying vec2 Tiling_Caustic1477531952046_152_vUv2;\nvarying vec3 Noise_Ripples1477531959288_166_vPosition;\nvarying vec3 Noise_Ripples1477531959288_166_vNormal;\nvarying vec2 Noise_Ripples1477531959288_166_vUv;\nvarying vec2 Noise_Ripples1477531959288_166_vUv2;\nvarying vec3 Wiggly_Improved1477532051339_181_vNormal;\nvarying float light;\nvarying vec3 Wiggly_Improved1477532051339_181_vPosition;\nvarying vec3 Transparent_Glow1477532059126_201_fNormal;\nvarying vec3 Transparent_Glow1477532059126_201_fPosition;\nvarying vec3 Glow_Effect1477532183055_216_fNormal;\nvarying vec3 Glow_Effect1477532183055_216_fPosition;\nvec4 Tiling_Caustic1477531952046_152_main() \n    {\n        vec4 Tiling_Caustic1477531952046_152_gl_Position = vec4(0.0);\n        Tiling_Caustic1477531952046_152_vNormal = normal;\n        Tiling_Caustic1477531952046_152_vUv = uv;\n        Tiling_Caustic1477531952046_152_vUv2 = uv2;\n        Tiling_Caustic1477531952046_152_vPosition = position;\n        Tiling_Caustic1477531952046_152_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Tiling_Caustic1477531952046_152_gl_Position *= 1.0;\n    }\nvec4 Noise_Ripples1477531959288_166_main() \n    {\n        vec4 Noise_Ripples1477531959288_166_gl_Position = vec4(0.0);\n        Noise_Ripples1477531959288_166_vNormal = normal;\n        Noise_Ripples1477531959288_166_vUv = uv;\n        Noise_Ripples1477531959288_166_vUv2 = uv2;\n        Noise_Ripples1477531959288_166_vPosition = position;\n        Noise_Ripples1477531959288_166_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Noise_Ripples1477531959288_166_gl_Position *= 1.0;\n    }\nvec4 Wiggly_Improved1477532051339_181_main() \n    {\n        vec4 Wiggly_Improved1477532051339_181_gl_Position = vec4(0.0);\n        vec3 offset = normalize(vec3(0.0) - position) * (amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + position.y * frequency));\n        vec3 newPosition = position + vec3(offset.x, 0.0, offset.z);\n        light = amplitude * sin(Wiggly_Improved1477532051339_181_speed * time + 1.0 + position.y * frequency);\n        Wiggly_Improved1477532051339_181_vPosition = newPosition;\n        Wiggly_Improved1477532051339_181_gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n        return Wiggly_Improved1477532051339_181_gl_Position *= 1.0;\n    }\nvec4 Transparent_Glow1477532059126_201_main() \n    {\n        vec4 Transparent_Glow1477532059126_201_gl_Position = vec4(0.0);\n        Transparent_Glow1477532059126_201_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Transparent_Glow1477532059126_201_fPosition = pos.xyz;\n        Transparent_Glow1477532059126_201_gl_Position = projectionMatrix * pos;\n        return Transparent_Glow1477532059126_201_gl_Position *= 1.0;\n    }\nvec4 Glow_Effect1477532183055_216_main() \n    {\n        vec4 Glow_Effect1477532183055_216_gl_Position = vec4(0.0);\n        Glow_Effect1477532183055_216_fNormal = normalize(normalMatrix * normal);\n        vec4 pos = modelViewMatrix * vec4(position, 1.0);\n        Glow_Effect1477532183055_216_fPosition = pos.xyz;\n        Glow_Effect1477532183055_216_gl_Position = projectionMatrix * pos;\n        return Glow_Effect1477532183055_216_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Tiling_Caustic1477531952046_152_main() + Noise_Ripples1477531959288_166_main() + Wiggly_Improved1477532051339_181_main() + Transparent_Glow1477532059126_201_main() + Glow_Effect1477532183055_216_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},backgroundColor:{value:{r:"0",g:"0",b:"0"},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_resolution:{value:{x:1,y:1},type:"v2",glslType:"vec2"},Tiling_Caustic1477531952046_152_color:{value:{r:1,g:1,b:1},type:"c",glslType:"vec3"},Tiling_Caustic1477531952046_152_speed:{value:"0.5",type:"f",glslType:"float"},Tiling_Caustic1477531952046_152_brightness:{value:"1.5",type:"f",glslType:"float"},noiseImage:{value:null,type:"t",glslType:"sampler2D"},distortion:{value:"2",type:"f",glslType:"float"},contrast:{value:"1.5",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_speed:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_color:{value:{r:1,g:.2823529411764706,b:.4823529411764706},type:"c",glslType:"vec3"},Noise_Ripples1477531959288_166_brightness:{value:"0.1",type:"f",glslType:"float"},Noise_Ripples1477531959288_166_resolution:{value:{x:"2",y:"2"},type:"v2",glslType:"vec2"},amplitude:{value:"1",type:"f",glslType:"float"},frequency:{value:"20",type:"f",glslType:"float"},highlightIntensity:{value:"0.4",type:"f",glslType:"float"},highlightColor:{value:{r:1,g:.5450980392156862,b:.23529411764705882},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_color:{value:{r:0,g:0,b:0},type:"c",glslType:"vec3"},Wiggly_Improved1477532051339_181_speed:{value:"12",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_color:{value:{r:1,g:.5294117647058824,b:.8156862745098039},type:"c",glslType:"vec3"},Transparent_Glow1477532059126_201_start:{value:"0.54674743",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_end:{value:"0.44399246",type:"f",glslType:"float"},Transparent_Glow1477532059126_201_alpha:{value:"0.5",type:"f",glslType:"float"},Glow_Effect1477532183055_216_color:{value:{r:"1",g:"1",b:"1"},type:"c",glslType:"vec3"},Glow_Effect1477532183055_216_start:{value:"0",type:"f",glslType:"float"},Glow_Effect1477532183055_216_end:{value:"1.9",type:"f",glslType:"float"},Glow_Effect1477532183055_216_alpha:{value:"1",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3345",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},h={id:3369,name:"Flowing Circles",fragment:"precision highp float;\nprecision highp int;\nuniform vec2 resolution;\nuniform float time;\nuniform float speed;\nuniform float baseRadius;\nuniform float colorVariation;\nuniform float brightnessVariation;\nuniform vec3 backgroundColor;\nuniform float variation;\nvarying vec2 vUv;\nvec3 n(vec2 x, float t) \n    {\n        vec3 v = floor(vec3(x, t));\n        vec3 u = vec3(mod(v.xy, variation), v.z);\n        vec3 c = fract(u.xyz * (vec3(0.16462, 0.84787, 0.98273) + u.xyz * vec3(0.24808, 0.75905, 0.13898) + u.yzx * vec3(0.31517, 0.62703, 0.26063) + u.zxy * vec3(0.47127, 0.58568, 0.37244)) + u.yzx * (vec3(0.35425, 0.65187, 0.12423) + u.yzx * vec3(0.95238, 0.93187, 0.95213) + u.zxy * vec3(0.31526, 0.62512, 0.71837)) + u.zxy * (vec3(0.95213, 0.13841, 0.16479) + u.zxy * vec3(0.47626, 0.69257, 0.19738)));\n        return v + c;\n    }\nvec3 col(vec2 x, float t) \n    {\n        return vec3(0.5 + max(brightnessVariation * cos(x.y * x.x), 0.0)) + clamp(colorVariation * cos(fract(vec3(x, t)) * 371.0241), vec3(-0.4), vec3(1.0));\n    }\nvec2 idx(vec2 x) \n    {\n        return floor(fract(x * 29.0) * 3.0) - vec2(1.0);\n    }\nfloat circle(vec2 x, vec2 c, float r) \n    {\n        return max(0.0, 1.0 - dot(x - c, x - c) / (r * r));\n    }\nvec4 Fluid_Circles1551693972791_443_main() \n    {\n        vec4 Fluid_Circles1551693972791_443_gl_FragColor = vec4(0.0);\n        vec2 x = vUv * resolution;\n        float t = time * speed;\n        vec4 c = vec4(vec3(0.0), 0.1);\n        for (int N = 0;\n N < 3; N++) \n        {\n            for (int k = -1;\n k <= 0; k++) \n            {\n                for (int i = -1;\n i <= 1; i++) \n                {\n                    for (int j = -1;\n j <= 1; j++) \n                    {\n                        vec2 X = x + vec2(j, i);\n                        float t = t + float(N) * 38.0;\n                        float T = t + float(k);\n                        vec3 a = n(X, T);\n                        vec2 o = idx(a.xy);\n                        vec3 b = n(X + o, T + 1.0);\n                        vec2 m = mix(a.xy, b.xy, (t - a.z) / (b.z - a.z));\n                        float r = baseRadius * sin(3.1415927 * clamp((t - a.z) / (b.z - a.z), 0.0, 1.0));\n                        if (length(a.xy - b.xy) / (b.z - a.z) > 2.0) \n                        {\n                            r = 0.0;\n                        }\n                         c += vec4(col(a.xy, a.z), 1.0) * circle(x, m, r);\n                    }\n                }\n            }\n        }\n        Fluid_Circles1551693972791_443_gl_FragColor = vec4(c.rgb / max(1e-5, c.w) + backgroundColor, 1.0);\n        return Fluid_Circles1551693972791_443_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Fluid_Circles1551693972791_443_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvec4 Fluid_Circles1551693972791_443_main() \n    {\n        vec4 Fluid_Circles1551693972791_443_gl_Position = vec4(0.0);\n        vNormal = normal;\n        vUv = uv;\n        vUv2 = uv2;\n        vPosition = position;\n        Fluid_Circles1551693972791_443_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Fluid_Circles1551693972791_443_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Fluid_Circles1551693972791_443_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},resolution:{value:{x:"8",y:"9"},type:"v2",glslType:"vec2"},speed:{value:".2",type:"f",glslType:"float"},baseRadius:{value:".2",type:"f",glslType:"float"},backgroundColor:{value:{r:0,g:".",b:"0.9"},type:"c",glslType:"vec3"},brightnessVariation:{value:"0",type:"f",glslType:"float"},colorVariation:{value:"0.99",type:"f",glslType:"float"},variation:{value:"50",type:"f",glslType:"float"}},url:"http://shaderfrog.com/app/view/3369",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},m={id:3373,name:"Electric Shader",fragment:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform float opacity;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nfloat Hash(vec2 p) \n    {\n        vec3 p2 = vec3(p.xy, 1.0);\n        return fract(sin(dot(p2, vec3(37.1, 61.7, 12.4))) * 3758.5453123);\n    }\nfloat noise(in vec2 p) \n    {\n        vec2 i = floor(p);\n        vec2 f = fract(p);\n        f *= f * (3.0 - 2.0 * f);\n        return mix(mix(Hash(i + vec2(0., 0.)), Hash(i + vec2(1., 0.)), f.x), mix(Hash(i + vec2(0., 1.)), Hash(i + vec2(1., 1.)), f.x), f.y);\n    }\nfloat fbm(vec2 p) \n    {\n        float v = 0.0;\n        v += noise(p * 1.0) * .5;\n        v += noise(p * 2.) * .25;\n        v += noise(p * 4.) * .125;\n        return v * 1.0;\n    }\nconst float PI = acos(0.0) * 2.0;\nvec2 RadialCoords(vec3 a_coords) \n    {\n        vec3 a_coords_n = normalize(a_coords);\n        float lon = atan(a_coords_n.z, a_coords_n.x);\n        float lat = acos(a_coords_n.y);\n        vec2 sphereCoords = vec2(lon, lat) / PI;\n        return vec2(fract(sphereCoords.x * 0.5 + 0.5), 1.0 - sphereCoords.y);\n    }\nvec4 Lightning_main() \n    {\n        vec4 Lightning_gl_FragColor = vec4(0.0);\n        vec2 uv = RadialCoords(vPosition * 1.0) * 2.0 - 1.0;\n        vec3 finalColor = vec3(0.0);\n        const float strength = 0.01;\n        const float dx = 0.1;\n        float t = 0.0;\n        for (int k = -4;\n k < 14; ++k) \n        {\n            vec2 thisUV = uv;\n            thisUV.x -= dx * float(k);\n            thisUV.y -= float(k);\n            t += abs(strength / (thisUV.x + fbm(thisUV + time)));\n        }\n        finalColor += t * vec3(0.1, 0.3, 1.0);\n        Lightning_gl_FragColor = vec4(finalColor, opacity);\n        return Lightning_gl_FragColor;\n    }\nvec4 Electric_Shader1556488915096_215_main() \n    {\n        vec4 Electric_Shader1556488915096_215_gl_FragColor = vec4(0.0);\n        Electric_Shader1556488915096_215_gl_FragColor = Lightning_main();\n        return Electric_Shader1556488915096_215_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Electric_Shader1556488915096_215_main();\n if (gl_FragColor.a < 0.5  && gl_FragColor.g <0.5) discard;   }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvec4 Lightning_main() \n    {\n        vec4 Lightning_gl_Position = vec4(0.0);\n        vNormal = normal;\n        vUv = uv;\n        vUv2 = uv2;\n        vPosition = position;\n        Lightning_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Lightning_gl_Position *= 0.5;\n    }\nvec4 Electric_Shader1556488915096_215_main() \n    {\n        vec4 Electric_Shader1556488915096_215_gl_Position = vec4(0.0);\n        Electric_Shader1556488915096_215_gl_Position = Lightning_main();\n        return Electric_Shader1556488915096_215_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Electric_Shader1556488915096_215_main();    }\n",uniforms:{cameraPosition:{type:"v3",glslType:"vec3"},time:{type:"f",glslType:"float"},opacity:{value:"0.4",type:"f",glslType:"float"}},side:2,url:"http://shaderfrog.com/app/view/3373",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/sirfizx"}},v={id:3386,name:"CS1 Shader",fragment:"#define DOWN_SCALE 1.0\n#define MAX_INT_DIGITS 4\n#define NORMAL 0\n#define INVERT 1\n#define UNDERLINE 2\n\nprecision highp float;\nprecision highp int;\nuniform float time;\nuniform vec2 resolution;\nuniform vec3 color;\nuniform vec3 background_color;\nvarying vec2 vUv;\nint TEXT_MODE = NORMAL;\nvec4 ch_spc = vec4(0x000000, 0x000000, 0x000000, 0x000000);\nvec4 ch_exc = vec4(0x003078, 0x787830, 0x300030, 0x300000);\nvec4 ch_quo = vec4(0x006666, 0x662400, 0x000000, 0x000000);\nvec4 ch_hsh = vec4(0x006C6C, 0xFE6C6C, 0x6CFE6C, 0x6C0000);\nvec4 ch_dol = vec4(0x30307C, 0xC0C078, 0x0C0CF8, 0x303000);\nvec4 ch_pct = vec4(0x000000, 0xC4CC18, 0x3060CC, 0x8C0000);\nvec4 ch_amp = vec4(0x0070D8, 0xD870FA, 0xDECCDC, 0x760000);\nvec4 ch_apo = vec4(0x003030, 0x306000, 0x000000, 0x000000);\nvec4 ch_lbr = vec4(0x000C18, 0x306060, 0x603018, 0x0C0000);\nvec4 ch_rbr = vec4(0x006030, 0x180C0C, 0x0C1830, 0x600000);\nvec4 ch_ast = vec4(0x000000, 0x663CFF, 0x3C6600, 0x000000);\nvec4 ch_crs = vec4(0x000000, 0x18187E, 0x181800, 0x000000);\nvec4 ch_com = vec4(0x000000, 0x000000, 0x000038, 0x386000);\nvec4 ch_dsh = vec4(0x000000, 0x0000FE, 0x000000, 0x000000);\nvec4 ch_per = vec4(0x000000, 0x000000, 0x000038, 0x380000);\nvec4 ch_lsl = vec4(0x000002, 0x060C18, 0x3060C0, 0x800000);\nvec4 ch_0 = vec4(0x007CC6, 0xD6D6D6, 0xD6D6C6, 0x7C0000);\nvec4 ch_1 = vec4(0x001030, 0xF03030, 0x303030, 0xFC0000);\nvec4 ch_2 = vec4(0x0078CC, 0xCC0C18, 0x3060CC, 0xFC0000);\nvec4 ch_3 = vec4(0x0078CC, 0x0C0C38, 0x0C0CCC, 0x780000);\nvec4 ch_4 = vec4(0x000C1C, 0x3C6CCC, 0xFE0C0C, 0x1E0000);\nvec4 ch_5 = vec4(0x00FCC0, 0xC0C0F8, 0x0C0CCC, 0x780000);\nvec4 ch_6 = vec4(0x003860, 0xC0C0F8, 0xCCCCCC, 0x780000);\nvec4 ch_7 = vec4(0x00FEC6, 0xC6060C, 0x183030, 0x300000);\nvec4 ch_8 = vec4(0x0078CC, 0xCCEC78, 0xDCCCCC, 0x780000);\nvec4 ch_9 = vec4(0x0078CC, 0xCCCC7C, 0x181830, 0x700000);\nvec4 ch_col = vec4(0x000000, 0x383800, 0x003838, 0x000000);\nvec4 ch_scl = vec4(0x000000, 0x383800, 0x003838, 0x183000);\nvec4 ch_les = vec4(0x000C18, 0x3060C0, 0x603018, 0x0C0000);\nvec4 ch_equ = vec4(0x000000, 0x007E00, 0x7E0000, 0x000000);\nvec4 ch_grt = vec4(0x006030, 0x180C06, 0x0C1830, 0x600000);\nvec4 ch_que = vec4(0x0078CC, 0x0C1830, 0x300030, 0x300000);\nvec4 ch_ats = vec4(0x007CC6, 0xC6DEDE, 0xDEC0C0, 0x7C0000);\nvec4 ch_A = vec4(0x003078, 0xCCCCCC, 0xFCCCCC, 0xCC0000);\nvec4 ch_B = vec4(0x00FC66, 0x66667C, 0x666666, 0xFC0000);\nvec4 ch_C = vec4(0x003C66, 0xC6C0C0, 0xC0C666, 0x3C0000);\nvec4 ch_D = vec4(0x00F86C, 0x666666, 0x66666C, 0xF80000);\nvec4 ch_E = vec4(0x00FE62, 0x60647C, 0x646062, 0xFE0000);\nvec4 ch_F = vec4(0x00FE66, 0x62647C, 0x646060, 0xF00000);\nvec4 ch_G = vec4(0x003C66, 0xC6C0C0, 0xCEC666, 0x3E0000);\nvec4 ch_H = vec4(0x00CCCC, 0xCCCCFC, 0xCCCCCC, 0xCC0000);\nvec4 ch_I = vec4(0x007830, 0x303030, 0x303030, 0x780000);\nvec4 ch_J = vec4(0x001E0C, 0x0C0C0C, 0xCCCCCC, 0x780000);\nvec4 ch_K = vec4(0x00E666, 0x6C6C78, 0x6C6C66, 0xE60000);\nvec4 ch_L = vec4(0x00F060, 0x606060, 0x626666, 0xFE0000);\nvec4 ch_M = vec4(0x00C6EE, 0xFEFED6, 0xC6C6C6, 0xC60000);\nvec4 ch_N = vec4(0x00C6C6, 0xE6F6FE, 0xDECEC6, 0xC60000);\nvec4 ch_O = vec4(0x00386C, 0xC6C6C6, 0xC6C66C, 0x380000);\nvec4 ch_P = vec4(0x00FC66, 0x66667C, 0x606060, 0xF00000);\nvec4 ch_Q = vec4(0x00386C, 0xC6C6C6, 0xCEDE7C, 0x0C1E00);\nvec4 ch_R = vec4(0x00FC66, 0x66667C, 0x6C6666, 0xE60000);\nvec4 ch_S = vec4(0x0078CC, 0xCCC070, 0x18CCCC, 0x780000);\nvec4 ch_T = vec4(0x00FCB4, 0x303030, 0x303030, 0x780000);\nvec4 ch_U = vec4(0x00CCCC, 0xCCCCCC, 0xCCCCCC, 0x780000);\nvec4 ch_V = vec4(0x00CCCC, 0xCCCCCC, 0xCCCC78, 0x300000);\nvec4 ch_W = vec4(0x00C6C6, 0xC6C6D6, 0xD66C6C, 0x6C0000);\nvec4 ch_X = vec4(0x00CCCC, 0xCC7830, 0x78CCCC, 0xCC0000);\nvec4 ch_Y = vec4(0x00CCCC, 0xCCCC78, 0x303030, 0x780000);\nvec4 ch_Z = vec4(0x00FECE, 0x981830, 0x6062C6, 0xFE0000);\nvec4 ch_lsb = vec4(0x003C30, 0x303030, 0x303030, 0x3C0000);\nvec4 ch_rsl = vec4(0x000080, 0xC06030, 0x180C06, 0x020000);\nvec4 ch_rsb = vec4(0x003C0C, 0x0C0C0C, 0x0C0C0C, 0x3C0000);\nvec4 ch_pow = vec4(0x10386C, 0xC60000, 0x000000, 0x000000);\nvec4 ch_usc = vec4(0x000000, 0x000000, 0x000000, 0x00FF00);\nvec4 ch_a = vec4(0x000000, 0x00780C, 0x7CCCCC, 0x760000);\nvec4 ch_b = vec4(0x00E060, 0x607C66, 0x666666, 0xDC0000);\nvec4 ch_c = vec4(0x000000, 0x0078CC, 0xC0C0CC, 0x780000);\nvec4 ch_d = vec4(0x001C0C, 0x0C7CCC, 0xCCCCCC, 0x760000);\nvec4 ch_e = vec4(0x000000, 0x0078CC, 0xFCC0CC, 0x780000);\nvec4 ch_f = vec4(0x00386C, 0x6060F8, 0x606060, 0xF00000);\nvec4 ch_g = vec4(0x000000, 0x0076CC, 0xCCCC7C, 0x0CCC78);\nvec4 ch_h = vec4(0x00E060, 0x606C76, 0x666666, 0xE60000);\nvec4 ch_i = vec4(0x001818, 0x007818, 0x181818, 0x7E0000);\nvec4 ch_j = vec4(0x000C0C, 0x003C0C, 0x0C0C0C, 0xCCCC78);\nvec4 ch_k = vec4(0x00E060, 0x60666C, 0x786C66, 0xE60000);\nvec4 ch_l = vec4(0x007818, 0x181818, 0x181818, 0x7E0000);\nvec4 ch_m = vec4(0x000000, 0x00FCD6, 0xD6D6D6, 0xC60000);\nvec4 ch_n = vec4(0x000000, 0x00F8CC, 0xCCCCCC, 0xCC0000);\nvec4 ch_o = vec4(0x000000, 0x0078CC, 0xCCCCCC, 0x780000);\nvec4 ch_p = vec4(0x000000, 0x00DC66, 0x666666, 0x7C60F0);\nvec4 ch_q = vec4(0x000000, 0x0076CC, 0xCCCCCC, 0x7C0C1E);\nvec4 ch_r = vec4(0x000000, 0x00EC6E, 0x766060, 0xF00000);\nvec4 ch_s = vec4(0x000000, 0x0078CC, 0x6018CC, 0x780000);\nvec4 ch_t = vec4(0x000020, 0x60FC60, 0x60606C, 0x380000);\nvec4 ch_u = vec4(0x000000, 0x00CCCC, 0xCCCCCC, 0x760000);\nvec4 ch_v = vec4(0x000000, 0x00CCCC, 0xCCCC78, 0x300000);\nvec4 ch_w = vec4(0x000000, 0x00C6C6, 0xD6D66C, 0x6C0000);\nvec4 ch_x = vec4(0x000000, 0x00C66C, 0x38386C, 0xC60000);\nvec4 ch_y = vec4(0x000000, 0x006666, 0x66663C, 0x0C18F0);\nvec4 ch_z = vec4(0x000000, 0x00FC8C, 0x1860C4, 0xFC0000);\nvec4 ch_lpa = vec4(0x001C30, 0x3060C0, 0x603030, 0x1C0000);\nvec4 ch_bar = vec4(0x001818, 0x181800, 0x181818, 0x180000);\nvec4 ch_rpa = vec4(0x00E030, 0x30180C, 0x183030, 0xE00000);\nvec4 ch_tid = vec4(0x0073DA, 0xCE0000, 0x000000, 0x000000);\nvec4 ch_lar = vec4(0x000000, 0x10386C, 0xC6C6FE, 0x000000);\nvec2 res = vec2(1.0) / 1.0;\nvec2 print_pos = vec2(0.0);\nfloat extract_bit(float n, float b) \n    {\n        b = clamp(b, -1.0, 24.0);\n        return floor(mod(floor(n / pow(2.0, floor(b))), 2.0));\n    }\nfloat sprite(vec4 spr, vec2 size, vec2 uv) \n    {\n        uv = floor(uv);\n        float bit = (size.x - uv.x - 1.0) + uv.y * size.x;\n        bool bounds = all(greaterThanEqual(uv, vec2(0))) && all(lessThan(uv, size));\n        float pixels = 0.0;\n        pixels += extract_bit(spr.x, bit - 72.0);\n        pixels += extract_bit(spr.y, bit - 48.0);\n        pixels += extract_bit(spr.z, bit - 24.0);\n        pixels += extract_bit(spr.w, bit - 00.0);\n        return bounds ? pixels : 0.0;\n    }\nfloat char(vec4 ch, vec2 uv) \n    {\n        if (TEXT_MODE == INVERT) \n        {\n            ch = pow(2.0, 24.0) - 1.0 - ch;\n        }\n         if (TEXT_MODE == UNDERLINE) \n        {\n            ch.w = floor(ch.w / 256.0) * 256.0 + 255.0;\n        }\n         float px = sprite(ch, vec2(8, 12), uv - print_pos);\n        print_pos.x += 8.;\n        return px;\n    }\nvec4 get_digit(float d) \n    {\n        d = floor(d);\n        if (d == 0.0) return ch_0;\n         if (d == 1.0) return ch_1;\n         if (d == 2.0) return ch_2;\n         if (d == 3.0) return ch_3;\n         if (d == 4.0) return ch_4;\n         if (d == 5.0) return ch_5;\n         if (d == 6.0) return ch_6;\n         if (d == 7.0) return ch_7;\n         if (d == 8.0) return ch_8;\n         if (d == 9.0) return ch_9;\n         return vec4(0.0);\n    }\nfloat print_number(float number, vec2 uv) \n    {\n        float result = 0.0;\n        for (int i = 3;\n i >= -1; i--) \n        {\n            float digit = mod(number / pow(10.0, float(i)), 10.0);\n            if (i == -1) \n            {\n                result += char(ch_per, uv);\n            }\n             if (abs(number) > pow(10.0, float(i)) || i == 0) \n            {\n                result += char(get_digit(digit), uv);\n            }\n         }\n        return result;\n    }\nfloat print_integer(float number, int zeros, vec2 uv) \n    {\n        float result = 0.0;\n        for (int i = MAX_INT_DIGITS;\n i >= 0; i--) \n        {\n            float digit = mod(number / pow(10.0, float(i)), 10.0);\n            if (abs(number) > pow(10.0, float(i)) || zeros > i || i == 0) \n            {\n                result += char(get_digit(digit), uv);\n            }\n         }\n        return result;\n    }\nfloat text(vec2 uv) \n    {\n        float col = 0.0;\n        vec2 center = res / 2.0;\n        print_pos = floor(center - vec2((17.0 * 8.), (1.0 * 12.)) / 2.0);\n        col += char(ch_C, uv);\n        col += char(ch_S, uv);\n        col += char(ch_1, uv);\n        TEXT_MODE = INVERT;\n        col += char(ch_G, uv);\n        col += char(ch_a, uv);\n        col += char(ch_m, uv);\n        col += char(ch_e, uv);\n        TEXT_MODE = NORMAL;\n        col += char(ch_E, uv);\n        col += char(ch_n, uv);\n        col += char(ch_g, uv);\n        col += char(ch_i, uv);\n        col += char(ch_n, uv);\n        col += char(ch_e, uv);\n        col += char(ch_exc, uv);\n        return col;\n    }\nvec4 Text_main() \n    {\n        vec4 Text_gl_FragColor = vec4(0.0);\n        vec2 uv = (vUv.xy - 0.5) * resolution;\n        vec2 duv = floor(uv.xy / 1.0);\n        float pixel = text(duv);\n        if (pixel > 0.0) \n        {\n            Text_gl_FragColor = vec4(vec3(pixel) * color, 1.0);\n            return Text_gl_FragColor *= 1.0;\n        }\n else \n        {\n            discard;\n        }\n    }\nvec4 Text_Only_Shader1556670324252_90_main() \n    {\n        vec4 Text_Only_Shader1556670324252_90_gl_FragColor = vec4(0.0);\n        Text_Only_Shader1556670324252_90_gl_FragColor = Text_main();\n        return Text_Only_Shader1556670324252_90_gl_FragColor *= 1.0;\n    }\nvoid main() \n    {\n        gl_FragColor = Text_Only_Shader1556670324252_90_main();    }\n",vertex:"precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec2 vUv;\nvec4 Hello_ShaderFrog1551692717683_383_main() \n    {\n        vec4 Hello_ShaderFrog1551692717683_383_gl_Position = vec4(0.0);\n        vUv = uv;\n        Hello_ShaderFrog1551692717683_383_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        return Hello_ShaderFrog1551692717683_383_gl_Position *= 1.0;\n    }\nvec4 Text_Only_Shader1556670324252_90_main() \n    {\n        vec4 Text_Only_Shader1556670324252_90_gl_Position = vec4(0.0);\n        Text_Only_Shader1556670324252_90_gl_Position = Hello_ShaderFrog1551692717683_383_main();\n        return Text_Only_Shader1556670324252_90_gl_Position *= 1.0;\n    }\nvoid main() \n    {\n        gl_Position = Text_Only_Shader1556670324252_90_main();    }\n",uniforms:{time:{type:"f",glslType:"float"},color:{value:{r:.7176470588235294,g:0,b:0},type:"c",glslType:"vec3"},resolution:{value:{x:"200",y:"80"},type:"v2",glslType:"vec2"},background_color:{value:{r:0,g:.8156862745098039,b:1},type:"c",glslType:"vec3"}},side:2,url:"http://shaderfrog.com/app/view/3386",user:{username:"SirFizX",url:"http://shaderfrog.com/app/profile/andrewray"}},_={};_.Polkadot_Shader=n,_.Sun_Shader=i,_.Jelly_Shader=o,_.Green_Dance_Shader=r,_.Cosmic_Shader=a,_.Cool_Tiles_Shader=s,_.Disco_Shader=l,_.Marching_Ants_Shader=c,_.Goo_Shader=u,_.Psycho_Shader=d,_.Ova_Shader=p,_.Thruster_Shader=f,_.Flowing_Circles_Shader=h,_.Electric_Shader=m,_.CS1_Shader=v;const g={labelText:"Label Text",suffix:"",labelColor:"#e23fcf",gradientColor1:"#78F8EC",gradientColor2:"#6E4AE2",max:100},y=function(e){this.opts=Object.assign({},g,e),this.size=2e3/9,this.strokeWidth=this.size/8,this.radius=this.size/2-this.strokeWidth/2,this.value=0,this.cachedValue=this.value,this.targetValue=!1,this.isAnimating=!1,this.direction="up",this.svg,this.defs,this.slice,this.overlay,this.text,this.label,this.arrow,this.create(this.opts.labelColor,this.opts.gradientColor1,this.opts.gradientColor2)};y.prototype.create=function(e,t,n){this.createSvg(),this.createDefs(t,n),this.createSlice(),this.createOverlay(),this.createText(n),this.createLabel(e),this.opts.container.appendChild(this.svg)},y.prototype.createSvg=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",this.size+"px"),e.setAttribute("height",this.size+"px"),this.svg=e},y.prototype.createDefs=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");i.setAttribute("id","gradient"+this.opts.labelText),(o=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("stop-color",t),o.setAttribute("offset","0%"),i.appendChild(o),(r=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("stop-color",e),r.setAttribute("offset","100%"),i.appendChild(r);var o,r,a=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");a.setAttribute("id","gradient-background"),(o=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("stop-color","rgba(0, 0, 0, 0.2)"),o.setAttribute("offset","0%"),a.appendChild(o),(r=document.createElementNS("http://www.w3.org/2000/svg","stop")).setAttribute("stop-color","rgba(0, 0, 0, 0.05)"),r.setAttribute("offset","100%"),a.appendChild(r),n.appendChild(i),n.appendChild(a),this.svg.appendChild(n),this.defs=n},y.prototype.createSlice=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill","none"),e.setAttribute("stroke",`url(#gradient${this.opts.labelText})`),e.setAttribute("stroke-width",this.strokeWidth),e.setAttribute("transform","translate("+this.strokeWidth/2+","+this.strokeWidth/2+")"),e.setAttribute("class","animate-draw"),this.svg.appendChild(e),this.slice=e},y.prototype.createOverlay=function(){var e=this.size-this.size/2-this.strokeWidth/2,t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx",this.size/2),t.setAttribute("cy",this.size/2),t.setAttribute("r",e),navigator.vendor.includes("Apple")?t.setAttribute("fill","rgba(0, 0, 0, 0.05)"):t.setAttribute("fill","url(#gradient-background)"),this.svg.appendChild(t),this.overlay=t},y.prototype.createText=function(e){var t=this.size/3.5,n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("x",this.size/2+t/7.5),n.setAttribute("y",this.size/2+t/4),n.setAttribute("font-size",t),n.setAttribute("fill",e),n.setAttribute("text-anchor","middle");var i=t/3;n.innerHTML=0+`<tspan font-size=${i} dy=${1.2*-i}>${this.opts.suffix}</tspan>`,this.svg.appendChild(n),this.text=n},y.prototype.createLabel=function(e){let t=4.5;this.opts.labelText.length>8&&(t=7);var n=this.size/t,i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("x",this.size/2),i.setAttribute("y",2*this.size/3+n/(t-1)),i.setAttribute("font-family","Century Gothic, Lato"),i.setAttribute("font-size",n),i.setAttribute("fill",e),i.setAttribute("text-anchor","middle"),i.innerHTML=this.opts.labelText,this.svg.appendChild(i),this.label=i},y.prototype.createArrow=function(){var e,t,n=this.size/10;"up"===this.direction?(e=n/2,t=-1):"down"===this.direction&&(e=0,t=1);var i=this.size/2-n/2,o=this.size-this.size/3+e,r=t*(n/1.5),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d","M 0 0 "+n+" 0 "+n/2+" "+r+" 0 0 Z"),a.setAttribute("fill","#97F8F0"),a.setAttribute("opacity","0.6"),a.setAttribute("transform","translate("+i+","+o+")"),this.svg.appendChild(a),this.arrow=a},y.prototype.animateStart=function(){var e=0,t=this,n=setInterval((function(){var i=+(e/t.value).toFixed(2);(e+=i<.95?2-2*i:.05)>=+t.value&&(e=t.value,clearInterval(n)),t.setValue(e)}),10)},y.prototype.animateTo=function(e,t=3,n=.1){let i=this.opts.max;t*=i/100,n*=i/100,e>i&&(e=i),e<0&&(e=0);var o=this.value,r=this;this.isAnimating=!0;var a=setInterval((function(){var i=o>e?+(e/o).toFixed(2):+(o/e).toFixed(2),s=i<.95?t-t*i:n;e<o?(o-=s)<=-e&&(r.value=e,clearInterval(a),r.cachedValue=r.value,r.isAnimating=!1):(o+=s)>=+e&&(r.value=e,e>=r.opts.max&&(r.svg.currentScale=0,setTimeout(e=>{r.setValue(r.opts.max),r.svg.currentScale=1},100)),clearInterval(a),r.cachedValue=r.value,r.isAnimating=!1),r.setValue(o)}),10)},y.prototype.changeBy=function(e){this.targetValue=this.targetValue?this.targetValue+e:this.value+e,this.animateTo(this.targetValue)},y.prototype.animateReset=function(){this.setValue(0)},y.prototype.polarToCartesian=function(e,t,n,i){var o=(i-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},y.prototype.describeArc=function(e,t,n,i,o){var r=this.polarToCartesian(e,t,n,o),a=this.polarToCartesian(e,t,n,i),s=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,s,0,a.x,a.y].join(" ")},y.prototype.setValue=function(e){var t=e/this.opts.max*360;360===t&&(t=359.99);var n=this.size/2-this.strokeWidth/2,i=this.describeArc(n,n,n,180,180+t);this.slice.setAttribute("d",i);var o=this.size/3.5/3;this.text.innerHTML=Math.floor(e)+`<tspan font-size=${o} dy=${1.2*-o}>${this.opts.suffix}</tspan>`,this.value=e};class b{constructor(e,t="label",n="white",i=0,o=0,r=1,a=.25,s=.75,l=.8){this.widget=document.createElement("div"),this.widget.style.fontSize=2e3/9/4.5+"px",this.widget.style.marginTop=2e3/81+"px",this.widget.style.marginBottom=2e3/81+"px",this.widget.style.color=n,this.value=0,this.min=parseFloat(o),this.max=parseFloat(r),this.range=r-o,this.el=document.createElement("meter"),this.el.cachedValue=this.value,this.el.targetValue=!1,this.el.isAnimating=!1,this.el.setAttribute("value",i),this.el.setAttribute("min",o),this.el.setAttribute("max",r),this.el.setAttribute("low",a),this.el.setAttribute("high",s),this.el.setAttribute("optimum",l),this.el.style.width="156.25px",this.el.style.height="39.0625px",this.widget.appendChild(this.el),this.label=document.createElement("div"),this.label.style.textAlign="center",this.label.innerHTML=t,this.widget.appendChild(this.label),e.appendChild(this.widget)}animateTo(e){var t=parseFloat(this.el.getAttribute("value")),n=this.el;n.range=this.range,n.isAnimating=!0;var i=setInterval((function(){var o=t>e?+(e/t).toFixed(4):+(t/e).toFixed(4),r=o<.95?n.range/30-n.range/30*o:.003;e<t?(t-=r)<=-e&&(n.value=e,e<=0&&n.setValue(0),clearInterval(i),n.cachedValue=n.value,n.isAnimating=!1):(t+=r)>=+e&&(n.value=e,e>=100&&n.setValue(100),clearInterval(i),n.cachedValue=n.value,n.isAnimating=!1),n.value=t,this.value=t}),10)}changeBy(e){this.el.targetValue=this.el.targetValue?this.el.targetValue+e:this.el.cachedValue+e,this.animateTo(this.el.targetValue)}}var C={gameName:"CS1 Peers",welcomeMsg:"",playerLeftMsg:"",playerJoinedMsg:"",theme:{fontFamily:"Arial",titleFontColor:"#C4A43C",formColor:"#fff",formFontColor:"white",formButtonColor:"#A82F1E",overlayColor:"rgba(0,0,0, 0.9)",fontSize:2,logo:"https://cdn.glitch.com/376a6bb1-e9b2-4998-af7a-cc4ea70344b8%2FCS1_Clean_logo_64.png?v=1575125604200"},avatar:{models:[{type:1,url:"https://cdn.glitch.com/7001d18b-ab06-4934-84ee-f9bc0645e42c%2Fchip_eyes_pack.glb?1553596528401",thumbnail:"https://cdn.glitch.com/fec96da0-7526-4b9a-aecf-3abbbe7fcdc5%2Fchip.png?v=1567384714024",name:"Chip",scale:.75,yOffset:.1,animations:{idle:"idle",walk:"walk"},msg:{color:"orange",offset:"0 4 0"}},{type:1,url:"https://cdn.glitch.com/fec96da0-7526-4b9a-aecf-3abbbe7fcdc5%2Fmel.glb?v=1567388543651",thumbnail:"https://cdn.glitch.com/fec96da0-7526-4b9a-aecf-3abbbe7fcdc5%2Fmel.png?v=1567389128396",name:"Mel",scale:.75,yOffset:.1,animations:{idle:"idle",walk:"walk"},msg:{color:"orange",offset:"0 4 0"}},{type:2,url:"https://cdn.glitch.com/984a335f-9425-469e-8978-85c88c06d624%2Fboz_head.glb?v=1566741683664",lefthand:"https://cdn.glitch.com/984a335f-9425-469e-8978-85c88c06d624%2Fboz_lefthand.glb?v=1566749593952",righthand:"https://cdn.glitch.com/984a335f-9425-469e-8978-85c88c06d624%2Fboz_righthand.glb?v=1566749593705",thumbnail:"https://cdn.glitch.com/fec96da0-7526-4b9a-aecf-3abbbe7fcdc5%2Fvr.png?v=1567383953311",name:"VR-1",scale:1,yOffset:0,animations:{idle:"idle",walk:"walk"},msg:{color:"orange",offset:"0 1.75 0"}}]},sounds:{playerJoined:{url:"https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3?v=1559499927954"},playerLeft:{url:"https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3?v=1559499927954"},jump:{url:"https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3?v=1559499927954"},land:{url:"https://cdn.glitch.com/826d99b1-f98c-4ee8-bbe5-abdd27784a77%2Fland.mp3?v=1575809351148"},tada:{url:"https://cdn.glitch.com/d3c18d9e-c399-40af-bb49-80aede8ac702%2Ftada.mp3?v=1553467314704"}},bgm:{songs:[],volume:.2,playAll:!0,initialDelay:5e3},voice:{name:"Google UK English Female",rate:.9,pitch:1,volume:1,welcomeDelay:4e3},vrui:{scale:1,offset:"0 0.3 0"}};window.onload=e=>{let t=`\n<div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: block;background-color:${C.theme.overlayColor}">\n    <div class="modal-dialog">\n\t\t  <div class="loginmodal-container" style="background-color:${C.theme.formColor}">\n          <image id="logo" src=${C.theme.logo} width="64px">\n          <h3 id="gamename" style="color:${C.theme.titleFontColor}">${C.gameName}</h3>\n\t\t\t<div>\t  \n\t\t\t\t\t<input  placeholder="username" class="q1">\n          <input  placeholder="password" type="password" class="q2"> \n          <button id="lb" style="background-color:${C.theme.formButtonColor}">Submit</button> \n          <div style="color:${C.theme.formButtonColor}" id="login-msg"></div> \n      </div>\t\t\t\t\n\n\t\t\t</div>\n\t</div>\n</div>\n`;document.title=C.gameName;let n=document.querySelector("#login");function i(e){e.preventDefault(),CS1&&CS1.socket.connected?document.querySelector(".q1").value.length>0&&document.querySelector(".q2").value.length>0&&(navigator.vendor.includes("Apple")&&CS1.sounds.playerJoined.play().catch(e=>{console.log(e)}),CS1.login(document.querySelector(".q1").value,document.querySelector(".q2").value),document.querySelector(".q1").value="",document.querySelector(".q2").value=""):(CS1&&!CS1.socket.connected&&CS1.socket.close(),n.style.zIndex=-1,n.setAttribute("hidden",""),CS1.myPlayer.components.player.setSpeed(.2),CS1.game.start(),CS1.sounds.playerJoined.play(),setTimeout(()=>{CS1.say(CS1.game.announcements.welcome)},CS1.game.welcomeDelay))}n.innerHTML=t,document.querySelector("a-scene").addEventListener("loaded",(function(){document.querySelector(".q1").focus(),navigator.onLine||(document.getElementById("login-msg").innerHTML="OFFLINE MODE",document.querySelector("#lb").setAttribute("value","Play Game Offline"))})),document.getElementById("lb").addEventListener("click",i),document.querySelector(".q2").addEventListener("keydown",e=>{"Enter"==e.code&&i(e)})},function(){AFRAME.registerComponent("cloud",{schema:{color:{type:"string",default:"blue"}},init:function(){const e=this.el;e.setAttribute("material","shader","cloud-shader"),e.setAttribute("material","myColor",this.data.color)},update:function(){this.el.setAttribute("material","myColor",this.data.color)}});AFRAME.registerShader("cloud-shader",{schema:{timeMsec:{type:"time",is:"uniform"},myOffset:{type:"vec3",is:"uniform"},myColor:{type:"color",is:"uniform",default:"pink"}},vertexShader:'\n\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise3(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n\n\n//\n// Based on @thespite\'s article:\n// \n// "Vertex displacement with a noise function using GLSL and three.js"\n// Source: https://www.clicktorelease.com/blog/vertex-displacement-noise-3d-webgl-glsl-three-js/\n//\n\nvarying float noise;\nuniform float timeMsec; // A-Frame time in milliseconds.\nuniform vec3 myOffset;\n\nfloat turbulence( vec3 p ) {\n\n  float w = 100.0;\n  float t = -.5;\n\n  for (float f = 1.0 ; f <= 10.0 ; f++ ){\n    float power = pow( 2.0, f );\n    t += abs( pnoise3( vec3( power * p ), vec3( 10.0, 10.0, 10.0 ) ) / power );\n  }\n\n  return t;\n\n}\n\nvoid main() {\n  float time = timeMsec / 1000.0; // Convert from A-Frame milliseconds to typical time in seconds.\n  noise = 10.0 *  -.10 * turbulence( .5 * normal + time / 3.0 );\n  float b = 5.0 * pnoise3( 0.05 * position, vec3( 100.0 ) );\n  float displacement = (- 10. * noise + b) / 50.0;\n\n  vec3 newPosition = position + normal * displacement + myOffset;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n}\n\n',fragmentShader:"\n\nvarying float noise;\nuniform vec3 myColor;\n\nvoid main() {\n\n  vec3 color = myColor  - vec3(2. * noise);\n  gl_FragColor = vec4( color.rgb , 1.0 );\n\n}\n\n"})}();AFRAME.registerComponent("dotrow",{schema:{change:{type:"string",default:"x"},to:{type:"number",default:10}},init:function(){let e=this.data.change,t=this.data.to,n=this.el.getAttribute("position"),i=n[e],o=t>i?2:-2,r="x"==e;this.dots=[];let a=document.querySelector("a-scene");for(let e=i;e*(o/2)<t*(o/2);e+=o){let t=document.createElement("a-sphere");t.setAttribute("position",r?`${e} 1 ${n.z}`:`${n.x} 1 ${e}`),t.setAttribute("shader-frog","name:Ova_Shader"),t.setAttribute("radius","0.5"),t.setAttribute("collectible","affects:pointsDial;value:10;threshold:1.6"),a.appendChild(t),this.dots.push(t)}this.firstInitTime=Date.now()},update:function(){Date.now()-this.firstInitTime<5e3||(console.log("updating dotrow..."),this.dots.forEach(e=>{e.parentNode.removeChild(e)}),this.init())}});AFRAME.registerSystem("log",{schema:{console:{default:!0}},init:function(){var e=this.data,t=this.logs=[],n=this.loggers=[];window.CS1.log=function(i,o){t.push([i,o]),n.forEach((function(e){e.receiveLog(i,o)})),e.console&&console.log("[log:"+(o||"")+"] "+i)},window.CS1.socket.on("vr-log",e=>{window.CS1.log(e.msg,e.channel)}),window.CS1.logall=function(e,t){window.CS1.socket.emit("logall",{msg:e,channel:t})}},registerLogger:function(e){this.loggers.push(e),this.logs.forEach((function(t){e.receiveLog.apply(e,t)}))},unregisterLogger:function(e){this.loggers.splice(this.loggers.indexOf(e),1)}}),AFRAME.registerComponent("log",{schema:{channel:{type:"string"},filter:{type:"string"},max:{default:100},showErrors:{default:!0}},init:function(){this.logs=[],this.system.registerLogger(this)},play:function(){var e=this;this.el.sceneEl.addEventListener("log",(function(t){t.detail&&e.receiveLog(t.detail.message,t.detail.channel)})),window.onerror=function(t,n,i,o,r){e.receiveLog("Error: "+t)}},receiveLog:function(e,t){var n=this.data;"string"!=typeof e&&(e=JSON.stringify(e)),n.channel&&t&&n.channel!==t||n.filter&&-1===e.indexOf(n.filter)||(this.logs.push(e),n.max&&this.logs.length>n.max&&this.logs.shift(),this.el.setAttribute("text",{value:this.logs.join("\n")}))},remove:function(){this.el.removeAttribute("text"),this.system.unregisterLogger(this)}}),AFRAME.registerSystem("launchable",{schema:{},init:function(){CS1.socket.on("launch-sound",e=>{CS1.grabbables[e]&&CS1.grabbables[e].components.sound__launch&&CS1.grabbables[e].components.sound__launch.playSound()}),CS1.socket.on("launch-complete",e=>{CS1.grabbables[e].components.grabbable.isDragging=!1})}}),AFRAME.registerComponent("launchable",{schema:{burst:{type:"boolean",default:!0},launchSound:{type:"string",default:"https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3"}},dependencies:["grabbable"],init:function(){this.name=this.el.components.grabbable.name,console.log(`Launchable added with name: ${this.name}.`);let e=this;this.grabbable=e.el.components.grabbable,e.el.setAttribute("sound__launch",`src:url(${this.data.launchSound})`),e.el.addEventListener("grabEnd",t=>{e.launch()})},getDir:function(){if("Oculus Quest"==CS1.device){let e=this.grabbable.cursor.components.raycaster.raycaster.ray.direction;return e.x*=-1,e.y*=-1,e.z*=-1,e}return this.grabbable.cursor.object3D.getWorldDirection()},launch:function(e){CS1.socket.emit("logall",{msg:`${CS1.myPlayer.name} launched grabbable ${this.el.components.grabbable.name}!`,channel:"0"}),this.el.components.grabbable.isDragging=!0;const t={name:this.name,dir:e||this.getDir()};CS1.socket.emit("launch",t)}}),AFRAME.registerComponent("launchrow",{schema:{change:{type:"string",default:"x"},to:{type:"number",default:10}},init:function(){let e=this.data.change,t=this.data.to,n=this.el.getAttribute("position"),i=n[e],o=t>i?4:-4,r="x"==e;this.dots=[];let a=document.querySelector("a-scene");for(let e=i;e*(o/2)<t*(o/2);e+=o){let t=document.createElement("a-sphere");t.setAttribute("position",r?`${e} 1.4 ${n.z}`:`${n.x} 1.4 ${e}`),t.setAttribute("shader-frog","name:Disco_Shader"),t.setAttribute("radius","1"),t.setAttribute("collectible","affects:energyDial;value:-10;threshold:1.6"),t.setAttribute("grabbable",""),t.setAttribute("launchable",""),a.appendChild(t),this.dots.push(t)}this.firstInitTime=Date.now()},update:function(){Date.now()-this.firstInitTime<5e3||(console.log("updating dotrow..."),this.dots.forEach(e=>{e.parentNode.removeChild(e)}),this.init())}});const x=function(){document.querySelector("#menu1");const e=document.querySelector("#main"),t=document.querySelector("#menu2"),n=C.avatar.models[0],i=C.avatar.models[1],o=C.avatar.models[2],r=document.createElement("div");r.setAttribute("id","hidden-div"),r.style.display="None",document.body.appendChild(r);const a=document.createElement("span");a.innerHTML="",r.appendChild(a);const s=document.createElement("span");s.innerHTML="<h1>Mission</h1>\n<p>Roam the virtual world looking for mission clues. Be nice and helpful to everyone you meet.</p>\n<p>Once you have gathered enough clues and your mission is clear, gather the neccessary resources and fulfill your calling. </p>\n           \n  ",r.appendChild(s);const l=document.createElement("span");l.innerHTML="<h1>Control Panel</h1>\n\n<button onclick='CS1.ui.controls.showBox()'>Show/Hide Current Avatar Box</button> \n\n<button onclick='CS1.ui.controls.addBlasterBall()'>Blaster Ball</button> \n\n<button onclick='CS1.ui.controls.addMagicPellet()'>Magic Pellet</button>\n",r.appendChild(l);const c=document.createElement("span");c.innerHTML='<h1>Direct Messages</h1>\n<h2 id="dm-sound-control" onclick="CS1.ui.controls.msgMuteToggle()"></h2>\n<ul id="messages">\n\n</ul>',r.appendChild(c),CS1.ui={},CS1.ui.controls={};const u=document.createElement("a-box");u.setAttribute("scale","0.7 0.7 0.7"),u.object3D.visible=!0,u.object3D.position.set(0,2.3,-.25),u.setAttribute("material",`src:${i.thumbnail}`),t.appendChild(u),CS1.ui.controls.showBox=e=>{u.object3D.visible=!u.object3D.visible},CS1.ui.controls.addBlasterBall=e=>{const t=document.createElement("a-sphere");t.setAttribute("color","brown"),t.setAttribute("collectible","affects:energyDial ; value: -10"),t.setAttribute("launchable",""),t.classList="blasterball";const n=CS1.myPlayer.object3D.position;t.object3D.position.set(n.x,n.y+4,n.z),CS1.scene.appendChild(t)},CS1.ui.controls.addMagicPellet=e=>{const t=document.createElement("a-sphere");t.setAttribute("color","purple"),t.setAttribute("scale","0.3 0.3 0.3"),t.setAttribute("collectible","affects:magicDial ; value:10; threshold:1.7"),t.setAttribute("grabbable",""),t.classList="magicpellet";const n=CS1.myPlayer.object3D.position;t.object3D.position.set(n.x,n.y+4,n.z),CS1.scene.appendChild(t)},CS1.playDMSound=!0,CS1.ui.controls.msgMuteToggle=e=>{const t=document.querySelector("#dm-sound-control");t.innerText.includes("")?(t.innerHTML="",CS1.playDMSound=!1):(t.innerHTML="",CS1.playDMSound=!0)},document.addEventListener("click",(function t(){e.setAttribute("sound","src:url(https://cdn.glitch.com/36918312-2de3-4283-951d-240b263949f7%2Fclick.mp3?v=1561929149589)"),document.removeEventListener("click",t)}));const d=document.querySelector("#menu1-b1");d&&(d.onclick=t=>{r.appendChild(e.firstChild),e.innerHTML="",CS1.__display__stats()});const p=document.querySelector("#menu1-b2");p&&(p.onclick=t=>{r.appendChild(e.firstChild),e.innerHTML="",e.appendChild(s)});const f=document.querySelector("#menu1-b3");f&&(f.onclick=t=>{r.appendChild(e.firstChild),e.innerHTML="",e.appendChild(l);const n=document.querySelectorAll(".main button ,.main.imgLink");n&&n.forEach(e=>{CS1.ui.controls.addHoverSound(e)})});const h=document.querySelector("#menu1-b4");h&&(h.onclick=t=>{r.appendChild(e.firstChild),e.innerHTML="",e.appendChild(c)});const m=document.querySelector("#menu2-b1");m&&m.addEventListener("click",e=>{e.preventDefault(),u.setAttribute("material",`src:${n.thumbnail}`),CS1.socket.playerData.faceIndex=0,CS1.myPlayer._avatarType=C.avatar.models[CS1.socket.playerData.faceIndex].type});const v=document.querySelector("#menu2-b2");v&&v.addEventListener("click",e=>{e.preventDefault(),u.setAttribute("material",`src:${i.thumbnail}`),CS1.socket.playerData.faceIndex=1,CS1.myPlayer._avatarType=C.avatar.models[CS1.socket.playerData.faceIndex].type});const _=document.querySelector("#menu2-b3");_&&_.addEventListener("click",e=>{e.preventDefault(),u.setAttribute("material",`src:${o.thumbnail}`),CS1.socket.playerData.faceIndex=2,CS1.myPlayer._avatarType=C.avatar.models[CS1.socket.playerData.faceIndex].type});const g=document.querySelector("#m2-b1-img"),y=document.querySelector("#m2-b1-name"),b=document.querySelector("#m2-b2-img"),x=document.querySelector("#m2-b2-name"),w=document.querySelector("#m2-b3-img"),S=document.querySelector("#m2-b3-name");g.src=n.thumbnail,b.src=i.thumbnail,w.src=o.thumbnail,y.innerHTML=n.name,x.innerHTML=i.name,S.innerHTML=o.name,CS1.ui.controls.addHoverSound=t=>{t.addEventListener("mouseenter",t=>{CS1.stats.container.getAttribute("visible")&&e.components.sound&&e.components.sound.playSound()})};const E=document.querySelectorAll(".menu button , .imgLink");E&&E.forEach(e=>{CS1.ui.controls.addHoverSound(e)})};AFRAME.registerSystem("vrui",{schema:{panels:{default:3}},dependencies:["htmlembed"],init:()=>{document.head.innerHTML+='<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">\n <style>\n body{\n   font-family: \'Roboto\', sans-serif;\n   \n   font-size: 32px;\n }\n h1{\n   font-size: 52px;\n }\n .dark{\n   background-color: rgba(0,0,0,0.2);\n   border-radius:50px;  \n   background-repeat: no-repeat;\n   background-position: bottom right;\n   padding: 40px;\n   color: #fff;\n }\n .main{\n   width: 1024px;\n   height: 900px;\n   overflow: hidden;\n }\n.main ul{\n   font-size: 26px;\n   margin: 0;\n   padding: 0;\n }\n .menu{\n   width: 256px;\n   height: 900px;\n   text-align: center;\n }\n .menu ul{\n   list-style-type: none;\n   margin: 0;\n   padding: 0;\n }\n .menu button,.main button{\n   display: inline-block;\n   width: 100%;\n   height: 100px;\n   border-radius: 20px;\n   background-color: #000;\n   color: #fff;\n   text-decoration: none;\n   text-align: center;\n   font-size: 32px;\n   padding: 10px 0;\n   margin-bottom: 20px;\n }\n .menu button:hover,.main button:hover{\n   background-color: #fff;\n   color: #888;\n }\n .menu button:active,.main button:active{\n   background-color: #fff;\n   color: #888;\n   box-shadow: 0px 0px 50px #00d2ff;\n }\n .imgLink{\n   width: 100%;\n   border-radius: 20px;\n   color: #fff!important;\n   text-decoration: none!important;\n   text-align: center;\n   padding: 10px 0;\n   margin-bottom: 20px;\n   background-color: #444;\n   border: 3px solid #444;\n   text-shadow: none;\n   display: block;\n }\n .imgLink:hover{\n   border: 3px solid #000;\n   background-color: #fff;\n   color:#000!important;\n }\n.imgLink:active{\n   background-color: #fff;\n   box-shadow: 0px 0px 50px #00d2ff;\n   color:#000!important;\n }\n.imgLink img , .imgLink div{\n  pointer-events: none;\n}\n .code{\n   white-space: pre;\n   font-size: 0.7em;\n   background-color: #000;\n   margin-bottom: 30px;\n }\n </style>\n';const e=document.createElement("a-entity");e.setAttribute("style","visibility:hidden"),e.setAttribute("vrui",""),e.id="embed-container",e.innerHTML='<a-entity id="menu1" class="screen menu dark"  position="-2.712 1.5 -1.476" rotation="0 45 0">\n  <h2>Menu</h2>\n  <ul>\n    <li><button id="menu1-b1" >Stats</button></li>\n    <li><button id="menu1-b2" >Mission</button></li>\n    <li><button id="menu1-b3" >Control Panel</button></li>\n    <li><button id="menu1-b4" >Direct Messages</button></li>\n  </ul>\n</a-entity>\n<a-entity id="main" class="screen dark main" position="0 1.5 -2"></a-entity>\n<a-entity id="menu2" class="screen menu dark" position="2.712 1.5 -1.476" rotation="0 -45 0">\n  <h2>Avatars</h2>\n  <a id="menu2-b1" class="imgLink" href="#">\n    <img id="m2-b1-img" crossorigin="anonymous"   src="./" width="80" height="80">\n    <div id="m2-b1-name"></div>\n  </a>\n  <a id="menu2-b2" class="imgLink" href="#">\n    <img id="m2-b2-img" crossorigin="anonymous"  src="./" width="80" height="80">\n    <div id="m2-b2-name"></div>\n  </a>\n  <a id="menu2-b3" class="imgLink" href="#">\n    <img id="m2-b3-img" crossorigin="anonymous" src="./" width="80" height="80">\n    <div id="m2-b3-name"></div>\n  </a>\n</a-entity>',e.setAttribute("scale",`${C.vrui.scale} ${C.vrui.scale} ${C.vrui.scale}`),document.querySelector("a-scene").appendChild(e),document.addEventListener("gameStart",e=>{const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.appendChild(CS1.stats.container),CS1.__display__stats=function(){const e=document.querySelector("#main");e.innerHTML="",e.appendChild(t)},document.querySelector("#main").appendChild(t),document.querySelector("a-scene");let n=document.querySelector("#embed-container");n.setAttribute("visible",!1),n.setAttribute("position",C.vrui.offset),CS1.myPlayer.add(n),CS1.stats.container=n;let i=document.querySelector("#main"),o=document.querySelector("#menu1"),r=document.querySelector("#menu2");i.setAttribute("htmlembed",""),o.setAttribute("htmlembed",""),r.setAttribute("htmlembed",""),x(),document.querySelectorAll(".dark").forEach(e=>{e.classList.remove("screen")});let a=CS1.myPlayer.components.player.lh.components["oculus-touch-controls"],s=CS1.myPlayer.components.player.rh.components["oculus-touch-controls"];"Oculus Quest"==CS1.device?(document.querySelector("a-cursor").pause(),CS1.cam.components.raycaster&&CS1.cam.components.raycaster.pause(),a.el.addEventListener("abuttondown",e=>{CS1.stats.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let t=CS1.stats.container.getAttribute("visible");CS1.stats.container.setAttribute("visible",!t),t?document.querySelectorAll(".dark").forEach(e=>{e.classList.remove("screen")}):document.querySelectorAll(".dark").forEach(e=>{e.classList.add("screen")})}),s.el.addEventListener("abuttondown",e=>{CS1.stats.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let t=CS1.stats.container.getAttribute("visible");CS1.stats.container.setAttribute("visible",!t),t?document.querySelectorAll(".dark").forEach(e=>{e.classList.remove("screen")}):document.querySelectorAll(".dark").forEach(e=>{e.classList.add("screen")})})):"Standard"==CS1.device?document.addEventListener("keypress",e=>{if("Backquote"==e.code){CS1.stats.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let e=CS1.stats.container.getAttribute("visible");CS1.stats.container.setAttribute("visible",!e),e?document.querySelectorAll(".dark").forEach(e=>{e.classList.remove("screen")}):document.querySelectorAll(".dark").forEach(e=>{e.classList.add("screen")})}}):"Mobile"==CS1.device&&document.addEventListener("doubleTapMenu",e=>{CS1.stats.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let t=CS1.stats.container.getAttribute("visible");CS1.stats.container.setAttribute("visible",!t),t?document.querySelectorAll(".dark").forEach(e=>{e.classList.remove("screen")}):document.querySelectorAll(".dark").forEach(e=>{e.classList.add("screen")})})})}}),AFRAME.registerComponent("chat",{schema:{inputColor:{default:"#fff"},keyboardColor:{default:"#fff"},highlightColor:{default:"#1a79dc"}},dependencies:["aframe-keyboard"],init:function(){CS1.socket.on("dm",e=>{CS1.log(`${e.name} - ${e.msg}`);const t=document.createElement("li");t.innerHTML=`<font color=${CS1.utils.toColor(CS1.utils.stringToInt(e.name))}>${e.name}</font> - ${e.msg}`,document.querySelector("#messages").appendChild(t),CS1.playDMSound&&CS1.sounds.tada.play()}),CS1.socket.on("msg",e=>{CS1.game.hasBegun&&CS1.__setPlayerMessage(e)}),this.container=document.createElement("a-entity"),this.container.setAttribute("visible",!1),this.input=document.createElement("a-text"),this.input.setAttribute("font","dejavu"),this.input.setAttribute("color",this.data.inputColor),this.input.setAttribute("value","Enter message ..."),this.input.setAttribute("scale","0.7 0.7 0.7"),this.input.setAttribute("rotation","-20 0 0"),this.input.setAttribute("position","-0.5 1.9 -1.5"),this.keyboard=document.createElement("a-entity"),this.keyboard.setAttribute("a-keyboard","dismissable:false"),this.keyboard.setAttribute("position","-1 1.6 -1.5"),this.keyboard.setAttribute("rotation","-20 0 0"),this.keyboard.setAttribute("scale","4 4 4"),this.container.appendChild(this.input),this.container.appendChild(this.keyboard),this.el.appendChild(this.container);const e=this;document.addEventListener("gameStart",t=>{e.normalKeys=document.querySelectorAll(".collidable"),document.querySelectorAll(".collidable").forEach(e=>{e.classList.remove("collidable")});const n=document.querySelector("#standard-chat-dummy");function i(){if(e.input.setAttribute("value",e.value),e.container.setAttribute("visible",!1),document.querySelectorAll(".collidable").forEach(e=>{e.classList.remove("collidable")}),e.keyboard.components["a-keyboard"].pause(),document.removeEventListener("a-keyboard-update",o),e.value.startsWith("@")){const t=e.value.substring(1,e.value.indexOf(" ")),n=e.value.substring(e.value.indexOf(" ")+1,e.value.length);CS1.socket.emit("dm",{msg:n,name:t})}else CS1.socket.emit("msg",{msg:e.value}),n.blur()}function o(t){switch(parseInt(t.detail.code)){case 8:e.value=e.value.slice(0,-1);break;case 999:case 13:return void i();default:if(!t.detail.value)return;40==t.detail.code&&(t.detail.value="\n"),e.value=e.value+t.detail.value}e.input.setAttribute("value",e.value+"_")}function r(t){switch(parseInt(t.detail.code)){case 8:e.value=e.value.slice(0,-1);break;case 999:return void function(){if(e.input.setAttribute("value",e.value),e.container.setAttribute("visible",!1),document.querySelectorAll(".collidable").forEach(e=>{e.classList.remove("collidable")}),e.keyboard.components["a-keyboard"].pause(),document.removeEventListener("a-keyboard-update",r),e.value.startsWith("@")){const t=e.value.substring(1,e.value.indexOf(" ")-1),n=e.value.substring(e.value.indexOf(" ")+1,e.value.length-1);CS1.socket.emit("dm",{msg:n,name:t})}else CS1.socket.emit("msg",{msg:e.value})}();default:if(!t.detail.value)return;40==t.detail.code&&(t.detail.value="\n"),e.value=e.value+t.detail.value}e.input.setAttribute("value",e.value+"_")}e.value="";let a=CS1.myPlayer.components.player.lh.components["oculus-touch-controls"],s=CS1.myPlayer.components.player.rh.components["oculus-touch-controls"];switch(CS1.device){case"Oculus Quest":document.querySelector("a-cursor").pause(),CS1.cam.components.raycaster&&CS1.cam.components.raycaster.pause(),a.el.addEventListener("bbuttondown",t=>{e.value="",e.input.setAttribute("value",e.value),document.addEventListener("a-keyboard-update",r),e.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let n=e.container.getAttribute("visible");e.container.setAttribute("visible",!n),e.keyboard.components["a-keyboard"].play(),n?document.querySelectorAll(".collidable").forEach(e=>{e.classList.remove("collidable")}):e.keys.forEach(e=>{e.classList.add("collidable")})}),s.el.addEventListener("bbuttondown",t=>{e.value="",e.input.setAttribute("value",e.value),document.addEventListener("a-keyboard-update",r),e.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let n=e.container.getAttribute("visible");e.container.setAttribute("visible",!n),e.keyboard.components["a-keyboard"].play(),n?document.querySelectorAll(".collidable").forEach(e=>{e.classList.remove("collidable")}):AFK.template.toggleActiveMode("normal")});break;case"Mobile":CS1.chatInput=document.querySelector("#mobile-chat-input"),CS1.chatInput.style.position="absolute",CS1.chatInput.style.top="10px",CS1.chatInput.style.margin="0 auto",CS1.chatInput.addEventListener("keydown",e=>{switch(e.keyCode){case 13:if(CS1.chatInput.value.startsWith("@")){const e=CS1.chatInput.value.substring(1,CS1.chatInput.value.indexOf(" ")),t=CS1.chatInput.value.substring(CS1.chatInput.value.indexOf(" ")+1,CS1.chatInput.value.length);return CS1.log(`dm msg: ${t}    dm to: ${e}`),CS1.socket.emit("dm",{msg:t,name:e}),CS1.chatInput.style.zIndex=-1e3,CS1.chatInput.style.top="-100px",void CS1.chatInput.blur()}CS1.socket.emit("msg",{msg:CS1.chatInput.value}),CS1.chatInput.style.zIndex=-1e3,CS1.chatInput.style.top="-100px",CS1.chatInput.blur()}}),document.addEventListener("doubleTapChat",e=>{-1e3==CS1.chatInput.style.zIndex?(CS1.chatInput.style.zIndex=200,CS1.chatInput.style.top="10px"):(CS1.chatInput.style.zIndex=-1e3,CS1.chatInput.style.top="-100px")});break;case"Standard":document.querySelector("#mobile-chat-input").setAttribute("style","position:absolute;top:-1000px");const t=document.querySelector("#standard-chat-dummy");document.addEventListener("keypress",n=>{if(61==n.keyCode){e.value="",e.input.setAttribute("value",e.value),document.addEventListener("a-keyboard-update",o),e.container.object3D.rotation.y=CS1.cam.object3D.rotation.y;let n=e.container.getAttribute("visible");e.container.setAttribute("visible",!n),e.keyboard.components["a-keyboard"].play(),n?document.querySelectorAll(".collidable").forEach(e=>{t.blur(),e.classList.remove("collidable")}):(AFK.template.toggleActiveMode("normal"),e.normalKeys.forEach(e=>{t.focus(),e.classList.add("collidable")}))}})}})}}),AFRAME.registerComponent("cs1-jukebox",{schema:{},init:function(){CS1.jukebox.audio.addEventListener("jukeboxplay",e=>{CS1.socket.emit("jukebox",{action:"play",index:e.detail.index,player:CS1.myPlayer.name}),CS1.log(`${CS1.myPlayer.name} is playing ${CS1.jukebox.songNames[e.detail.index]}.`)}),CS1.jukebox.audio.addEventListener("jukeboxpause",e=>{CS1.socket.emit("jukebox",{action:"pause",player:CS1.myPlayer.name}),CS1.log(`${CS1.myPlayer.name} has paused the jukebox.`)}),CS1.socket.on("jukebox",e=>{if(e.player!=CS1.myPlayer.name)switch(e.action){case"play":CS1.jukebox.play(e.index),CS1.log(`${e.player} is playing ${CS1.jukebox.songNames[e.index]}!`);break;case"pause":CS1.jukebox.pause(!1),CS1.log(`${e.player} has paused the jukebox!`)}})}}),AFRAME.registerComponent("jump",{schema:{speed:{default:8},g:{default:-9.8}},init:function(){switch(this.el.isJumping=!1,this.forwardVelocity=-this.data.speed,this.verticalVelocity=0,this.jumpEvent=new Event("jump"),this.landEvent=new Event("land"),this.jumpDirection=new THREE.Vector3,CS1.device){case"Oculus Quest":const e=CS1.myPlayer.components.player.lh.components["oculus-touch-controls"];AFRAME.utils.device.checkHeadsetConnected()&&e.el.addEventListener("xbuttondown",e=>{this.jump()});break;case"Standard":document.addEventListener("keydown",e=>{"Space"!=e.code||this.el.isJumping||this.jump()});break;case"Mobile":document.body.addEventListener("touchstart",e=>{let t=(new Date).getTime()-this.lastJumpTap;t<300&&t>0&&e.changedTouches[0].pageY>window.innerHeight/2&&this.jump(),this.lastJumpTap=(new Date).getTime()})}},tick:function(e,t){this.el.isJumping&&(this.verticalVelocity+=this.data.g*t/1e3,this.el.object3D.position.addScaledVector(this.jumpDirection,this.forwardVelocity*t/1500),this.el.object3D.translateY(this.verticalVelocity*t/1e3),this.verticalVelocity<0&&this.el.object3D.position.y<=0&&this.land())},jump:function(e){this.el.components["movement-controls"].pause(),this.el.isJumping=!0,CS1.cam.object3D.getWorldDirection(this.jumpDirection),this.jumpDirection.y=this.jumpDirection.y>=0?-.02:this.jumpDirection.y,this.jumpDirection.x/=2,this.jumpDirection.z/=2,this.verticalVelocity=e||this.data.speed,this.el.dispatchEvent(this.jumpEvent)},land:function(){this.el.isJumping=!1,this.verticalVelocity=0,this.el.object3D.position.y=0,this.el.components["movement-controls"].play(),this.el.dispatchEvent(this.landEvent)}}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).SimplePeer=e()}((function(){var e=Math.floor,t=Math.abs,n=Math.pow;return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){function i(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function o(e){return a[63&e>>18]+a[63&e>>12]+a[63&e>>6]+a[63&e]}function r(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),r.push(o(i));return r.join("")}n.byteLength=function(e){var t=i(e),n=t[0],o=t[1];return 3*(n+o)/4-o},n.toByteArray=function(e){var t,n,o=i(e),r=o[0],a=o[1],c=new l(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),u=0,d=0<a?r-4:r;for(n=0;n<d;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],c[u++]=255&t>>16,c[u++]=255&t>>8,c[u++]=255&t;return 2===a&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===a&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,c[u++]=255&t>>8,c[u++]=255&t),c},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,l=0,c=n-i;l<c;l+=s)o.push(r(e,l,l+s>c?c:l+s));return 1===i?(t=e[n-1],o.push(a[t>>2]+a[63&t<<4]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(a[t>>10]+a[63&t>>4]+a[63&t<<2]+"=")),o.join("")};for(var a=[],s=[],l="undefined"==typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=c.length;u<d;++u)a[u]=c[u],s[c.charCodeAt(u)]=u;s[45]=62,s[95]=63},{}],2:[function(){},{}],3:[function(e,t,i){(function(t){var o=String.fromCharCode,r=Math.min;function a(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,n,i){if("string"==typeof e)return u(e,n);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer))return function(e,n,i){if(0>n||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(i||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),Object.setPrototypeOf(o,t.prototype),o}(e,n,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return t.from(o,n,i);var r=p(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),a(0>e?0:0|f(e))}function u(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=0|h(e,n),o=a(i),r=o.write(e,n);return r!==i&&(o=o.slice(0,r)),o}function d(e){for(var t=0>e.length?0:0|f(e.length),n=a(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e){if(t.isBuffer(e)){var n=0|f(e.length),i=a(n);return 0===i.length?i:(e.copy(i,0,0,n),i)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0:"number"!=typeof e.length||U(e.length)?a(0):d(e)}function f(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function h(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return L(e).length;default:if(r)return o?-1:I(e).length;n=(""+n).toLowerCase(),r=!0}}function m(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function _(e,n,i,o,r){if(0===e.length)return-1;if("string"==typeof i?(o=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),U(i=+i)&&(i=r?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(0>i){if(!r)return-1;i=0}if("string"==typeof n&&(n=t.from(n,o)),t.isBuffer(n))return 0===n.length?-1:g(e,n,i,o,r);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,n,i):Uint8Array.prototype.lastIndexOf.call(e,n,i):g(e,[n],i,o,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,o){function r(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var a,s=1,l=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>e.length||2>t.length)return-1;s=2,l/=2,c/=2,n/=2}if(o){var u=-1;for(a=n;a<l;a++)if(r(e,a)!==r(t,-1===u?0:a-u))-1!==u&&(a-=a-u),u=-1;else if(-1===u&&(u=a),a-u+1===c)return u*s}else for(n+c>l&&(n=l-c),a=n;0<=a;a--){for(var d=!0,p=0;p<c;p++)if(r(e,a+p)!==r(t,p)){d=!1;break}if(d)return a}return-1}function y(e,t,n,i){n=+n||0;var o=e.length-n;i?(i=+i)>o&&(i=o):i=o;var r=t.length;i>r/2&&(i=r/2);for(var a,s=0;s<i;++s){if(U(a=parseInt(t.substr(2*s,2),16)))return s;e[n+s]=a}return s}function b(e,t,n,i){return j(I(t,e.length-n),e,n,i)}function C(e,t,n,i){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return C(e,t,n,i)}function w(e,t,n,i){return j(L(t),e,n,i)}function S(e,t,n,i){return j(function(e,t){for(var n,i,o,r=[],a=0;a<e.length&&!(0>(t-=2));++a)n=e.charCodeAt(a),i=n>>8,o=n%256,r.push(o),r.push(i);return r}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?B.fromByteArray(e):B.fromByteArray(e.slice(t,n))}function T(e,t,n){n=r(e.length,n);for(var i=[],a=t;a<n;){var s,l,c,u,d=e[a],p=null,f=239<d?4:223<d?3:191<d?2:1;a+f<=n&&(1===f?128>d&&(p=d):2===f?128==(192&(s=e[a+1]))&&127<(u=(31&d)<<6|63&s)&&(p=u):3===f?(s=e[a+1],l=e[a+2],128==(192&s)&&128==(192&l)&&2047<(u=(15&d)<<12|(63&s)<<6|63&l)&&(55296>u||57343<u)&&(p=u)):4===f&&(s=e[a+1],l=e[a+2],c=e[a+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&65535<(u=(15&d)<<18|(63&s)<<12|(63&l)<<6|63&c)&&1114112>u&&(p=u))),null===p?(p=65533,f=1):65535<p&&(p-=65536,i.push(55296|1023&p>>>10),p=56320|1023&p),i.push(p),a+=f}return function(e){var t=e.length;if(t<=4096)return o.apply(String,e);for(var n="",i=0;i<t;)n+=o.apply(String,e.slice(i,i+=4096));return n}(i)}function P(e,t,n){var i="";n=r(e.length,n);for(var a=t;a<n;++a)i+=o(127&e[a]);return i}function A(e,t,n){var i="";n=r(e.length,n);for(var a=t;a<n;++a)i+=o(e[a]);return i}function R(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var o="",r=t;r<n;++r)o+=H[e[r]];return o}function k(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=o(i[a]+256*i[a+1]);return r}function z(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,n,i,o,r,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>r||n<a)throw new RangeError('"value" argument is out of bounds');if(i+o>e.length)throw new RangeError("Index out of range")}function D(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function F(e,t,n,i,o){return t=+t,n>>>=0,o||D(e,0,n,4),G.write(e,t,n,i,23,4),n+4}function N(e,t,n,i,o){return t=+t,n>>>=0,o||D(e,0,n,8),G.write(e,t,n,i,52,8),n+8}function I(e,t){t=t||1/0;for(var n,i=e.length,o=null,r=[],a=0;a<i;++a){if(55295<(n=e.charCodeAt(a))&&57344>n){if(!o){if(56319<n){-1<(t-=3)&&r.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&r.push(239,191,189);continue}o=n;continue}if(56320>n){-1<(t-=3)&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&r.push(239,191,189);if(o=null,128>n){if(0>(t-=1))break;r.push(n)}else if(2048>n){if(0>(t-=2))break;r.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;r.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;r.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return r}function L(e){return B.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(V,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function j(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var B=e("base64-js"),G=e("ieee754"),q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=t,i.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},i.INSPECT_MAX_BYTES=50,i.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(t){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){return t.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){return t.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return function(e,t,n){return l(e),0>=e?a(e):void 0===t?a(e):"string"==typeof n?a(e).fill(t,n):a(e).fill(t)}(e,t,n)},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),O(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var i=e.length,o=n.length,a=0,s=r(i,o);a<s;++a)if(e[a]!==n[a]){i=e[a],o=n[a];break}return i<o?-1:o<i?1:0},t.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;++i)n+=e[i].length;var o=t.allocUnsafe(n),r=0;for(i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,r),r+=a.length}return o},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):m.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},q&&(t.prototype[q]=t.prototype.inspect),t.prototype.compare=function(e,n,i,o,a){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===i&&(i=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),0>n||i>e.length||0>o||a>this.length)throw new RangeError("out of range index");if(o>=a&&n>=i)return 0;if(o>=a)return-1;if(n>=i)return 1;if(this===e)return 0;for(var s=(a>>>=0)-(o>>>=0),l=(i>>>=0)-(n>>>=0),c=r(s,l),u=this.slice(o,a),d=e.slice(n,i),p=0;p<c;++p)if(u[p]!==d[p]){s=u[p],l=d[p];break}return s<l?-1:l<s?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},t.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,n){var i=this.length;0>(e=~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),0>(n=void 0===n?i:~~n)?0>(n+=i)&&(n=0):n>i&&(n=i),n<e&&(n=e);var o=this.subarray(e,n);return Object.setPrototypeOf(o,t.prototype),o},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return i},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var i=this[e+--t],o=1;0<t&&(o*=256);)i+=this[e+--t]*o;return i},t.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||z(e,t,this.length);for(var o=this[e],r=1,a=0;++a<t&&(r*=256);)o+=this[e+a]*r;return o>=(r*=128)&&(o-=n(2,8*t)),o},t.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||z(e,t,this.length);for(var o=t,r=1,a=this[e+--o];0<o&&(r*=256);)a+=this[e+--o]*r;return a>=(r*=128)&&(a-=n(2,8*t)),a},t.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),G.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),G.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),G.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),G.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,i,o){e=+e,t>>>=0,i>>>=0,o||M(this,e,t,i,n(2,8*i)-1,0);var r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=255&e/r;return t+i},t.prototype.writeUIntBE=function(e,t,i,o){e=+e,t>>>=0,i>>>=0,o||M(this,e,t,i,n(2,8*i)-1,0);var r=i-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=255&e/a;return t+i},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,i,o){if(e=+e,t>>>=0,!o){var r=n(2,8*i-1);M(this,e,t,i,r-1,-r)}var a=0,s=1,l=0;for(this[t]=255&e;++a<i&&(s*=256);)0>e&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=255&(e/s>>0)-l;return t+i},t.prototype.writeIntBE=function(e,t,i,o){if(e=+e,t>>>=0,!o){var r=n(2,8*i-1);M(this,e,t,i,r-1,-r)}var a=i-1,s=1,l=0;for(this[t+a]=255&e;0<=--a&&(s*=256);)0>e&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=255&(e/s>>0)-l;return t+i},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.copy=function(e,n,i,o){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),0<o&&o<i&&(o=i),o===i)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("Index out of range");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-i&&(o=e.length-n+i);var r=o-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,i,o);else if(this===e&&i<n&&n<o)for(var a=r-1;0<=a;--a)e[a+n]=this[a+i];else Uint8Array.prototype.set.call(e,this.subarray(i,o),n);return r},t.prototype.fill=function(e,n,i,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var r=e.charCodeAt(0);("utf8"===o&&128>r||"latin1"===o)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=+e);if(0>n||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;var a;if(n>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(a=n;a<i;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,o),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-n;++a)this[a+n]=s[a%l]}return this};var V=/[^+/0-9A-Za-z-_]/g,H=function(){for(var e,t="0123456789abcdef",n=Array(256),i=0;16>i;++i){e=16*i;for(var o=0;16>o;++o)n[e+o]=t[i]+t[o]}return n}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:8}],4:[function(e,t,n){(function(i){n.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(n);const{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,e("_process"))},{"./common":5,_process:11}],5:[function(e,n){n.exports=function(n){function i(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return o.colors[t(n)%o.colors.length]}function o(e){function t(...e){if(!t.enabled)return;const i=t,r=+new Date,a=r-(n||r);i.diff=a,i.prev=n,i.curr=r,n=r,e[0]=o.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return t;s++;const r=o.formatters[n];if("function"==typeof r){const n=e[s];t=r.call(i,n),e.splice(s,1),s--}return t}),o.formatArgs.call(i,e),(i.log||o.log).apply(i,e)}let n;return t.namespace=e,t.enabled=o.enabled(e),t.useColors=o.useColors(),t.color=i(e),t.destroy=r,t.extend=a,"function"==typeof o.init&&o.init(t),o.instances.push(t),t}function r(){const e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function a(e,t){const n=o(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(e){return e instanceof Error?e.stack||e.message:e},o.disable=function(){const e=[...o.names.map(s),...o.skips.map(s).map(e=>"-"+e)].join(",");return o.enable(""),e},o.enable=function(e){let t;o.save(e),o.names=[],o.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){const e=o.instances[t];e.enabled=o.enabled(e.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=e("ms"),Object.keys(n).forEach(e=>{o[e]=n[e]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=i,o.enable(o.load()),o}},{ms:10}],6:[function(e,t){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=m(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function o(e,t,n){if(t)e.call(n);else for(var i=e.length,o=h(e,i),r=0;r<i;++r)o[r].call(n)}function r(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,r=h(e,o),a=0;a<o;++a)r[a].call(n,i)}function a(e,t,n,i,o){if(t)e.call(n,i,o);else for(var r=e.length,a=h(e,r),s=0;s<r;++s)a[s].call(n,i,o)}function s(e,t,n,i,o,r){if(t)e.call(n,i,o,r);else for(var a=e.length,s=h(e,a),l=0;l<a;++l)s[l].call(n,i,o,r)}function l(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,r=h(e,o),a=0;a<o;++a)r[a].apply(n,i)}function c(e,t,n,o){var r,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=m(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),!s.warned&&(r=i(e))&&0<r&&s.length>r){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+t+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=a[t]=n,++e._eventsCount;return e}function u(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=_.call(u,i);return o.listener=n,i.wrapFn=o,o}function p(e,t,n){var i=e._events;if(!i)return[];var o=i[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length):[]}function f(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function h(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e[i];return n}var m=Object.create||function(e){var t=function(){};return t.prototype=e,new t},v=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},_=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var g,y=10;try{var b={};Object.defineProperty&&Object.defineProperty(b,"x",{value:0}),g=0===b.x}catch(e){g=!1}g?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if("number"!=typeof e||0>e||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');y=e}}):n.defaultMaxListeners=y,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(e){var t,n,i,c,u,d,p="error"===e;if(d=this._events)p=p&&null==d.error;else if(!p)return!1;if(p){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var f=new Error('Unhandled "error" event. ('+t+")");throw f.context=t,f}if(!(n=d[e]))return!1;var h="function"==typeof n;switch(i=arguments.length){case 1:o(n,h,this);break;case 2:r(n,h,this,arguments[1]);break;case 3:a(n,h,this,arguments[1],arguments[2]);break;case 4:s(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(c=Array(i-1),u=1;u<i;u++)c[u-1]=arguments[u];l(n,h,this,c)}return!0},n.prototype.addListener=function(e,t){return c(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return c(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,d(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,d(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,i,o,r,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=m(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;0<=r;r--)if(n[r]===t||n[r].listener===t){a=n[r].listener,o=r;break}if(0>o)return this;0===o?n.shift():function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=m(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=m(null):delete n[e]),this;if(0===arguments.length){var o,r=v(n);for(i=0;i<r.length;++i)"removeListener"===(o=r[i])||this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=m(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},n.prototype.listeners=function(e){return p(this,e,!0)},n.prototype.rawListeners=function(e){return p(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],7:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],8:[function(i,o,r){r.read=function(e,t,i,o,r){var a,s,l=8*r-o-1,c=(1<<l)-1,u=c>>1,d=-7,p=i?r-1:0,f=i?-1:1,h=e[t+p];for(p+=f,a=h&(1<<-d)-1,h>>=-d,d+=l;0<d;a=256*a+e[t+p],p+=f,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=o;0<d;s=256*s+e[t+p],p+=f,d-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(h?-1:1);s+=n(2,o),a-=u}return(h?-1:1)*s*n(2,a-o)},r.write=function(i,o,r,a,s,l){var c,u,d,p=Math.LN2,f=Math.log,h=8*l-s-1,m=(1<<h)-1,v=m>>1,_=23===s?n(2,-24)-n(2,-77):0,g=a?0:l-1,y=a?1:-1,b=0>o||0===o&&0>1/o?1:0;for(o=t(o),isNaN(o)||o===1/0?(u=isNaN(o)?1:0,c=m):(c=e(f(o)/p),1>o*(d=n(2,-c))&&(c--,d*=2),2<=(o+=1<=c+v?_/d:_*n(2,1-v))*d&&(c++,d/=2),c+v>=m?(u=0,c=m):1<=c+v?(u=(o*d-1)*n(2,s),c+=v):(u=o*n(2,v-1)*n(2,s),c=0));8<=s;i[r+g]=255&u,g+=y,u/=256,s-=8);for(c=c<<s|u,h+=s;0<h;i[r+g]=255&c,g+=y,c/=256,h-=8);i[r+g-y]|=128*b}},{}],9:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],10:[function(e,n){var i=Math.round;function o(e){var n=t(e);return 864e5<=n?i(e/864e5)+"d":36e5<=n?i(e/36e5)+"h":6e4<=n?i(e/6e4)+"m":1e3<=n?i(e/1e3)+"s":e+"ms"}function r(e){var n=t(e);return 864e5<=n?a(e,n,864e5,"day"):36e5<=n?a(e,n,36e5,"hour"):6e4<=n?a(e,n,6e4,"minute"):1e3<=n?a(e,n,1e3,"second"):e+" ms"}function a(e,t,n,o){return i(e/n)+" "+o+(t>=1.5*n?"s":"")}n.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();return"years"===i||"year"===i||"yrs"===i||"yr"===i||"y"===i?315576e5*n:"weeks"===i||"week"===i||"w"===i?6048e5*n:"days"===i||"day"===i||"d"===i?864e5*n:"hours"===i||"hour"===i||"hrs"===i||"hr"===i||"h"===i?36e5*n:"minutes"===i||"minute"===i||"mins"===i||"min"===i||"m"===i?6e4*n:"seconds"===i||"second"===i||"secs"===i||"sec"===i||"s"===i?1e3*n:"milliseconds"===i||"millisecond"===i||"msecs"===i||"msec"===i||"ms"===i?n:void 0}}}(e);if("number"===n&&isFinite(e))return t.long?r(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],11:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(){h&&p&&(h=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!h){var e=o(r);h=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,h=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,u,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var p,f=[],h=!1,m=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new s(e,t)),1!==f.length||h||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],12:[function(e,t){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask:e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},{}],13:[function(e,t){(function(n,i){var o=e("safe-buffer").Buffer,r=i.crypto||i.msCrypto;t.exports=r&&r.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var i=o.allocUnsafe(e);if(0<e)if(65536<e)for(var a=0;a<e;a+=65536)r.getRandomValues(i.slice(a,a+65536));else r.getRandomValues(i);return"function"==typeof t?n.nextTick((function(){t(null,i)})):i}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{_process:11,"safe-buffer":29}],14:[function(e,t){function n(e,t,n){function i(e,n,i){return"string"==typeof t?t:t(e,n,i)}n||(n=Error);var r=function(e){function t(t,n,o){return e.call(this,i(t,n,o))||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(n);r.prototype.name=n.name,r.prototype.code=e,o[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return e+""})),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}var o={};n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var o,r;if("string"==typeof t&&function(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}(t,"not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))r="The ".concat(e," ").concat(o," ").concat(i(t,"type"));else{var a=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";r='The "'.concat(e,'" ').concat(a," ").concat(o," ").concat(i(t,"type"))}return r+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=o},{}],15:[function(e,t){(function(e){var n=new Set;t.exports.emitExperimentalWarning=e.emitWarning?function(t){n.has(t)||(n.add(t),e.emitWarning(t+" is an experimental feature. This feature could change at any time","ExperimentalWarning"))}:function(){}}).call(this,e("_process"))},{_process:11}],16:[function(e,t){(function(n){function i(e){return this instanceof i?(s.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",o))))):new i(e)}function o(){this._writableState.ended||n.nextTick(r,this)}function r(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=i;var s=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(i,s);for(var c,u=a(l.prototype),d=0;d<u.length;d++)c=u[d],i.prototype[c]||(i.prototype[c]=l.prototype[c]);Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:11,inherits:9}],17:[function(e,t){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform");e("inherits")(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:9}],18:[function(e,t){(function(n,i){function o(t,n,i){x=x||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof x),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=D(this,t,"readableHighWaterMark",i),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!R&&(R=e("string_decoder/").StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function r(t){if(x=x||e("./_stream_duplex"),!(this instanceof r))return new r(t);var n=this instanceof x;this._readableState=new o(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),E.call(this)}function a(e,t,n,i,o){w("readableAddChunk",t);var r,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?u(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,d(e)))}}(e,a);else if(o||(r=l(a,t)),r)e.emit("error",r);else if(a.objectMode||t&&0<t.length)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===T.prototype||(t=function(e){return T.from(e)}(t)),i)a.endEmitted?e.emit("error",new j):s(e,a,t,!0);else if(a.ended)e.emit("error",new I);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?s(e,a,t,!1):p(e,a)):s(e,a,t,!1)}else i||(a.reading=!1,p(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function s(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&u(e)),p(e,t)}function l(e,t){var n;return function(e){return T.isBuffer(e)||e instanceof P}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new N("chunk",["string","Buffer","Uint8Array"],t)),n}function c(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=function(e){return 8388608<=e?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function u(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(d,e))}function d(e){var t=e._readableState;w("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,_(e)}function p(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(f,e,t))}function f(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(w("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function h(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function m(e){w("readable nexttick read 0"),e.read(0)}function v(e,t){w("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;for(w("flow",t.flowing);t.flowing&&null!==e.read(););}function g(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function y(e){var t=e._readableState;w("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(b,t,e))}function b(e,t){w("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var x;t.exports=r,r.ReadableState=o,e("events").EventEmitter;var w,S=function(e,t){return e.listeners(t).length},E=e("./internal/streams/stream"),T=e("buffer").Buffer,P=i.Uint8Array||function(){},A=e("util");w=A&&A.debuglog?A.debuglog("stream"):function(){};var R,k,z=e("./internal/streams/buffer_list"),M=e("./internal/streams/destroy"),D=e("./internal/streams/state").getHighWaterMark,F=e("../errors").codes,N=F.ERR_INVALID_ARG_TYPE,I=F.ERR_STREAM_PUSH_AFTER_EOF,L=F.ERR_METHOD_NOT_IMPLEMENTED,j=F.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O=e("../experimentalWarning").emitExperimentalWarning;e("inherits")(r,E);var U=["error","close","destroy","pause","resume"];Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),r.prototype.destroy=M.destroy,r.prototype._undestroy=M.undestroy,r.prototype._destroy=function(e,t){t(e)},r.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=T.from(e,t),t=""),n=!0),a(this,e,t,!1,n)},r.prototype.unshift=function(e){return a(this,e,null,!0,!1)},r.prototype.isPaused=function(){return!1===this._readableState.flowing},r.prototype.setEncoding=function(t){return R||(R=e("string_decoder/").StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=this._readableState.decoder.encoding,this},r.prototype.read=function(e){w("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return w("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?y(this):u(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&y(this),null;var i,o=t.needReadable;return w("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&w("length less than watermark",o=!0),t.ended||t.reading?w("reading or ended",o=!1):o&&(w("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=c(n,t))),null===(i=0<e?g(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&y(this)),null!==i&&this.emit("data",i),i},r.prototype._read=function(){this.emit("error",new L("_read()"))},r.prototype.pipe=function(e,t){function i(e,t){w("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,r())}function o(){w("onend"),e.end()}function r(){w("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",h),e.removeListener("error",s),e.removeListener("unpipe",i),d.removeListener("end",o),d.removeListener("end",u),d.removeListener("data",a),m=!0,p.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}function a(t){w("ondata");var n=e.write(t);w("dest.write",n),!1===n&&((1===p.pipesCount&&p.pipes===e||1<p.pipesCount&&-1!==C(p.pipes,e))&&!m&&(w("false write response, pause",p.awaitDrain),p.awaitDrain++),d.pause())}function s(t){w("onerror",t),u(),e.removeListener("error",s),0===S(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),u()}function c(){w("onfinish"),e.removeListener("close",l),u()}function u(){w("unpipe"),d.unpipe(e)}var d=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,w("pipe count=%d opts=%j",p.pipesCount,t);var f=t&&!1===t.end||e===n.stdout||e===n.stderr?u:o;p.endEmitted?n.nextTick(f):d.once("end",f),e.on("unpipe",i);var h=function(e){return function(){var t=e._readableState;w("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&S(e,"data")&&(t.flowing=!0,_(e))}}(d);e.on("drain",h);var m=!1;return d.on("data",a),function(e,t,n){"function"==typeof e.prependListener?e.prependListener(t,n):e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",s),e.once("close",l),e.once("finish",c),e.emit("pipe",d),p.flowing||(w("pipe resume"),d.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var a=C(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},r.prototype.on=function(e,t){var i=E.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=0<this.listenerCount("readable"),!1!==o.flowing&&this.resume()):"readable"==e&&!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,w("on readable",o.length,o.reading),o.length?u(this):!o.reading&&n.nextTick(m,this)),i},r.prototype.addListener=r.prototype.on,r.prototype.removeListener=function(e,t){var i=E.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(h,this),i},r.prototype.removeAllListeners=function(e){var t=E.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(h,this),t},r.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(v,e,t))}(this,e)),e.paused=!1,this},r.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},r.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var o in e.on("end",(function(){if(w("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){w("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||!(n.objectMode||o&&o.length)||t.push(o)||(i=!0,e.pause())})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var r=0;r<U.length;r++)e.on(U[r],this.emit.bind(this,U[r]));return this._read=function(t){w("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(r.prototype[Symbol.asyncIterator]=function(){return O("Readable[Symbol.asyncIterator]"),void 0===k&&(k=e("./internal/streams/async_iterator")),k(this)}),Object.defineProperty(r.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(r.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(r.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),r._fromList=g,Object.defineProperty(r.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":14,"../experimentalWarning":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/state":26,"./internal/streams/stream":27,_process:11,buffer:3,events:6,inherits:9,"string_decoder/":30,util:2}],19:[function(e,t){function n(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new l);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function i(e){return this instanceof i?(d.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",o)):new i(e)}function o(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush((function(t,n){r(e,t,n)}))}function r(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new c;return e.push(null)}t.exports=i;var a=e("../errors").codes,s=a.ERR_METHOD_NOT_IMPLEMENTED,l=a.ERR_MULTIPLE_CALLBACK,c=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=a.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(i,d),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){n(new s("_transform()"))},i.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var o=this._readableState;(i.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},i.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":14,"./_stream_duplex":16,inherits:9}],20:[function(e,t){(function(n,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var o=i.callback;t.pendingcb--,o(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}function r(){}function a(t,n,i){b=b||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof b),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=P(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function s(t){var n=this instanceof(b=b||e("./_stream_duplex"));return n||C.call(s,this)?(this._writableState=new a(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void w.call(this)):new s(t)}function l(e,t){var i=new N;e.emit("error",i),n.nextTick(t,i)}function c(e,t,i,o){var r;return null===i?r=new F:"string"!=typeof i&&!t.objectMode&&(r=new R("chunk",["string","Buffer"],i)),!r||(e.emit("error",r),n.nextTick(o,r),!1)}function u(e,t,n,i,o,r){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=S.from(t,n)),t}(t,i,o);i!==a&&(n=!0,o="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:o,isBuf:n,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,s,i,o,r);return l}function d(e,t,n,i,o,r,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new D("write")):n?e._writev(o,t.onwrite):e._write(o,r,t.onwrite),t.sync=!1}function p(e,t){var i=e._writableState,o=i.sync,r=i.writecb;if("function"!=typeof r)throw new z;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,o,r){--t.pendingcb,i?(n.nextTick(r,o),n.nextTick(g,e,t),e._writableState.errorEmitted=!0,e.emit("error",o)):(r(o),e._writableState.errorEmitted=!0,e.emit("error",o),g(e,t))}(e,i,o,t,r);else{var a=m(i)||e.destroyed;a||i.corked||i.bufferProcessing||!i.bufferedRequest||h(e,i),o?n.nextTick(f,e,i,a,r):f(e,i,a,r)}}function f(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),g(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=Array(i),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,d(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,p=n.callback;if(d(e,t,!1,t.objectMode?1:c.length,c,u,p),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),g(e,t)}))}function _(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(v,e,t)))}function g(e,t){var n=m(t);return n&&(_(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function y(e,t,i){t.ending=!0,g(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}var b;t.exports=s,s.WritableState=a;var C,x={deprecate:e("util-deprecate")},w=e("./internal/streams/stream"),S=e("buffer").Buffer,E=i.Uint8Array||function(){},T=e("./internal/streams/destroy"),P=e("./internal/streams/state").getHighWaterMark,A=e("../errors").codes,R=A.ERR_INVALID_ARG_TYPE,k=A.ERR_METHOD_NOT_IMPLEMENTED,z=A.ERR_MULTIPLE_CALLBACK,M=A.ERR_STREAM_CANNOT_PIPE,D=A.ERR_STREAM_DESTROYED,F=A.ERR_STREAM_NULL_VALUES,N=A.ERR_STREAM_WRITE_AFTER_END,I=A.ERR_UNKNOWN_ENCODING;e("inherits")(s,w),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:x.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!C.call(this,e)||!(this!==s)&&e&&e._writableState instanceof a}})):C=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new M)},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1,a=!i.objectMode&&function(e){return S.isBuffer(e)||e instanceof E}(e);return a&&!S.isBuffer(e)&&(e=function(e){return S.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":!t&&(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ending?l(this,n):(a||c(this,i,e,n))&&(i.pendingcb++,o=u(this,i,a,e,t,n)),o},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&h(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new I(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),s.prototype._write=function(e,t,n){n(new k("_write()"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||y(this,i,n),this},Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),s.prototype.destroy=T.destroy,s.prototype._undestroy=T.undestroy,s.prototype._destroy=function(e,t){t(e)}}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":14,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":26,"./internal/streams/stream":27,_process:11,buffer:3,inherits:9,"util-deprecate":31}],21:[function(e,t){(function(n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return{value:e,done:t}}function r(e){var t=e[c];if(null!==t){var n=e[m].read();null!==n&&(e[f]=null,e[c]=null,e[u]=null,t(o(n,!1)))}}function a(e){n.nextTick(r,e)}var s,l=e("./end-of-stream"),c=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),p=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),m=Symbol("stream"),v=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((s={get stream(){return this[m]},next:function(){var e=this,t=this[d];if(null!==t)return Promise.reject(t);if(this[p])return Promise.resolve(o(void 0,!0));if(this[m].destroyed)return new Promise((function(t,i){n.nextTick((function(){e[d]?i(e[d]):t(o(void 0,!0))}))}));var i,r=this[f];if(r)i=new Promise(function(e,t){return function(n,i){e.then((function(){return t[p]?void n(o(void 0,!0)):void t[h](n,i)}),i)}}(r,this));else{var a=this[m].read();if(null!==a)return Promise.resolve(o(a,!1));i=new Promise(this[h])}return this[f]=i,i}},i(s,Symbol.asyncIterator,(function(){return this})),i(s,"return",(function(){var e=this;return new Promise((function(t,n){e[m].destroy(null,(function(e){return e?void n(e):void t(o(void 0,!0))}))}))})),s),v);t.exports=function(e){var t,n=Object.create(_,(i(t={},m,{value:e,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,d,{value:null,writable:!0}),i(t,p,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var i=n[m].read();i?(n[f]=null,n[c]=null,n[u]=null,e(o(i,!1))):(n[c]=e,n[u]=t)},writable:!0}),t));return n[f]=null,l(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[f]=null,n[c]=null,n[u]=null,t(e)),void(n[d]=e)}var i=n[c];null!==i&&(n[f]=null,n[c]=null,n[u]=null,i(o(void 0,!0))),n[p]=!0})),e.on("readable",a.bind(null,n)),n}}).call(this,e("_process"))},{"./end-of-stream":24,_process:11}],22:[function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){o.prototype.copy.call(e,t,n)}var o=e("buffer").Buffer,r=e("util").inspect,a=r&&r.custom||"inspect";t.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var o=t.data,r=e>o.length?o.length:e;if(i+=r===o.length?o:o.slice(0,e),0==(e-=r)){r===o.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=o.slice(r));break}++n}return this.length-=n,i},t._getBuffer=function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++i,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=r.slice(a));break}++i}return this.length-=i,t},t[a]=function(e,t){return r(this,function(e){for(var t=1;t<arguments.length;t++){var i=null==arguments[t]?{}:arguments[t],o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),o.forEach((function(t){n(e,t,i[t])}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){function n(e,t){o(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}t.exports={destroy:function(t,r){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(r?r(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&e.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?(e.nextTick(n,a,t),a._writableState&&(a._writableState.errorEmitted=!0)):r?(e.nextTick(i,a),r(t)):e.nextTick(i,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}).call(this,e("_process"))},{_process:11}],24:[function(e,t){function n(){}var i=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=function e(t,o,r){if("function"==typeof o)return e(t,null,o);o||(o={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];e.apply(this,i)}}}(r||n);var a=o.readable||!1!==o.readable&&t.readable,s=o.writable||!1!==o.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){s=!1,c=!0,a||r.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){a=!1,d=!0,s||r.call(t)},f=function(e){r.call(t,e)},h=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new i),r.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new i),r.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",h),t.req?m():t.on("request",m)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",p),t.on("finish",u),!1!==o.error&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",p),t.removeListener("error",f),t.removeListener("close",h)}}},{"../../../errors":14}],25:[function(e,t){function n(e){if(e)throw e}function i(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var r=!1;t.on("close",(function(){r=!0})),void 0===s&&(s=e("./end-of-stream")),s(t,{readable:n,writable:i},(function(e){return e?o(e):(r=!0,void o())}));var a=!1;return function(e){if(!r)return a?void 0:(a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new u("pipe")))}}function o(e){e()}function r(e,t){return e.pipe(t)}function a(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():n}var s,l=e("../../../errors").codes,c=l.ERR_MISSING_ARGS,u=l.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=a(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new c("streams");var l,u=t.map((function(e,n){var r=n<t.length-1;return i(e,r,0<n,(function(e){l||(l=e),e&&u.forEach(o),r||(u.forEach(o),s(l))}))}));return t.reduce(r)}},{"../../../errors":14,"./end-of-stream":24}],26:[function(t,n){var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(t,n,o,r){var a=function(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}(n,r,o);if(null!=a){if(!isFinite(a)||e(a)!==a||0>a)throw new i(r?o:"highWaterMark",a);return e(a)}return t.objectMode?16:16384}}},{"../../../errors":14}],27:[function(e,t){t.exports=e("events").EventEmitter},{events:6}],28:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":25}],29:[function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}var r=e("buffer"),a=r.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0===t?i.fill(0):"string"==typeof n?i.fill(t,n):i.fill(t),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:3}],30:[function(e,t,n){function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(p.isEncoding===f||!f(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=r,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(t)}function o(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function r(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function a(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&56319>=i)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var p=e("safe-buffer").Buffer,f=p.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);return 0<=r?(0<r&&(e.lastNeed=r-1),r):--i<n||-2===r?0:0<=(r=o(t[i]))?(0<r&&(e.lastNeed=r-2),r):--i<n||-2===r?0:0<=(r=o(t[i]))?(0<r&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},i.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":29}],31:[function(e,t){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],"/":[function(e,t){(function(n){function i(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function o(e,t){var n=new Error(e);return n.code=t,n}var r=e("debug")("simple-peer"),a=e("get-browser-rtc"),s=e("randombytes"),l=e("readable-stream"),c=e("queue-microtask"),u=65536;class d extends l.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:a(),!this._wrtc)throw"undefined"==typeof window?o("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):o("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void c(()=>this.destroy(o(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw o("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(o(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(o("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?function(e){console.warn(e)}("Ignoring unsupported ICE candidate."):this.destroy(o(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(o(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,i=n.get(t);if(i)throw i.removed?o("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):o("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){this._debug("replaceTrack()");var i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw o("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null==r.replaceTrack?this.destroy(o("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK")):r.replaceTrack(t)}removeTrack(e,t){this._debug("removeSender()");var n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw o("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(i):this.destroy(o(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,c(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):!this._isNegotiating&&(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(o("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(o(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(o("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(o(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=i(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(o(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(o(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=i(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(o(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(o(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(o("Connection failed.","ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(o("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(o("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{var i=[];n.forEach(e=>{i.push(t(e))}),e(null,i)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(!this.destroyed){var i=[];n.result().forEach(e=>{var n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,i.push(t(n))}),e(null,i)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);var i={},r={},a={},s=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(i[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(r[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(a[e.id]=e)});const l=e=>{s=!0;var t=r[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var n=i[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&l(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&l(e)}),s||Object.keys(a).length&&!Object.keys(r).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(o(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var c=this._cb;this._cb=null,c(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),c(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}d.WEBRTC_SUPPORT=!!a(),d.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},d.channelConfig={},t.exports=d}).call(this,e("buffer").Buffer)},{buffer:3,debug:4,"get-browser-rtc":7,"queue-microtask":12,randombytes:13,"readable-stream":28}]},{},[])("/")}));AFRAME.registerComponent("p2p",{schema:{ringtone:{default:"https://cdn.glitch.com/1c17f551-0c43-4849-b4b8-037e93bc3101%2Fringtone1.mp3?v=1581262788541"}},init:function(){const e=this;e.modeUI=document.createElement("span"),e.modeUI.innerHTML="<h1>P2P</h1>\n\n<button class='menu' id='video-call-btn'>Video Call</button> \n\n<button class='menu' id='voice-call-btn'>Voice Call</button> \n",e.mode="video",e.peerUI=document.createElement("span"),e.peerUI.innerHTML="<h1>Choose Peer</h1>",e.addVRUI(),document.addEventListener("gameStart",t=>{const n=document.querySelector("#hidden-div");n.appendChild(e.modeUI),Object.keys(CS1.otherPlayers).forEach(t=>{const n=document.createElement("button");n.style.width="20%",n.classList="menu",n.innerHTML=CS1.otherPlayers[t].name,n.setAttribute("id",CS1.otherPlayers[t].name),e.peerUI.appendChild(n)});const i=document.querySelector("#video-call-btn");CS1.ui.controls.addHoverSound(i),i.addEventListener("click",t=>{e.mode="video",e.peerUI.querySelector("h1").innerHTML="Choose Peer";const i=document.querySelector("#main");n.appendChild(i.firstChild),i.innerHTML="",i.appendChild(e.peerUI)}),"Oculus Quest"==CS1.device&&i.remove();const o=document.querySelector("#voice-call-btn");function r(t){const n=document.createElement("button");n.style.width="20%",n.classList="menu",n.innerHTML=t,n.setAttribute("id",t),e.peerUI.appendChild(n),n.addEventListener("click",e=>{CS1.p2p.call(t)})}o.addEventListener("click",t=>{e.mode="voice",e.peerUI.querySelector("h1").innerHTML="Choose Peer";const i=document.querySelector("#main");n.appendChild(i.firstChild),i.innerHTML="",i.appendChild(e.peerUI)}),CS1.ui.controls.addHoverSound(o),CS1.p2p=e,CS1.socket.on("offer",e=>{CS1.log(`P2P offer received from ${e.id}`),CS1.p2p.busy||CS1.p2p.ring(e)}),CS1.socket.on("answer",e=>{CS1.log(`P2P answer received from player with socket id : ${e.id}`),CS1.p2p.peer.signal(e.answer)}),CS1.socket.on("new-player",e=>{e.name!=CS1.myPlayer.name&&r(e.name)}),CS1.socket.on("players-already-here",e=>{Object.keys(e).forEach(t=>{r(e[t].name)})}),CS1.scene.addEventListener("before-remove-player",e=>{if(e.detail.player==CS1.myPlayer)return;const t=CS1.p2p.peerUI.querySelector(`#${e.detail.player.name}`);t&&t.remove()})})},call:function(e){navigator.getUserMedia({video:"video"==CS1.p2p.mode,audio:!0},(function(t){CS1.log("Got media stream on the initiator end."),CS1.log("Setting peer as new initiator."),CS1.p2p.peer=new SimplePeer({initiator:!0,stream:t,trickle:!1}),CS1.p2p.busy=!0,CS1.p2p.peer.on("error",e=>CS1.log("error",e)),CS1.p2p.peer.on("signal",t=>{CS1.log(`P2P offer sent to ${e}.`),CS1.socket.emit("offer",{name:e,offer:t,mode:CS1.p2p.mode})}),CS1.p2p.peer.on("connect",()=>{const e=`Thanks for accepting my ${CS1.p2p.mode} connection request.`;CS1.p2p.peer.send(e),CS1.log(`Sending data: ${e}`)}),CS1.p2p.peer.on("data",e=>{CS1.log(`Received data: ${e}`),"deny"==e&&(CS1.p2p.busy=!1)})}),()=>{})},ring:function(e){CS1.p2p.peerUI.querySelector("h1").innerHTML="video"==e.mode?"Choose Peer":"Choose Peer";const t=document.querySelector("#hidden-div"),n=document.querySelector("#main");t.appendChild(n.firstChild),n.innerHTML="",n.appendChild(CS1.p2p.peerUI),CS1.p2p.blink(CS1.otherPlayers[e.id].name),CS1.log(`Ringing notification for call from ${CS1.otherPlayers[e.id].name}.`),CS1.log("Auto-accepting call."),CS1.p2p.accept(e)},accept:function(e){CS1.log("Setting peer as new responder in accept function."),CS1.p2p.peer=new SimplePeer({initiator:!1,trickle:!1}),CS1.p2p.peer.on("error",e=>CS1.log("error",e)),CS1.log("Responder peer now signaling."),CS1.p2p.peer.signal(e.offer),CS1.p2p.peer.on("signal",t=>{CS1.log(`P2P answer sent to player with socket id : ${e.id}`),CS1.socket.emit("answer",{id:e.id,answer:t})}),CS1.p2p.peer.on("connect",()=>{CS1.p2p.busy=!0;const t=`I accept the ${e.mode} connection.`;CS1.log(`Sending P2P data: ${t}`),CS1.p2p.peer.send(t)}),CS1.p2p.peer.on("data",e=>{CS1.log(`P2P data received: ${e}`)}),CS1.p2p.peer.on("stream",e=>{CS1.log("Remote stream received."),CS1.p2p.stream=e;let t=document.querySelector("video");t||((t=document.createElement("video")).setAttribute("crossorigin","anonymous"),t.setAttribute("autoplay",!0),t.setAttribute("playsinline",!0),t.setAttribute("id","peer-video"),"srcObject"in t?t.srcObject=e:t.src=window.URL.createObjectURL(e),document.body.appendChild(t),"video"==CS1.p2p.mode&&setTimeout(e=>{t.play(),CS1.p2p.videoEntity=document.createElement("a-plane"),CS1.p2p.videoEntity.object3D.position.set(2,.9,-2),CS1.p2p.videoEntity.setAttribute("src","#peer-video"),CS1.cam.appendChild(CS1.p2p.videoEntity)},2e3))})},deny:function(e){CS1.p2p.busy=!1},blink:function(e){CS1.log(`Blink ${e} caller button function called.`);const t=document.querySelector(`#${e}`);t&&(CS1.p2p.busy=!0,CS1.p2p.blinkId=setInterval(e=>{const n=t.style.backgroundColor;t.style.backgroundColor="lime"==n?"black":"lime"},1e3),setTimeout(t=>{CS1.p2p.blinkId&&CS1.p2p.stopBlink(e)},3e4))},stopBlink:function(e){clearInterval(CS1.p2p.blinkId),CS1.p2p.blinkId=!1;const t=document.querySelector(`#${e}`);t&&(t.style.backgroundColor="black")},addVRUI:function(){const e=this,t=document.querySelector("#main"),n=document.querySelector("#menu1 ul"),i=document.createElement("li"),o=document.createElement("button");o.innerHTML="P2P",o.addEventListener("click",n=>{document.querySelector("#hidden-div").appendChild(t.firstChild),t.innerHTML="",t.appendChild(e.modeUI)}),i.appendChild(o),n.appendChild(i)}}),document.addEventListener("gameStart",e=>{}),AFRAME.registerComponent("mycomponent",{schema:{myproperty:{default:!0}},init:function(){}});let w=window.CS1={};(e=>{e.utils={uid:(()=>{const e={value:"0"};let t="123456789".split("").reduce((e,t,n,i)=>{const o={};return o.value=t,o.prev=e,o},e);return e.prev=t,function(){let e=Date.now();return"object"==typeof performance&&"function"==typeof performance.now&&(e=performance.now().toString().replace(".","")),t=t.prev,`${e}${Math.random().toString(16).substr(2)}${t.value}`}})(),isEqual:function(e,t){function n(e,t){var n=Object.prototype.toString.call(e);if(n!==Object.prototype.toString.call(t))return!1;if("[object Function]"===n){if(e.toString()!==t.toString())return!1}else if(e!==t)return!1}for(var i in e)if(e.hasOwnProperty(i)&&!1===n(e[i],t[i]))return!1;return!0},toColor:function(e){return"rgba("+[(16711680&(e>>>=0))>>>16,(65280&e)>>>8,255&e,((4278190080&e)>>>24)/255].join(",")+")"},randomFromArray:function(e){return e.length>0&&e[Math.floor(Math.random()*e.length)]},stringToInt:function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}}})(w),(e=>{function t(){}function n(){let e=arguments.length,t=arguments[0];if(e<2)return t;for(let n=1;n<e;n++){let e=arguments[n],i=Object.keys(e||{}),o=i.length;for(let n=0;n<o;n++){let o=i[n];t[o]=e[o]}}return t}function i(e){return n({},e)}function o(e,...t){let n,o,r=i(e);for(n=0;o=t[n++];)delete r[o];return r}e.shaderfrog=_,t.prototype={mainCamera:null,cubeCameras:{},reserved:{time:null,cameraPosition:null},umap:{float:{type:"f",value:0},int:{type:"i",value:0},vec2:{type:"v2",value:()=>new THREE.Vector2},vec3:{type:"v3",value:()=>new THREE.Vector3},vec4:{type:"v4",value:()=>new THREE.Vector4},samplerCube:{type:"t"},sampler2D:{type:"t"}},getUmap(e){let t=this.umap[e].value;return"function"==typeof t?t():t},registerCamera(e){if(!(e instanceof THREE.Camera))throw new Error("Cannot register a non-camera as a camera!");this.mainCamera=e},registerCubeCamera(e,t){if(!t.renderTarget)throw new Error("Cannot register a non-camera as a camera!");this.cubeCameras[e]=t},unregisterCamera(e){if(e in this.cubeCameras)delete this.cubeCameras[e];else{if(e!==this.mainCamera)throw new Error("You never registered camera "+e);delete this.mainCamera}},updateSource(e,t,i){if(i=i||"name",!this.shaderTypes[e])throw new Error("Runtime Error: Cannot update shader "+e+" because it has not been added.");let r,a,s=this.add(e,t);for(a=0;r=this.runningShaders[a++];)r[i]===e&&(n(r.material,o(s,"id")),r.material.needsUpdate=!0)},renameShader(e,t){let n,i;if(!(e in this.shaderTypes))throw new Error("Could not rename shader "+e+" to "+t+". It does not exist.");for(this.shaderTypes[t]=this.shaderTypes[e],delete this.shaderTypes[e],n=0;i=this.runningShaders[n++];)i.name===e&&(i.name=t)},get(e){let t=this.shaderTypes[e];return t.initted||this.create(e),t.material},add(e,t){let o,r=i(t);for(var a in r.fragmentShader=t.fragment,r.vertexShader=t.vertex,delete r.fragment,delete r.vertex,r.uniforms)null===(o=r.uniforms[a]).value&&(r.uniforms[a].value=this.getUmap(o.glslType));return e in this.shaderTypes?n(this.shaderTypes[e],r):this.shaderTypes[e]=r,r},create(e){let t=this.shaderTypes[e];return delete t.id,t.material=new THREE.RawShaderMaterial(t),this.runningShaders.push(t),t.init&&t.init(t.material),t.material.needsUpdate=!0,t.initted=!0,t.material},updateRuntime(e,t,n){let i,o,r,a;for(n=n||"name",o=0;i=this.runningShaders[o++];)if(i[n]===e)for(r in t.uniforms)r in this.reserved||r in i.material.uniforms&&("t"===(a=t.uniforms[r]).type&&"string"==typeof a.value&&(a.value=this.cubeCameras[a.value].renderTarget),i.material.uniforms[r].value=t.uniforms[r].value)},updateShaders(e,t){let n,i;for(t=t||{},i=0;n=this.runningShaders[i++];){for(let e in t.uniforms)e in n.material.uniforms&&(n.material.uniforms[e].value=t.uniforms[e]);"cameraPosition"in n.material.uniforms&&this.mainCamera&&(n.material.uniforms.cameraPosition.value=this.mainCamera.position.clone()),"viewMatrix"in n.material.uniforms&&this.mainCamera&&(n.material.uniforms.viewMatrix.value=this.mainCamera.matrixWorldInverse),"time"in n.material.uniforms&&(n.material.uniforms.time.value=e)}},shaderTypes:_,runningShaders:[]},AFRAME.registerSystem("shader-frog",{init:function(){this.frog_runtime=new t,this.clock=new THREE.Clock;var e=this,n=document.querySelector("a-scene");function i(){var t=document.querySelector("a-scene").systems.camera;t&&t.sceneEl&&t.sceneEl.camera&&(t=t.sceneEl.camera,e.frog_runtime.registerCamera(t))}n.hasLoaded?i().bind(this):n.addEventListener("loaded",i)},tick:function(e){this.frog_runtime.updateShaders(this.clock.getElapsedTime())}}),AFRAME.registerComponent("shader-frog",{schema:{name:{type:"string"}},init:function(){this.originalMaterial=this.el.getObject3D("mesh").material,this.shaderData=_[this.data.name]},update:function(){this.system.frog_runtime.add(this.data.name,this.shaderData);var e=this.system.frog_runtime.get(this.data.name);this.el.getObject3D("mesh").material=e},remove:function(){this.el.getObject3D("mesh").material=this.originalMaterial}})})(w),(e=>{AFRAME.registerComponent("proximity-glitch",{schema:{threshold:{type:"number",default:2},affects:{type:"string",default:""},value:{type:"number",default:-.1},sound:{type:"string",default:"https://cdn.glitch.com/6b222f93-e194-41e2-aaf6-59e5af64658d%2Fbuzz.mp3?1555284089077"}},init:function(){this.sound=document.createElement("a-sound"),this.sound.setAttribute("src",`url(${this.data.sound})`),this.el.appendChild(this.sound),this.soundIsPlaying=!1,this.sound.addEventListener("sound-ended",e=>{this.soundIsPlaying=!1}),this.scene=document.querySelector("a-scene"),this.scene.setAttribute("glitch",""),this.baseEffects=this.scene.getAttribute("effects")},tick:function(t,n){e.game.playerDistanceTo(this.el)<this.data.threshold?(this.scene.setAttribute("effects",`glitch,${this.baseEffects}`),this.data.affects&&(e.hud[this.data.affects].setValue(e.hud[this.data.affects].value+this.data.value),this.soundIsPlaying||(this.sound.components.sound.playSound(),this.soundIsPlaying=!0))):this.scene.setAttribute("effects",this.baseEffects)}})})(w),(e=>{window.addEventListener("load",(function(){e.stats={};let t=document.createElement("div");if(t.id="vr-stats",e.stats.container=t,!t)return;let n=function(e){let t={};{let n=document.createElement("div");n.id="stats-top",n.style.position="relative",n.style.left="0px",n.style.top="0px",n.style.width="2000px",n.style.height="500px",t.top=n,e.appendChild(n)}return t}(t);n.top.style.pointerEvents="none",e.stats.pointsDial=new y({container:n.top,labelText:"points",labelColor:"#ccc",gradientColor1:"white",gradientColor2:"red",max:1e3}),e.stats.energyDial=new y({container:n.top,labelText:"energy",labelColor:"#ccc",gradientColor1:"white",gradientColor2:"lime",max:1e3}),e.stats.energyDial.setValue(500),e.stats.magicDial=new y({container:n.top,labelText:"magic",labelColor:"#ccc",gradientColor1:"white",gradientColor2:"#b45ef9",suffix:"%",max:100}),e.stats.oxygenMeter=new b(n.top,"oxygen","#ccc",1)}))})(w),(e=>{AFRAME.registerComponent("game",{schema:{mode:{type:"string",default:"standard"}},init:function(){e.game=this,this.isRunning=!1,this.hasBegun=!1,e.callbacks={},this.determineDevice(),this.name=C.gameName,this.announcements={},this.announcements.welcome=C.welcomeMsg,this.welcomeDelay=C.voice.welcomeDelay,document.querySelector("#scene-container").style.display="block",document.querySelector("#loading-screen").style.display="none",e.voices=window.speechSynthesis.getVoices(),e.say=function(e,t="none given"){(e=new SpeechSynthesisUtterance(e)).voice="none given"==t?speechSynthesis.getVoices().filter((function(e){return e.name==C.voice.name}))[0]:speechSynthesis.getVoices().filter((function(e){return e.name==t}))[0],e.pitch=C.voice.pitch,e.rate=C.voice.rate,e.volume=C.voice.volume,speechSynthesis.speak(e)},e.sayall=function(t,n){e.socket.emit("sayall",{msg:t,name:n})},e.printVoices=()=>{speechSynthesis.getVoices().forEach(e=>{console.log(e.name,e.lang)})},e.sounds={},Object.keys(C.sounds).forEach(t=>{e.sounds[t]=new Audio(C.sounds[t].url),e.sounds[t].loop=C.sounds[t].loop||!1,e.sounds[t].volume=C.sounds[t].volume||1}),e.scene=AFRAME.scenes[0],e.otherPlayers={}},tick:function(e,t){},start:function(){e.logall=function(t,n=""){e.socket.emit("logall",{msg:t,channel:n})},"Oculus Quest"==e.device&&(e.myPlayer.leftHand=e.myPlayer.components.player.lh,e.myPlayer.rightHand=e.myPlayer.components.player.rh),e.game.hasBegun=!0;let t=new CustomEvent("gameStart",{detail:{message:"Let's play!",time:new Date},bubbles:!0,cancelable:!0});document.body.dispatchEvent(t),e.socket.emit("logall",{msg:`${e.myPlayer.name} is playing with a ${e.device} device!`,channel:"grab"})},playerDistanceTo:function(t){return e.myPlayer.object3D.position.distanceTo(t.object3D.position)},fireParticles:function(e){e.components.particles.fire()},mobileSetup:function(){e.myPlayer.cursor=document.querySelector("#cam-cursor"),e.device="Mobile",e.scene.setAttribute("vr-mode-ui","enabled: false"),e.mylatesttap=0;let t=document.querySelector("#mobile-btn-container"),n=document.createElement("img");n.setAttribute("src","https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fmenu-64-icon.png?v=1562375093680"),n.setAttribute("style","position:absolute;right:0px"),t.appendChild(n),n.addEventListener("touchstart",t=>{let n=(new Date).getTime()-e.mylatesttap;if(n<600&&n>0){let e=new CustomEvent("doubleTapMenu",{detail:{message:"Double Tappin!",time:new Date},bubbles:!0,cancelable:!0});document.body.dispatchEvent(e)}e.mylatesttap=(new Date).getTime()});let i=document.createElement("img");i.setAttribute("src","https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fchat-64-icon.png?v=1562528152057"),i.setAttribute("style","position:absolute;left:0px"),t.appendChild(i),i.addEventListener("touchstart",t=>{let n=(new Date).getTime()-e.mylatesttap;if(n<600&&n>0){let e=new CustomEvent("doubleTapChat",{detail:{message:"Double Tappin!",time:new Date},bubbles:!0,cancelable:!0});document.body.dispatchEvent(e)}e.mylatesttap=(new Date).getTime()})},standardSetup:function(){e.device="Standard",e.scene.setAttribute("vr-mode-ui","enabled: false"),e.myPlayer.cursor=document.querySelector("#cam-cursor")},oculusSetup:function(){document.querySelector("#cam-cursor").setAttribute("visible",!1),document.querySelector("#cam-cursor").setAttribute("fuse",!1),document.querySelector("#cam-cursor").pause(),e.device="Oculus Quest"},determineDevice:function(){self=this,navigator.xr?navigator.xr.isSessionSupported("immersive-vr").then(e=>{e&&navigator.userAgent.includes("OculusBrowser")?self.oculusSetup():AFRAME.utils.device.isMobile()?self.mobileSetup():self.standardSetup()}):navigator.getVRDisplays().then((function(e){e&&e[0]&&"Oculus Quest"==e[0].displayName?self.oculusSetup():AFRAME.utils.device.isMobile()?self.mobileSetup():self.standardSetup()}))}})})(w),(e=>{AFRAME.registerSystem("player",{schema:{avatars:{default:C.avatar.models}},init:function(){function t(e,t){e.model.removeAttribute("gltf-model"),e.HEAD?(e.HEAD.setAttribute("visible",!0),e.HAND_L.setAttribute("visible",!0),e.HAND_R.setAttribute("visible",!0)):(e.HEAD=document.createElement("a-gltf-model"),e.HAND_L=document.createElement("a-gltf-model"),e.HAND_R=document.createElement("a-gltf-model"),e.model.appendChild(e.HEAD),e.model.appendChild(e.HAND_L),e.model.appendChild(e.HAND_R),e.HEAD.setAttribute("src",t.url),e.HAND_L.setAttribute("src",t.lefthand),e.HAND_R.setAttribute("src",t.righthand))}e.__addOtherPlayer=n=>{console.log(`Adding new player with id: ${n.id}`),console.log(n),console.log(n.data);let i=C.avatar.models[n.data.faceIndex],o=document.createElement("a-entity");o.model=document.createElement("a-gltf-model"),o.avatarType=i.type,o.faceIndex=n.data.faceIndex,o.device=n.data.device,o.appendChild(o.model),o.setAttribute("player",""),o.model.setAttribute("shadow",""),o.model.setAttribute("scale",`${i.scale} ${i.scale} ${i.scale}`),o.model.setAttribute("visible","true"),1===o.avatarType?(o.model.setAttribute("src",`${i.url}`),o.model.setAttribute("animation-mixer","clip:idle"),o.model.setAttribute("rotation",`${-n.data.rotation.x} ${n.data.rotation.y+180} ${n.data.rotation.z}`)):2===o.avatarType&&t(o,i),o.id=n.id,o.name=n.name,o.setAttribute("position",`${n.data.position.x} ${n.data.position.y} ${n.data.position.z}`),o.msg=document.createElement("a-entity");let r=`Hello\nI am\n${n.name}!`;o.msg.setAttribute("text",`value:${r};\n                                     align:center;\n                                     width:8;\n                                     wrap-count:24; \n                                     color:yellow`),o.msg.setAttribute("position",i.msg.offset),o.msg.setAttribute("rotation","0 0 0"),o.model.appendChild(o.msg),e.scene.appendChild(o),e.otherPlayers[o.id]=o,e.sounds.playerJoined.play()},e.__updateOtherPlayers=n=>{Object.keys(n).forEach((function(i,o){if(i!=e.socket.id&&e.otherPlayers[i]){let o=C.avatar.models[n[i].faceIndex],r=e.otherPlayers[i];r.faceIndex!=n[i].faceIndex&&(r.faceIndex=n[i].faceIndex,1==o.type?r.model.setAttribute("src",o.url):r.model.setAttribute("src",""),r.avatarType!=o.type&&(r.avatarType=o.type,1==o.type?(r.HEAD&&(r.HEAD.setAttribute("visible",!1),r.HAND_L.setAttribute("visible",!1),r.HAND_R.setAttribute("visible",!1)),r.model.setAttribute("animation-mixer","clip:idle"),r.model.object3D.position.y=0):(r.model.setAttribute("rotation","0 0 0"),t(r,o)))),r.setAttribute("position",`${n[i].position.x} ${n[i].position.y+o.yOffset} ${n[i].position.z}`),r.model.setAttribute("scale",`${o.scale} ${o.scale} ${o.scale}`),r.msg.setAttribute("text",`color:${o.msg.color}`),2===r.avatarType&&r.HEAD&&"Oculus Quest"===r.device?(r.model.object3D.rotation.set(0,THREE.Math.degToRad(n[i].rotation.y+180),0),r.isWalking&&(r.model.object3D.position.y=Math.cos(e.myPlayer.timePlayed/100)/10),r.msg.object3D.position.set(0,3,0),r.HEAD.object3D.position.y=1.4,r.HEAD.object3D.rotation.set(THREE.Math.degToRad(-n[i].rotation.x/2),0,0),r.HAND_L.object3D.position.set(-1.2*n[i].lhp.x,1.2*n[i].lhp.y+.1,-3*n[i].lhp.z),r.HAND_L.object3D.rotation.set(THREE.Math.degToRad(45-n[i].lhr.x),THREE.Math.degToRad(n[i].lhr.y-90),THREE.Math.degToRad(n[i].lhr.z)),r.HAND_R.object3D.position.set(-1.2*n[i].rhp.x,1.2*n[i].rhp.y+.1,-3*n[i].rhp.z),r.HAND_R.object3D.rotation.set(THREE.Math.degToRad(45-n[i].rhr.x),THREE.Math.degToRad(n[i].rhr.y+90),THREE.Math.degToRad(n[i].rhr.z))):2===r.avatarType&&r.HEAD?(r.msg.setAttribute("position",`${o.msg.offset}`),r.model.object3D.rotation.set(0,THREE.Math.degToRad(n[i].rotation.y+180),0),r.isWalking?r.model.object3D.position.y=1.4+Math.cos(e.myPlayer.timePlayed/100)/10:r.model.object3D.position.y=1.4,r.HEAD.object3D.rotation.set(THREE.Math.degToRad(-n[i].rotation.x/2),0,0),r.HAND_L.object3D.position.set(1,0,0),r.HAND_L.object3D.rotation.set(THREE.Math.degToRad(0),THREE.Math.degToRad(0),THREE.Math.degToRad(0)),r.HAND_R.object3D.position.set(-1,0,0),r.HAND_R.object3D.rotation.set(THREE.Math.degToRad(0),THREE.Math.degToRad(0),THREE.Math.degToRad(0))):1===r.avatarType&&(r.msg.setAttribute("position",`${o.msg.offset}`),r.model.setAttribute("rotation",`${-n[i].rotation.x/8} ${n[i].rotation.y+180} ${n[i].rotation.z}`))}}))},e.__removePlayer=t=>{e.scene.dispatchEvent(new CustomEvent("before-remove-player",{detail:{player:e.otherPlayers[t]}})),e.otherPlayers[t].parentNode.removeChild(e.otherPlayers[t]),delete e.otherPlayers[t],e.sounds.playerLeft.play()},e.__setPlayerMessage=t=>{if(e.otherPlayers[t.id]){let n=C.avatar.models[e.otherPlayers[t.id].faceIndex];e.otherPlayers[t.id].msg.setAttribute("text",`value:${t.msg};\n        align:center;width:8;wrap-count:24;color:${n.msg.color}`)}}}}),AFRAME.registerComponent("player",{schema:{me:{type:"boolean",default:!1},eyelevel:{default:1.6},cursorcolor:{default:"crimson"},rayobjects:{default:"[grabbable],.screen,.collidable,.jukebox"},rayfar:{default:4},speed:{default:.2}},init:function(){const t=this;this.data.me&&(e.myPlayer=this.el,this.addCam(t),this.addHands(t),this.isWalking=!1,this.addMyListeners(),this.el.timePlayed=0,this.el.setAttribute("chat",""),this.el.setAttribute("userdata",""),e.myPlayer.spawnPos=this.el.getAttribute("position"),e.myPlayer.spawnRot=this.el.getAttribute("rotation"),this.totalSteps=0,this.active=!1)},addCam:function(t){const n=document.querySelector("[camera][wasd-controls]");n.removeAttribute("wasd-controls"),n.removeAttribute("look-controls"),n.setAttribute("camera","active:false"),t.cam=document.createElement("a-entity"),t.cam.id="cam",e.cam=t.cam,t.cam.setAttribute("camera","active:true"),t.cam.setAttribute("position",`0 ${this.data.eyelevel} 0`),t.cam.setAttribute("look-controls","pointerLockEnabled:true;reverseTouchDrag:true");const i=document.createElement("a-cursor");i.id="cam-cursor",i.setAttribute("material",`color:${this.data.cursorcolor}`),i.setAttribute("raycaster",`objects:${this.data.rayobjects};far:${this.data.rayfar}`),t.cam.appendChild(i),t.el.appendChild(t.cam),t.cam.addEventListener("loaded",e=>{n.parentNode.removeChild(n)})},addHands:function(e){e.lh=document.createElement("a-entity"),e.lh.setAttribute("laser-controls","hand:left"),e.lh.setAttribute("raycaster",`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`),e.rh=document.createElement("a-entity"),e.rh.setAttribute("laser-controls","hand:right"),e.rh.setAttribute("raycaster",`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`),e.el.appendChild(e.lh),e.el.appendChild(e.rh)},addMyListeners:function(){let t=this;e.myPlayer.setAttribute("movement-controls","speed:0;camera:#cam"),document.addEventListener("gameStart",n=>{t.el.id=e.socket.id,t.el.classList="my-player",t.active=!0,"Oculus Quest"==e.device&&(t.setOculusCtls(),e.scene.enterVR(),this.lh.addEventListener("model-loaded",e=>{this.lh.loaded=!0;const t=this.lh.getObject3D("mesh");t&&t.traverse((function(e){e.isMesh&&e.name}))})),"Mobile"==e.device&&this.setTouchCtls(),"Standard"==e.device&&this.setKeyCtls(),t.setSpeed(t.data.speed),e.sounds.playerJoined.play().catch(e=>{});let i={},o=Object.assign({},e.myPlayer.getAttribute("position"));o.x=Number(o.x.toFixed(2)),o.y=Number(o.y.toFixed(2))+.3,o.z=Number(o.z.toFixed(2)),i.position=o;let r=Object.assign({},e.cam.getAttribute("rotation"));r.x=Number(Number(r.x).toFixed(1)),r.y=Number(Number(r.y).toFixed(1)),r.z=Number(Number(r.z).toFixed(1)),i.rotation=r,i.faceIndex=1,i.device=e.device,e.socket.playerData.faceIndex=i.faceIndex,e.myPlayer._avatarType=C.avatar.models[e.socket.playerData.faceIndex].type,"Oculus Quest"==e.device&&2===e.myPlayer._avatarType&&(i.lhp={x:0,y:0,z:0},i.lhr={x:0,y:0,z:0},i.rhp={x:0,y:0,z:0},i.rhr={x:0,y:0,z:0}),e.socket.emit("new-player",i)})},setKeyCtls:function(){document.body.addEventListener("keydown",t=>{switch(t.which){case 87:case 38:case 83:case 40:this.isWalking||(e.socket.emit("anim","walk"),this.isWalking=!0)}}),document.body.addEventListener("keyup",t=>{switch(t.which){case 87:case 38:case 83:case 40:e.socket.emit("anim","idle"),this.isWalking=!1}})},setTouchCtls:function(){window.addEventListener("touchstart",t=>{this.isWalking||(e.socket.emit("anim","walk"),this.isWalking=!0)}),window.addEventListener("touchend",t=>{e.socket.emit("anim","idle"),this.isWalking=!1})},setOculusCtls:function(){let t=this.lh.components["oculus-touch-controls"],n=this.rh.components["oculus-touch-controls"];setTimeout(()=>{AFRAME.utils.device.checkHeadsetConnected()&&(t.el.addEventListener("thumbsticktouchstart",t=>{this.isWalking||(e.socket.emit("anim","walk"),this.isWalking=!0)}),t.el.addEventListener("thumbsticktouchend",t=>{e.socket.emit("anim","idle"),this.isWalking=!1}),n.el.addEventListener("thumbsticktouchstart",t=>{this.isWalking||(e.socket.emit("anim","walk"),this.isWalking=!0)}),n.el.addEventListener("thumbsticktouchend",t=>{e.socket.emit("anim","idle"),this.isWalking=!1}))},3e3)},tick:function(t,n){if(this.data.me||!this.active){if(++this.totalSteps%6==0){let t={},n=Object.assign({},e.myPlayer.getAttribute("position"));n.x=Number(n.x.toFixed(2)),n.y=Number(n.y.toFixed(2)),n.z=Number(n.z.toFixed(2)),t.position=n;let i=Object.assign({},e.cam.getAttribute("rotation"));if(i.x=Number(Number(i.x).toFixed(1)),i.y=Number(Number(i.y).toFixed(1)),i.z=Number(Number(i.z).toFixed(1)),t.rotation=i,t.faceIndex=e.socket.playerData?e.socket.playerData.faceIndex:0,"Oculus Quest"==e.device&&2===e.myPlayer._avatarType&&this.lh.hasLoaded){let e=this.lh.getAttribute("position");t.lhp={},t.lhp.x=Number(e.x.toFixed(2)),t.lhp.y=Number(e.y.toFixed(2)),t.lhp.z=Number(e.z.toFixed(2));let n=this.lh.getAttribute("rotation");t.lhr={},t.lhr.x=Number(n.x.toFixed(1)),t.lhr.y=Number(n.y.toFixed(1)),t.lhr.z=Number(n.z.toFixed(1));let i=this.rh.getAttribute("position");t.rhp={},t.rhp.x=Number(i.x.toFixed(2)),t.rhp.y=Number(i.y.toFixed(2)),t.rhp.z=Number(i.z.toFixed(2));let o=this.rh.getAttribute("rotation");t.rhr={},t.rhr.x=Number(o.x.toFixed(1)),t.rhr.y=Number(o.y.toFixed(1)),t.rhr.z=Number(o.z.toFixed(1))}e.socket.setPlayerData(t),e.socket.sendUpdateToServer(),this.totalSteps%36==0&&e.hud&&e.hud.oxygenMeter&&e.hud.oxygenMeter.animateTo(e.hud.oxygenMeter.el.value-.0035)}this.el.timePlayed+=n}},setSpeed:function(e){document.querySelector("#navmesh")?this.el.setAttribute("movement-controls",`constrainToNavMesh: true; speed: ${e}`):this.el.setAttribute("movement-controls",`speed: ${e}`)}}),AFRAME.registerPrimitive("a-player",{defaultComponents:{player:{me:!0}},mappings:{eyelevel:"player.eyelevel",cursorcolor:"player.cursorcolor",rayobjects:"player.rayobjects",rayfar:"player.rayfar",speed:"player.speed"}})})(w),function(e){let t=C.bgm.songs,n=document.createElement("audio"),i="https://api.soundcloud.com/tracks/",o="/stream?client_id=b9d11449cd4c64d461b8b5c30650cd06",r=document.createElement("button");r.innerHTML="PLAY NEXT SONG",r.zIndex=100,r.style.display="none",r.addEventListener("click",t=>{e.bgm.playNext()});let a=document.createElement("div");a.style.margin="0 auto",a.style.width="800px",setTimeout(()=>{document.body.appendChild(a),a.appendChild(r)},5e3),n.addEventListener("ended",t=>{console.log("bgm song ended"),e.bgm.playNext()});let s=0;e.bgm={audio:n,tracks:t,play:()=>{n.play(),n.volume=C.bgm.volume},playTrackIndex:e=>{s=e,n.src=i+t[s]+o,n.crossorigin="anonymous",n.load(),n.loop=!C.bgm.playAll,n.play(),n.volume=C.bgm.volume},pause:()=>{n.pause()},playNext:()=>{++s==t.length&&(s=0),n.src=i+t[s]+o,n.crossorigin="anonymous",n.load(),n.loop=!C.bgm.playAll,n.play(),n.volume=C.bgm.volume}},document.addEventListener("gameStart",t=>{e.bgm.tracks.length&&e.bgm.playTrackIndex(0)})}(w),(e=>{let t=e.socket=io();t.on("connect",()=>{t.authid?(t.emit("reauth",t.authid),t.id=t.authid,console.log("Emitting reauth!"),console.log("socket.id : ",t.id),console.log("socket.playerData : "),console.log(t.playerData),console.log("socket.lastPlayerData : "),console.log(t.lastPlayerData),t.isInitialized=!0):(t.playerData={position:{},rotation:{},faceIndex:0},t.lastPlayerData={position:{},rotation:{},faceIndex:0},e.login=(e,n)=>{t.emit("login",{name:e,pw:n})})}),t.on("login-results",n=>{n.success?(document.querySelector("#login").style.zIndex=-1,document.querySelector("#login").style.display="none",document.querySelector("#login").setAttribute("hidden",""),e.myPlayer.name=n.name,e.game.start(),t.authid=t.id):document.getElementById("login-msg").innerHTML=n.msg}),t.on("anim",t=>{e.otherPlayers[t.id]&&(e.otherPlayers[t.id].isWalking="walk"==t.anim,1===e.otherPlayers[t.id].avatarType&&e.otherPlayers[t.id].firstElementChild.setAttribute("animation-mixer",`clip:${t.anim}`))}),t.on("avatar",t=>{e.otherPlayers[t.id]&&e.otherPlayers[t.id].components.player.setAvatar(t.avatar)}),t.on("disconnect",()=>{console.log("I have disconnected.")}),t.initializePlayerData=e=>{t.isInitialized=!0,t.playerData=e,t.playerData.faceIndex=0,t.emit("new-player",e)},t.setPlayerData=e=>{t.playerData=Object.assign({},e)},t.on("new-player",t=>{e.debug&&console.log("New player object received: ",t),e.game.hasBegun&&t.id!=e.socket.id&&(setTimeout(()=>{},1e3),e.__addOtherPlayer(t))}),t.on("initial-bodies-state",t=>{e.debug&&(console.warn("SETTING INITIAL BODIES STATE"),console.log(t)),e.__updateGrabbables(t)});e.utils.isEqual;t.sendUpdateToServer=()=>{if(!AFRAME.utils.deepEqual(t.lastPlayerData,t.playerData)){t.emit("send-update",t.playerData),t.lastPlayerData=Object.assign({},t.playerData);let i=[];for(var n in e.grabbables){let t=e.grabbables[n];if(t.states.includes("moving")||t.dirty){let e={name:n,position:t.object3D.position,scale:t.object3D.scale,rotation:{x:t.object3D.quaternion.x,y:t.object3D.quaternion.y,z:t.object3D.quaternion.z,w:t.object3D.quaternion.w},soundState:t.soundState};t.dirty=!1,i.push(e)}}i.length>0&&(t.emit("update-bodies",i),e.debug&&(console.log(`SENDING ${i[0].name} DATA TO SERVER`),console.log(i)))}},t.on("players-already-here",t=>{e.debug&&(console.log("receiving players already here"),console.log(t)),Object.keys(t).forEach((function(n,i){e.__addOtherPlayer({id:n,name:t[n].name,data:{position:t[n].position,rotation:t[n].rotation,faceIndex:t[n].faceIndex}})})),setTimeout(()=>{e.say(e.game.announcements.welcome)},e.game.welcomeDelay)}),t.on("request-for-bodies",()=>{let n={};for(name in e.grabbables){if(!e.grabbables.hasOwnProperty(name))continue;let t=e.grabbables[name];n[name]={name:name,position:t.object3D.position,scale:t.object3D.scale,rotation:{x:t.object3D.quaternion.x,y:t.object3D.quaternion.y,z:t.object3D.quaternion.z,w:t.object3D.quaternion.w},soundState:t.soundState}}t.emit("initial-bodies-state",n),e.debug&&(console.warn("SENDING INITIAL BODIES STATE TO SERVER"),console.log(n))}),t.on("update-bodies",t=>{e.game.hasBegun&&e.__updateGrabbables(t)}),t.on("update-players",t=>{e.game&&e.game.hasBegun&&e.__updateOtherPlayers(t)}),t.on("remove-player",t=>{if(e.game.hasBegun&&e.otherPlayers[t]){e.otherPlayers[t].name;e.__removePlayer(t),setTimeout(()=>{},1500)}}),t.on("msg",t=>{e.game.hasBegun&&e.__setPlayerMessage(t)}),t.on("failed-socket",()=>{window.location.reload()}),t.on("log",e=>{console.log(e)}),t.on("say",t=>{e.say(t.msg,t.name)})})(w),(e=>{AFRAME.registerSystem("collectible",{schema:{},init:function(){e.collectibles=[],e.socket.on("collect",t=>{if(!e.game||!e.game.hasBegun)return;let n=e.collectibles[t.index];if(n){if(n.el.components.sound__loop&&n.el.components.sound__loop.pause(),n.el.setAttribute("visible",!1),n.soundIsPlaying=!0,n.el.components.sound__collect.playSound(),n.data.cb&&!AFRAME.utils.device.isMobile()&&e.game[n.data.cb](n.el),n.el.addEventListener("sound-ended",e=>{n.soundIsPlaying=!1,n.pause()}),t.collector==e.socket.id&&n.data.affects)if(n.data.affects.includes("avatar")){let t;switch(n.el.id){case"avatar-upgrade-1":t=.35;break;case"avatar-upgrade-2":t=.5}e.myPlayer.components.player.setSpeed(t),console.log("speed boost")}else e.stats[n.data.affects].changeBy(n.data.value);if(t.collector!=e.socket.id&&"avatarUpgrade"==n.data.affects){let i,o;switch(console.log(e.otherPlayers[t.collector]),n.el.id){case"avatar-upgrade-1":i=document.querySelector("#avatar-to-clone-1").cloneNode(),o="Skully";break;case"avatar-upgrade-2":i=document.querySelector("#avatar-to-clone-2").cloneNode(),o="Speedy"}let r=e.otherPlayers[t.collector];i.appendChild(r.msg),r.msg.setAttribute("text",`value:${o};\n                                   align:center;\n                                   width:8;\n                                   wrap-count:24; \n                                   color:yellow`),i.setAttribute("visible",!0),r.appendChild(i),r.removeChild(r.model),r.model=i}}}),e.socket.on("spawn-collectible",t=>{let n=e.collectibles[t];n.el.components.sound__loop&&n.el.components.sound__loop.play(),n.el.setAttribute("visible",!0),n.play()}),e.socket.on("request-for-collectibles",()=>{let t=[];e.collectibles.forEach(e=>{t.push({spawns:e.data.spawns,spawnDelay:e.data.spawnDelay})}),e.socket.emit("initial-collectibles-state",t)})}}),AFRAME.registerComponent("collectible",{schema:{threshold:{type:"number",default:2.7},soundCollect:{type:"string",default:"https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Fpowerup_1.mp3?1552158629039"},soundLoop:{},cb:{type:"string",default:""},affects:{type:"string",default:""},value:{type:"number",default:1},spawns:{type:"boolean",default:!1},spawnDelay:{type:"number",default:5}},init:function(){this.el.setAttribute("sound__collect",`src:url(${this.data.soundCollect})`),this.data.soundLoop&&this.el.setAttribute("sound__loop",`src:url(${this.data.soundLoop});autoplay:true;loop:true`),e.collectibles.push(this),console.log("running collectible init"),this.soundIsPlaying=!1},tick:function(){this.el.object3D.position.distanceTo(e.myPlayer.object3D.position)<this.data.threshold&&"avatarUpgrade"!=this.data.affects&&this.collect(),"avatarUpgrade"==this.data.affects&&this.el.parentElement.object3D.position.distanceTo(e.myPlayer.object3D.position)<this.data.threshold&&this.collect()},collect:function(){this.soundIsPlaying||(e.socket.disconnected?(this.el.components.sound__loop&&this.el.components.sound__loop.pause(),this.el.setAttribute("visible",!1),this.el.setAttribute("scale","0 0 0"),this.soundIsPlaying=!0,this.el.components.sound__collect.playSound(),this.data.cb&&e.game[this.data.cb](this.el),this.data.affects&&"avatarUpgrade"!==this.data.affects&&e.stats[this.data.affects].animateTo(e.stats[this.data.affects].value+this.data.value),this.el.addEventListener("sound-ended",e=>{this.soundIsPlaying=!1,this.pause()}),this.data.spawns&&setTimeout(()=>{this.el.components.sound__loop&&this.el.components.sound__loop.play(),this.el.setAttribute("visible",!0),this.el.setAttribute("scale","1 1 1"),this.play()},1e3*this.data.spawnDelay)):e.socket.emit("request-collection",{index:e.collectibles.indexOf(this)}))}})})(w),(e=>{AFRAME.registerComponent("npc",{schema:{waypoints:{type:"array"},name:{type:"string"},roam:{type:"boolean",default:!1}},init:function(){this.waypoints=this.data.waypoints,this.waypointsIndex=0,this.moves=0,this.data.name?this.name=this.data.name:this.name=e.npc?`npc${e.npc.length}`:"npc0",e.npc?e.npc[this.name]=this:(e.npc={},e.npc[this.name]=this),this.addListeners(),e.socket.emit("register-npc",{name:this.name,waypoints:this.waypoints}),this.data.roam&&this.requestMove()},addListeners:function(){let t=this;this.el.addEventListener("navigation-end",this.onNavigationEnd.bind(t)),e.socket._callbacks["$npc-move"]||e.socket.on("npc-move",n=>{n.dest!==t.dest&&(e.npc[n.name].dest=n.dest,e.npc[n.name].setPosition(n.pos),e.npc[n.name].move(n.dest))})},setWaypoints:function(t){this.waypoints=t,e.socket.emit("set-npc-waypoints",{name:this.name,waypoints:t})},addWaypoint:function(t){this.waypoints.push(t),e.socket.emit("add-npc-waypoint",{name:this.name,waypoint:t})},move:function(e=!1){let t;this.moves++;let n={};if(t=e||this.waypoints[this.waypointsIndex]){let e=t.split(" ");n.x=e[0],n.y=e[1],n.z=e[2],n&&this.el.setAttribute("nav-agent",{active:!0,destination:n,speed:2})}else console.error("You must define some waypoints for your npc to roam! < npc component >")},setPosition:function(e){this.el.setAttribute("position",e)},tick:function(e,t){},requestMove:function(t=""){e.socket.emit("npc-move",{name:this.name,pos:this.el.getAttribute("position"),dest:t})},onNavigationEnd:function(e){this.waypointsIndex++,this.waypointsIndex==this.waypoints.length&&(this.waypointsIndex=0);let t=this.waypoints[this.waypointsIndex];this.data.roam&&this.requestMove(t)}})})(w),(e=>{AFRAME.registerComponent("userdata",{init:function(){e.db={},e.db.set=(t,n)=>{e.socket.emit("db-set",t,n)},e.db.get=(t,n)=>{e.socket.emit("db-get",t,n)}}})})(w),(e=>{AFRAME.registerComponent("iot-api",{schema:{LED:{type:"string",default:"on"}},init:function(){const t=this;this.el.addEventListener("click",e=>{console.log("Click detected on LED."),t.toggleLED()}),e.iot={},e.iot.set=(t,n)=>{e.socket.emit("iot-set",t,n)},e.iot.get=(t,n)=>{e.socket.emit("iot-get",t,n)},e.socket.on("iot-update",e=>{console.log("LED update"),"on"==e.LED?this.onLED():this.offLED()}),e.iot.get("LED",e=>{console.log("LED INITIALIZE"),"on"==e?this.onLED():this.offLED()})},setLED:function(e){},offLED:function(){this.data.LED="off",this.el.setAttribute("material","color:#551818;emissiveIntensity:0")},onLED:function(){this.data.LED="on",this.el.setAttribute("material","color:red;emissiveIntensity:4")},toggleLED:function(){"on"==this.data.LED?(this.offLED(),e.iot.set({LED:"off"},()=>{})):(this.onLED(),e.iot.set({LED:"on"},()=>{}))},tick:function(e,t){}})})(w),window.console.warn=function(){}}();
//# sourceMappingURL=bundle.js.map
